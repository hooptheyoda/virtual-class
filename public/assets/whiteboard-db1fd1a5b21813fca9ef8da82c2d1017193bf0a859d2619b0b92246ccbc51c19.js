var COMPILED=!0,goog=goog||{};goog.global=this,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.provide=function(t){if(!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t];for(var e=t;(e=e.substring(0,e.lastIndexOf(".")))&&!goog.getObjectByName(e);)goog.implicitNamespaces_[e]=!0}goog.exportPath_(t)},goog.setTestOnly=function(t){if(COMPILED&&!goog.DEBUG)throw t=t||"",Error(": "+t)},COMPILED||(goog.isProvided_=function(t){return!goog.implicitNamespaces_[t]&&!!goog.getObjectByName(t)},goog.implicitNamespaces_={}),goog.exportPath_=function(t,e,o){t=t.split("."),o=o||goog.global,!(t[0]in o)&&o.execScript&&o.execScript("var "+t[0]);for(var i;t.length&&(i=t.shift());)!t.length&&goog.isDef(e)?o[i]=e:o=o[i]?o[i]:o[i]={}},goog.getObjectByName=function(t,e){for(var o,i=t.split("."),n=e||goog.global;o=i.shift();){if(!goog.isDefAndNotNull(n[o]))return null;n=n[o]}return n},goog.globalize=function(t,e){var o,i=e||goog.global;for(o in t)i[o]=t[o]},goog.addDependency=function(t,e,o){if(!COMPILED){var i;t=t.replace(/\\/g,"/");for(var n=goog.dependencies_,r=0;i=e[r];r++)n.nameToPath[i]=t,t in n.pathToNames||(n.pathToNames[t]={}),n.pathToNames[t][i]=!0;for(i=0;e=o[i];i++)t in n.requires||(n.requires[t]={}),n.requires[t][e]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.require=function(t){if(!COMPILED&&!goog.isProvided_(t)){if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(t);if(e)return goog.included_[e]=!0,void goog.writeScripts_()}throw t="goog.require could not find: "+t,goog.global.console&&goog.global.console.error(t),Error(t)}},goog.basePath="",goog.nullFunction=function(){},goog.identityFunction=function(t){return t},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return void 0!==t&&"write"in t},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var t=goog.global.document.getElementsByTagName("script"),e=t.length-1;0<=e;--e){var o=t[e].src,i=-1==(i=o.lastIndexOf("?"))?o.length:i;if("base.js"==o.substr(i-7,7)){goog.basePath=o.substr(0,i-7);break}}},goog.importScript_=function(t){var e=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[t]&&e(t)&&(goog.dependencies_.written[t]=!0)},goog.writeScriptTag_=function(t){if(goog.inHtmlDocument_()){var e=goog.global.document;if("complete"==e.readyState){if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}return e.write('<script type="text/javascript" src="'+t+'"></script>'),!0}return!1},goog.writeScripts_=function(){function t(e){if(!(e in n.written)){if(!(e in n.visited)&&(n.visited[e]=!0,e in n.requires))for(var r in n.requires[e])if(!goog.isProvided_(r)){if(!(r in n.nameToPath))throw Error("Undefined nameToPath for "+r);t(n.nameToPath[r])}e in i||(i[e]=!0,o.push(e))}}var e,o=[],i={},n=goog.dependencies_;for(e in goog.included_)n.written[e]||t(e);for(e=0;e<o.length;e++){if(!o[e])throw Error("Undefined script input");goog.importScript_(goog.basePath+o[e])}},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.typeOf=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var o=Object.prototype.toString.call(t);if("[object Window]"==o)return"object";if("[object Array]"==o||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==o||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&"undefined"==typeof t.call)return"object";return e},goog.isDef=function(t){return void 0!==t},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var e=goog.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.removeUid=function(t){"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){if("object"==(o=goog.typeOf(t))||"array"==o){if(t.clone)return t.clone();var e,o="array"==o?[]:{};for(e in t)o[e]=goog.cloneObject(t[e]);return o}return t},goog.bindNative_=function(t){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e){if(!t)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,o),t.apply(e,i)}}return function(){return t.apply(e,arguments)}},goog.bind=function(){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){var o=Array.prototype.slice.call(arguments);return o.unshift.apply(o,e),t.apply(this,o)}},goog.mixin=function(t,e){for(var o in e)t[o]=e[o]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,o=e.createElement("script");o.type="text/javascript",o.defer=!1,o.appendChild(e.createTextNode(t)),e.body.appendChild(o),e.body.removeChild(o)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(t,e){var o=function(t){return goog.cssNameMapping_[t]||t},i=function(t){t=t.split("-");for(var e=[],i=0;i<t.length;i++)e.push(o(t[i]));return e.join("-")};i=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:i:function(t){return t};return e?t+"-"+i(e):i(t)},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,e){var o,i=e||{};for(o in i){var n=(""+i[o]).replace(/\$/g,"$$$$");t=t.replace(RegExp("\\{\\$"+o+"\\}","gi"),n)}return t},goog.getMsgWithFallback=function(t){return t},goog.exportSymbol=function(t,e,o){goog.exportPath_(t,e,o)},goog.exportProperty=function(t,e,o){t[e]=o},goog.inherits=function(t,e){function o(){}o.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new o,t.prototype.constructor=t},goog.base=function(t,e){var o=arguments.callee.caller;if(o.superClass_)return o.superClass_.constructor.apply(t,Array.prototype.slice.call(arguments,1));for(var i=Array.prototype.slice.call(arguments,2),n=!1,r=t.constructor;r;r=r.superClass_&&r.superClass_.constructor)if(r.prototype[e]===o)n=!0;else if(n)return r.prototype[e].apply(t,i);if(t[e]===o)return t.constructor.prototype[e].apply(t,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){t.call(goog.global)};var bay={whiteboard:{}};bay.whiteboard.translation={},bay.whiteboard.Collection=function(){this.list=[]},bay.whiteboard.Collection.prototype.getElements=function(){return this.list},bay.whiteboard.Collection.prototype.getBoard=function(){return this.board},bay.whiteboard.Collection.prototype.joinBoard=function(t){this.board=t},bay.whiteboard.Collection.prototype.clear=function(){for(var t=this.list.length-1;0<=t;t--)this.list[t]&&this.list[t].deleteElement&&this.list[t].deleteElement();return this.list=[],this.onClear&&this.onClear(e),this},bay.whiteboard.Collection.prototype.add=function(t){return t.collection=this,this.list.push(t),this.onChange(t),this.list.length},bay.whiteboard.Collection.prototype.getNeighbourList=function(t,e,o,i){for(var n=[],r=0;r<this.list.length;r++)if(this.list[r]&&this.list[r].distance&&(!o||!this.list[r].hidden)){var g=this.list[r].distance(t.x,t.y);g<=e&&n.push({element:this.list[r],distance:g})}return i&&n.sort(function(t,e){return t.distance-e.distance}),n},bay.whiteboard.Collection.prototype.getJson=function(t,e){return t.toJson(this.list,this.list.indexOf(t),e)},bay.whiteboard.Collection.prototype.acceptJsonStr=function(a){var b=function(t,e){var o=e.id;if(t.list[o])t.list[o].acceptData(e);else{var i=bay.whiteboard.Collection.getFromJsonFunc(e.type);i&&(t.list[o]=i(e,t.list),t.list[o].collection=t)}};if((a=eval("("+a+")"))instanceof Array)for(var c=0;c<a.length;c++)b(this,a[c]);else b(this,a);return this},bay.whiteboard.Collection.prototype.acceptDeletion=function(t){var e=this.list[t];return!(!e||0!=e.dependant.length)&&(e.deleteElement(),this.list.length==t+1?this.list.splice(t,1):this.list[t]=null,!0)},bay.whiteboard.Collection.prototype.jsonCode=function(){for(var t="[",e=this.getElements(),o=0;o<e.length;o++)e[o]&&e[o].toJson&&(0<o&&(t+=","),t+="\n"+e[o].toJson(e,o));return t+"\n]"},bay.whiteboard.Collection.prototype.parseJson=function(a){return a=eval("("+a+")"),this.rebuild(a),this},bay.whiteboard.Collection.prototype.rebuild=function(t){this.clear();for(var e=0;e<t.length;e++){var o=bay.whiteboard.Collection.getFromJsonFunc(t[e].type);o&&(this.list[e]=o(t[e],this.list),this.list[e].collection=this,this.onChange(this.list[e]))}return this},bay.whiteboard.Collection.fromJsonFunc={},bay.whiteboard.Collection.getFromJsonFunc=function(t){return bay.whiteboard.Collection.fromJsonFunc[t]},bay.whiteboard.Collection.setFromJsonFunc=function(t,e){bay.whiteboard.Collection.fromJsonFunc[t]=e},bay.whiteboard.Collection.prototype.onChange=function(){},bay.whiteboard.Element=function(){this.label="",this.exists=!1,this.dependant=[]},bay.whiteboard.Element.prototype.recalcDependant=function(){if(this.dependant)for(var t=0;t<this.dependant.length;t++)this.dependant[t].recalc&&this.dependant[t].recalc()},bay.whiteboard.Element.prototype.deleteElement=function(){},bay.whiteboard.Element.prototype.onChange=function(){this.collection&&this.collection.onChange(this)},bay.whiteboard.Element.prototype.deleteDependant=function(t){index=this.dependant.indexOf(t),this.dependant.splice(index,1)},bay.whiteboard.Element.prototype.isExists=function(){return this.exists},bay.whiteboard.Element.prototype.distanceTo=function(t){return t&&t.exists&&this.exists?this.distance(t.x,t.y):NaN},bay.whiteboard.Element.prototype.jsonHeader=function(t){return'"id": '+t+(this.label?', "label": "'+this.label+'"':"")+(this.color?', "color": "'+this.color+'"':"")+(this.trace?', "trace": true':"")+(this.hidden?', "hidden": true':"")},bay.whiteboard.Element.prototype.restoreFromJson=function(t){this.label=t.label?t.label:"",t.hidden?this.hidden=!0:delete this.hidden,t.color?this.color=t.color:delete this.color,t.trace?this.trace=!0:delete this.trace},bay.whiteboard.Element.prototype.acceptData=function(t){this.restoreFromJson(t)},bay.whiteboard.Element.prototype.hide=function(){this.hidden=!0,this.onChange()},bay.whiteboard.Element.prototype.show=function(){this.hidden=!1,this.onChange()},bay.whiteboard.Element.prototype.setLabel=function(t){this.label=t,this.onChange()},bay.whiteboard.Element.prototype.setTrace=function(t){this.trace=t,this.onChange()},bay.whiteboard.Element.prototype.setColor=function(t){this.color=t,this.onChange()},bay.whiteboard.Vector=function(t,e){t instanceof bay.whiteboard.Vector||t instanceof bay.whiteboard.Point?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)},bay.whiteboard.Vector.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e);return Math.sqrt((o.x-this.x)*(o.x-this.x)+(o.y-this.y)*(o.y-this.y))},bay.whiteboard.Point=function(){bay.whiteboard.Element.call(this),this.y=this.x=null},goog.inherits(bay.whiteboard.Point,bay.whiteboard.Element),bay.whiteboard.Point.prototype.toString=function(){return this.exists?goog.getMsg("Point: [{$x},{$y}]",{x:this.x.toFixed(2),y:this.y.toFixed(2)}):goog.getMsg("Point does not exist")},bay.whiteboard.Point.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e);return Math.sqrt((o.x-this.x)*(o.x-this.x)+(o.y-this.y)*(o.y-this.y))},bay.whiteboard.Point.prototype.getTrace=function(){return new bay.whiteboard.PointFree(this)},bay.whiteboard.Point.prototype.draw=function(t){if(this.exists&&this.x>=t.area.minX&&this.x<=t.area.maxX&&this.y>=t.area.minY&&this.y<=t.area.maxY){var e=t.transform([this.x,this.y]);if(this.current){var o=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color),i=new goog.graphics.SolidFill(t.properties.current.color);t.graphics.drawCircle(e[0],e[1],t.properties.point.size,o,i)}else if(this.hover&&(o=new goog.graphics.Stroke(t.properties.hover.width,t.properties.hover.color),i=new goog.graphics.SolidFill(t.properties.hover.color),t.graphics.drawCircle(e[0],e[1],t.properties.point.size,o,i)),color=t.properties.point.color,this.color&&(color=this.color),o=new goog.graphics.Stroke(t.properties.point.width,color),i=new goog.graphics.SolidFill(color),t.graphics.drawCircle(e[0],e[1],t.properties.point.size,o,i),this.label){var n=new goog.graphics.Font(t.properties.point.fontsize,t.properties.point.font);t.graphics.drawText(this.label,e[0],e[1],null,null,"left",null,n,o,i)}}},bay.whiteboard.PointFree=function(t,e){bay.whiteboard.Point.call(this),this.moveTo(t,e)},goog.inherits(bay.whiteboard.PointFree,bay.whiteboard.Point),bay.whiteboard.PointFree.prototype.moveTo=function(t,e){bay.whiteboard.Vector.call(this,t,e),this.recalc(),this.onChange()},bay.whiteboard.PointFree.prototype.acceptData=function(t){bay.whiteboard.PointFree.superClass_.acceptData.call(this,t),bay.whiteboard.Vector.call(this,t.x,t.y),this.recalc()},bay.whiteboard.PointFree.prototype.recalc=function(){this.exists=null!=this.x&&null!=this.y,this.recalcDependant()},bay.whiteboard.PointFree.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PointFree", "x": '+this.x+', "y": '+this.y+"}"},bay.whiteboard.PointFree.fromJson=function(t){var e=new bay.whiteboard.PointFree(t.x,t.y);return e.restoreFromJson(t),e},bay.whiteboard.Collection.setFromJsonFunc("PointFree",bay.whiteboard.PointFree.fromJson),bay.whiteboard.getIntersection=function(t,e,o,i){if(t instanceof bay.whiteboard.geometry.Line&&e instanceof bay.whiteboard.geometry.Line)return new bay.whiteboard.geometry.Point_2l(t,e);if(t instanceof bay.whiteboard.geometry.Circle&&e instanceof bay.whiteboard.geometry.Circle){var n=new bay.whiteboard.geometry.Point_2c(t,e,0);return t=new bay.whiteboard.geometry.Point_2c(t,e,1),n.distance(o,i)<t.distance(o,i)?n:t}return t instanceof bay.whiteboard.geometry.Circle&&e instanceof bay.whiteboard.geometry.Line?(n=new bay.whiteboard.geometry.Point_lc(e,t,0),t=new bay.whiteboard.geometry.Point_lc(e,t,1),n.distance(o,i)<t.distance(o,i)?n:t):t instanceof bay.whiteboard.geometry.Line&&e instanceof bay.whiteboard.geometry.Circle?(n=new bay.whiteboard.geometry.Point_lc(t,e,0),t=new bay.whiteboard.geometry.Point_lc(t,e,1),n.distance(o,i)<t.distance(o,i)?n:t):void 0},goog.getMsg=function(t,e){var o={};"undefined"!=typeof current_LOCALE&&(o=bay_whiteboard_translation[current_LOCALE]),t=o[t]||t;var i;o=e||{};for(i in o){var n=(""+o[i]).replace(/\$/g,"$$$$");t=t.replace(RegExp("\\{\\$"+i+"\\}","gi"),n)}return t},goog.string={},goog.string.Unicode={NBSP:"\xa0"},goog.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},goog.string.endsWith=function(t,e){var o=t.length-e.length;return 0<=o&&t.indexOf(e,o)==o},goog.string.caseInsensitiveStartsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(0,e.length))},goog.string.caseInsensitiveEndsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(t.length-e.length,e.length))},goog.string.subs=function(t){for(var e=1;e<arguments.length;e++){var o=String(arguments[e]).replace(/\$/g,"$$$$");t=t.replace(/\%s/,o)}return t},goog.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmpty=function(t){return/^[\s\xa0]*$/.test(t)},goog.string.isEmptySafe=function(t){return goog.string.isEmpty(goog.string.makeSafe(t))},goog.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},goog.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},goog.string.isNumeric=function(t){return!/[^0-9]/.test(t)},goog.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},goog.string.isSpace=function(t){return" "==t},goog.string.isUnicodeChar=function(t){return 1==t.length&&" "<=t&&"~">=t||"\x80"<=t&&"\ufffd">=t},goog.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(t,e){var o=String(t).toLowerCase(),i=String(e).toLowerCase();return o<i?-1:o==i?0:1},goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g,goog.string.numerateCompare=function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var o=t.toLowerCase().match(goog.string.numerateCompareRegExp_),i=e.toLowerCase().match(goog.string.numerateCompareRegExp_),n=Math.min(o.length,i.length),r=0;r<n;r++){var g=o[r],s=i[r];if(g!=s)return o=parseInt(g,10),!isNaN(o)&&(i=parseInt(s,10),!isNaN(i)&&o-i)?o-i:g<s?-1:1}return o.length!=i.length?o.length-i.length:t<e?-1:1},goog.string.urlEncode=function(t){return encodeURIComponent(String(t))},goog.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},goog.string.newLineToBr=function(t,e){return t.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.htmlEscape=function(t,e){return e?t.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;"):goog.string.allRe_.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(goog.string.amperRe_,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(goog.string.ltRe_,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(goog.string.gtRe_,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(goog.string.quotRe_,"&quot;")),t):t},goog.string.amperRe_=/&/g,goog.string.ltRe_=/</g,goog.string.gtRe_=/>/g,goog.string.quotRe_=/\"/g,goog.string.allRe_=/[&<>\"]/,goog.string.unescapeEntities=function(t){return goog.string.contains(t,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(t):goog.string.unescapePureXmlEntities_(t):t},goog.string.unescapeEntitiesUsingDom_=function(t){var e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},o=document.createElement("div");return t.replace(goog.string.HTML_ENTITY_PATTERN_,function(t,i){var n=e[t];if(n)return n;if("#"==i.charAt(0)){var r=Number("0"+i.substr(1));isNaN(r)||(n=String.fromCharCode(r))}return n||(o.innerHTML=t+" ",n=o.firstChild.nodeValue.slice(0,-1)),e[t]=n})},goog.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,function(t,e){switch(e){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==e.charAt(0)){var o=Number("0"+e.substr(1));if(!isNaN(o))return String.fromCharCode(o)}return t}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(t,e){return goog.string.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.stripQuotes=function(t,e){for(var o=e.length,i=0;i<o;i++){var n=1==o?e:e.charAt(i);if(t.charAt(0)==n&&t.charAt(t.length-1)==n)return t.substring(1,t.length-1)}return t},goog.string.truncate=function(t,e,o){return o&&(t=goog.string.unescapeEntities(t)),t.length>e&&(t=t.substring(0,e-3)+"..."),o&&(t=goog.string.htmlEscape(t)),t},goog.string.truncateMiddle=function(t,e,o,i){if(o&&(t=goog.string.unescapeEntities(t)),i&&t.length>e){i>e&&(i=e);var n=t.length-i;t=t.substring(0,e-i)+"..."+t.substring(n)}else t.length>e&&(i=Math.floor(e/2),n=t.length-i,t=t.substring(0,i+e%2)+"..."+t.substring(n));return o&&(t=goog.string.htmlEscape(t)),t},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(t){if((t=String(t)).quote)return t.quote();for(var e=['"'],o=0;o<t.length;o++){var i=t.charAt(o),n=i.charCodeAt(0);e[o+1]=goog.string.specialEscapeChars_[i]||(31<n&&127>n?i:goog.string.escapeChar(i))}return e.push('"'),e.join("")},goog.string.escapeString=function(t){for(var e=[],o=0;o<t.length;o++)e[o]=goog.string.escapeChar(t.charAt(o));return e.join("")},goog.string.escapeChar=function(t){if(t in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[t];if(t in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[t]=goog.string.specialEscapeChars_[t];var e=t,o=t.charCodeAt(0);return 31<o&&127>o?e=t:(256>o?(e="\\x",(16>o||256<o)&&(e+="0")):(e="\\u",4096>o&&(e+="0")),e+=o.toString(16).toUpperCase()),goog.string.jsEscapeCache_[t]=e},goog.string.toMap=function(t){for(var e={},o=0;o<t.length;o++)e[t.charAt(o)]=!0;return e},goog.string.contains=function(t,e){return-1!=t.indexOf(e)},goog.string.countOf=function(t,e){return t&&e?t.split(e).length-1:0},goog.string.removeAt=function(t,e,o){var i=t;return 0<=e&&e<t.length&&0<o&&(i=t.substr(0,e)+t.substr(e+o,t.length-e-o)),i},goog.string.remove=function(t,e){var o=RegExp(goog.string.regExpEscape(e),"");return t.replace(o,"")},goog.string.removeAll=function(t,e){var o=RegExp(goog.string.regExpEscape(e),"g");return t.replace(o,"")},goog.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=function(t,e){return Array(e+1).join(t)},goog.string.padNumber=function(t,e,o){return t=goog.isDef(o)?t.toFixed(o):String(t),-1==(o=t.indexOf("."))&&(o=t.length),goog.string.repeat("0",Math.max(0,e-o))+t},goog.string.makeSafe=function(t){return null==t?"":String(t)},goog.string.buildString=function(){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(t,e){for(var o=0,i=goog.string.trim(String(t)).split("."),n=goog.string.trim(String(e)).split("."),r=Math.max(i.length,n.length),g=0;0==o&&g<r;g++){var s=i[g]||"",a=n[g]||"",l=RegExp("(\\d*)(\\D*)","g"),h=RegExp("(\\d*)(\\D*)","g");do{var u=l.exec(s)||["","",""],c=h.exec(a)||["","",""];if(0==u[0].length&&0==c[0].length)break;o=0==u[1].length?0:parseInt(u[1],10);var p=0==c[1].length?0:parseInt(c[1],10);o=goog.string.compareElements_(o,p)||goog.string.compareElements_(0==u[2].length,0==c[2].length)||goog.string.compareElements_(u[2],c[2])}while(0==o)}return o},goog.string.compareElements_=function(t,e){return t<e?-1:t>e?1:0},goog.string.HASHCODE_MAX_=4294967296,goog.string.hashCode=function(t){for(var e=0,o=0;o<t.length;++o)e=31*e+t.charCodeAt(o),e%=goog.string.HASHCODE_MAX_;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(t){var e=Number(t);return 0==e&&goog.string.isEmpty(t)?NaN:e},goog.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})},goog.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(t,e){var o=goog.isString(e)?goog.string.regExpEscape(e):"\\s";return t.replace(RegExp("(^"+(o?"|["+o+"]+":"")+")([a-z])","g"),function(t,e,o){return e+o.toUpperCase()})},goog.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),goog.isString(t)?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):NaN},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.global.navigator?goog.global.navigator.userAgent:null},goog.userAgent.getNavigator=function(){return goog.global.navigator},goog.userAgent.init_=function(){goog.userAgent.detectedOpera_=!1,goog.userAgent.detectedIe_=!1,goog.userAgent.detectedWebkit_=!1,goog.userAgent.detectedMobile_=!1,goog.userAgent.detectedGecko_=!1;var t;if(!goog.userAgent.BROWSER_KNOWN_&&(t=goog.userAgent.getUserAgentString())){var e=goog.userAgent.getNavigator();goog.userAgent.detectedOpera_=0==t.indexOf("Opera"),goog.userAgent.detectedIe_=!goog.userAgent.detectedOpera_&&-1!=t.indexOf("MSIE"),goog.userAgent.detectedWebkit_=!goog.userAgent.detectedOpera_&&-1!=t.indexOf("WebKit"),goog.userAgent.detectedMobile_=goog.userAgent.detectedWebkit_&&-1!=t.indexOf("Mobile"),goog.userAgent.detectedGecko_=!goog.userAgent.detectedOpera_&&!goog.userAgent.detectedWebkit_&&"Gecko"==e.product}},goog.userAgent.BROWSER_KNOWN_||goog.userAgent.init_(),goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.userAgent.detectedOpera_,goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.userAgent.detectedIe_,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.userAgent.detectedGecko_,goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.userAgent.detectedWebkit_,goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.detectedMobile_,goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var t=goog.userAgent.getNavigator();return t&&t.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD,goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac"),goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win"),goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux"),goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11");var t=goog.userAgent.getUserAgentString();goog.userAgent.detectedAndroid_=!!t&&0<=t.indexOf("Android"),goog.userAgent.detectedIPhone_=!!t&&0<=t.indexOf("iPhone"),goog.userAgent.detectedIPad_=!!t&&0<=t.indexOf("iPad")},goog.userAgent.PLATFORM_KNOWN_||goog.userAgent.initPlatform_(),goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_,goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_,goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_,goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_,goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.userAgent.detectedAndroid_,goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.userAgent.detectedIPhone_,goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.userAgent.detectedIPad_,goog.userAgent.determineVersion_=function(){var t,e="";return goog.userAgent.OPERA&&goog.global.opera?(e=goog.global.opera.version,e="function"==typeof e?e():e):(goog.userAgent.GECKO?t=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?t=/MSIE\s+([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(t=/WebKit\/(\S+)/),t&&(e=(e=t.exec(goog.userAgent.getUserAgentString()))?e[1]:"")),goog.userAgent.IE&&(t=goog.userAgent.getDocumentMode_())>parseFloat(e)?String(t):e},goog.userAgent.getDocumentMode_=function(){var t=goog.global.document;return t?t.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(t,e){return goog.string.compareVersions(t,e)},goog.userAgent.isVersionCache_={},goog.userAgent.isVersion=function(t){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionCache_[t]||(goog.userAgent.isVersionCache_[t]=0<=goog.string.compareVersions(goog.userAgent.VERSION,t))},goog.userAgent.isDocumentMode=function(t){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=t},goog.userAgent.DOCUMENT_MODE=function(){var t=goog.global.document;return t&&goog.userAgent.IE?goog.userAgent.getDocumentMode_()||("CSS1Compat"==t.compatMode?parseInt(goog.userAgent.VERSION,10):5):void 0}(),goog.object={},goog.object.forEach=function(t,e,o){for(var i in t)e.call(o,t[i],i,t)},goog.object.filter=function(t,e,o){var i,n={};for(i in t)e.call(o,t[i],i,t)&&(n[i]=t[i]);return n},goog.object.map=function(t,e,o){var i,n={};for(i in t)n[i]=e.call(o,t[i],i,t);return n},goog.object.some=function(t,e,o){for(var i in t)if(e.call(o,t[i],i,t))return!0;return!1},goog.object.every=function(t,e,o){for(var i in t)if(!e.call(o,t[i],i,t))return!1;return!0},goog.object.getCount=function(t){var e,o=0;for(e in t)o++;return o},goog.object.getAnyKey=function(t){for(var e in t)return e},goog.object.getAnyValue=function(t){for(var e in t)return t[e]},goog.object.contains=function(t,e){return goog.object.containsValue(t,e)},goog.object.getValues=function(t){var e,o=[],i=0;for(e in t)o[i++]=t[e];return o},goog.object.getKeys=function(t){var e,o=[],i=0;for(e in t)o[i++]=e;return o},goog.object.getValueByKeys=function(t,e){for(var o=(i=goog.isArrayLike(e))?e:arguments,i=i?0:1;i<o.length&&(t=t[o[i]],goog.isDef(t));i++);return t},goog.object.containsKey=function(t,e){return e in t},goog.object.containsValue=function(t,e){for(var o in t)if(t[o]==e)return!0;return!1},goog.object.findKey=function(t,e,o){for(var i in t)if(e.call(o,t[i],i,t))return i},goog.object.findValue=function(t,e,o){return(e=goog.object.findKey(t,e,o))&&t[e]},goog.object.isEmpty=function(t){for(var e in t)return!1;return!0},goog.object.clear=function(t){for(var e in t)delete t[e]},goog.object.remove=function(t,e){var o;return(o=e in t)&&delete t[e],o},goog.object.add=function(t,e,o){if(e in t)throw Error('The object already contains the key "'+e+'"');goog.object.set(t,e,o)},goog.object.get=function(t,e,o){return e in t?t[e]:o},goog.object.set=function(t,e,o){t[e]=o},goog.object.setIfUndefined=function(t,e,o){return e in t?t[e]:t[e]=o},goog.object.clone=function(t){var e,o={};for(e in t)o[e]=t[e];return o},goog.object.unsafeClone=function(t){
if("object"==(o=goog.typeOf(t))||"array"==o){if(t.clone)return t.clone();var e,o="array"==o?[]:{};for(e in t)o[e]=goog.object.unsafeClone(t[e]);return o}return t},goog.object.transpose=function(t){var e,o={};for(e in t)o[t[e]]=e;return o},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(t){for(var e,o,i=1;i<arguments.length;i++){o=arguments[i];for(e in o)t[e]=o[e];for(var n=0;n<goog.object.PROTOTYPE_FIELDS_.length;n++)e=goog.object.PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}},goog.object.create=function(){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var e={},o=0;o<t;o+=2)e[arguments[o]]=arguments[o+1];return e},goog.object.createSet=function(){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var e={},o=0;o<t;o++)e[arguments[o]]=!0;return e},goog.object.createImmutableView=function(t){var e=t;return Object.isFrozen&&!Object.isFrozen(t)&&(e=Object.create(t),Object.freeze(e)),e},goog.object.isImmutableView=function(t){return!!Object.isFrozen&&Object.isFrozen(t)},goog.debug={},goog.debug.Error=function(t){Error.captureStackTrace?Error.captureStackTrace(this,goog.debug.Error):this.stack=Error().stack||"",t&&(this.message=String(t))},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(t,e){e.unshift(t),goog.debug.Error.call(this,goog.string.subs.apply(null,e)),e.shift(),this.messagePattern=t},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.doAssertFailure_=function(t,e,o,i){var n="Assertion failed";if(o){n=n+": "+o;var r=i}else t&&(n+=": "+t,r=e);throw new goog.asserts.AssertionError(""+n,r||[])},goog.asserts.assert=function(t,e){return goog.asserts.ENABLE_ASSERTS&&!t&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.fail=function(t){if(goog.asserts.ENABLE_ASSERTS)throw new goog.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))},goog.asserts.assertNumber=function(t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(t)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertString=function(t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(t)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertFunction=function(t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(t)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObject=function(t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(t)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertArray=function(t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(t)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertBoolean=function(t,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(t)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertInstanceof=function(t,e,o){return goog.asserts.ENABLE_ASSERTS&&!(t instanceof e)&&goog.asserts.doAssertFailure_("instanceof check failed.",null,o,Array.prototype.slice.call(arguments,3)),t},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.peek=function(t){return t[t.length-1]},goog.array.ARRAY_PROTOTYPE_=Array.prototype,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.indexOf?function(t,e,o){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.indexOf.call(t,e,o)}:function(t,e,o){if(o=null==o?0:0>o?Math.max(0,t.length+o):o,goog.isString(t))return goog.isString(e)&&1==e.length?t.indexOf(e,o):-1;for(;o<t.length;o++)if(o in t&&t[o]===e)return o;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(t,e,o){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(t,e,null==o?t.length-1:o)}:function(t,e,o){if(0>(o=null==o?t.length-1:o)&&(o=Math.max(0,t.length+o)),goog.isString(t))return goog.isString(e)&&1==e.length?t.lastIndexOf(e,o):-1;for(;0<=o;o--)if(o in t&&t[o]===e)return o;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.forEach?function(t,e,o){goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.forEach.call(t,e,o)}:function(t,e,o){for(var i=t.length,n=goog.isString(t)?t.split(""):t,r=0;r<i;r++)r in n&&e.call(o,n[r],r,t)},goog.array.forEachRight=function(t,e,o){var i=t.length,n=goog.isString(t)?t.split(""):t;for(i=i-1;0<=i;--i)i in n&&e.call(o,n[i],i,t)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.filter?function(t,e,o){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.filter.call(t,e,o)}:function(t,e,o){for(var i=t.length,n=[],r=0,g=goog.isString(t)?t.split(""):t,s=0;s<i;s++)if(s in g){var a=g[s];e.call(o,a,s,t)&&(n[r++]=a)}return n},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.map?function(t,e,o){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.map.call(t,e,o)}:function(t,e,o){for(var i=t.length,n=Array(i),r=goog.isString(t)?t.split(""):t,g=0;g<i;g++)g in r&&(n[g]=e.call(o,r[g],g,t));return n},goog.array.reduce=function(t,e,o,i){if(t.reduce)return i?t.reduce(goog.bind(e,i),o):t.reduce(e,o);var n=o;return goog.array.forEach(t,function(o,r){n=e.call(i,n,o,r,t)}),n},goog.array.reduceRight=function(t,e,o,i){if(t.reduceRight)return i?t.reduceRight(goog.bind(e,i),o):t.reduceRight(e,o);var n=o;return goog.array.forEachRight(t,function(o,r){n=e.call(i,n,o,r,t)}),n},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.some?function(t,e,o){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.some.call(t,e,o)}:function(t,e,o){for(var i=t.length,n=goog.isString(t)?t.split(""):t,r=0;r<i;r++)if(r in n&&e.call(o,n[r],r,t))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.every?function(t,e,o){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.every.call(t,e,o)}:function(t,e,o){for(var i=t.length,n=goog.isString(t)?t.split(""):t,r=0;r<i;r++)if(r in n&&!e.call(o,n[r],r,t))return!1;return!0},goog.array.count=function(t,e,o){var i=0;return goog.array.forEach(t,function(t,n,r){e.call(o,t,n,r)&&++i},o),i},goog.array.find=function(t,e,o){return 0>(e=goog.array.findIndex(t,e,o))?null:goog.isString(t)?t.charAt(e):t[e]},goog.array.findIndex=function(t,e,o){for(var i=t.length,n=goog.isString(t)?t.split(""):t,r=0;r<i;r++)if(r in n&&e.call(o,n[r],r,t))return r;return-1},goog.array.findRight=function(t,e,o){return 0>(e=goog.array.findIndexRight(t,e,o))?null:goog.isString(t)?t.charAt(e):t[e]},goog.array.findIndexRight=function(t,e,o){var i=t.length,n=goog.isString(t)?t.split(""):t;for(i=i-1;0<=i;i--)if(i in n&&e.call(o,n[i],i,t))return i;return-1},goog.array.contains=function(t,e){return 0<=goog.array.indexOf(t,e)},goog.array.isEmpty=function(t){return 0==t.length},goog.array.clear=function(t){if(!goog.isArray(t))for(var e=t.length-1;0<=e;e--)delete t[e];t.length=0},goog.array.insert=function(t,e){goog.array.contains(t,e)||t.push(e)},goog.array.insertAt=function(t,e,o){goog.array.splice(t,o,0,e)},goog.array.insertArrayAt=function(t,e,o){goog.partial(goog.array.splice,t,o,0).apply(null,e)},goog.array.insertBefore=function(t,e,o){var i;2==arguments.length||0>(i=goog.array.indexOf(t,o))?t.push(e):goog.array.insertAt(t,e,i)},goog.array.remove=function(t,e){var o,i=goog.array.indexOf(t,e);return(o=0<=i)&&goog.array.removeAt(t,i),o},goog.array.removeAt=function(t,e){return goog.asserts.assert(null!=t.length),1==goog.array.ARRAY_PROTOTYPE_.splice.call(t,e,1).length},goog.array.removeIf=function(t,e,o){return 0<=(e=goog.array.findIndex(t,e,o))&&(goog.array.removeAt(t,e),!0)},goog.array.concat=function(){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.toArray=function(t){var e=t.length;if(0<e){for(var o=Array(e),i=0;i<e;i++)o[i]=t[i];return o}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(t){for(var e=1;e<arguments.length;e++){var o,i=arguments[e];if(goog.isArray(i)||(o=goog.isArrayLike(i))&&Object.prototype.hasOwnProperty.call(i,"callee"))t.push.apply(t,i);else if(o)for(var n=t.length,r=i.length,g=0;g<r;g++)t[n+g]=i[g];else t.push(i)}},goog.array.splice=function(t){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.splice.apply(t,goog.array.slice(arguments,1))},goog.array.slice=function(t,e,o){return goog.asserts.assert(null!=t.length),2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(t,e):goog.array.ARRAY_PROTOTYPE_.slice.call(t,e,o)},goog.array.removeDuplicates=function(t,e){for(var o=e||t,i={},n=0,r=0;r<t.length;){var g=t[r++],s=goog.isObject(g)?"o"+goog.getUid(g):(typeof g).charAt(0)+g;Object.prototype.hasOwnProperty.call(i,s)||(i[s]=!0,o[n++]=g)}o.length=n},goog.array.binarySearch=function(t,e,o){return goog.array.binarySearch_(t,o||goog.array.defaultCompare,!1,e)},goog.array.binarySelect=function(t,e,o){return goog.array.binarySearch_(t,e,!0,void 0,o)},goog.array.binarySearch_=function(t,e,o,i,n){for(var r,g=0,s=t.length;g<s;){var a,l=g+s>>1;0<(a=o?e.call(n,t[l],l,t):e(i,t[l]))?g=l+1:(s=l,r=!a)}return r?g:~g},goog.array.sort=function(t,e){goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.sort.call(t,e||goog.array.defaultCompare)},goog.array.stableSort=function(t,e){for(var o=0;o<t.length;o++)t[o]={index:o,value:t[o]};var i=e||goog.array.defaultCompare;for(goog.array.sort(t,function(t,e){return i(t.value,e.value)||t.index-e.index}),o=0;o<t.length;o++)t[o]=t[o].value},goog.array.sortObjectsByKey=function(t,e,o){var i=o||goog.array.defaultCompare;goog.array.sort(t,function(t,o){return i(t[e],o[e])})},goog.array.isSorted=function(t,e,o){e=e||goog.array.defaultCompare;for(var i=1;i<t.length;i++){var n=e(t[i-1],t[i]);if(0<n||0==n&&o)return!1}return!0},goog.array.equals=function(t,e,o){if(!goog.isArrayLike(t)||!goog.isArrayLike(e)||t.length!=e.length)return!1;var i=t.length;o=o||goog.array.defaultCompareEquality;for(var n=0;n<i;n++)if(!o(t[n],e[n]))return!1;return!0},goog.array.compare=function(t,e,o){return goog.array.equals(t,e,o)},goog.array.compare3=function(t,e,o){o=o||goog.array.defaultCompare;for(var i=Math.min(t.length,e.length),n=0;n<i;n++){var r=o(t[n],e[n]);if(0!=r)return r}return goog.array.defaultCompare(t.length,e.length)},goog.array.defaultCompare=function(t,e){return t>e?1:t<e?-1:0},goog.array.defaultCompareEquality=function(t,e){return t===e},goog.array.binaryInsert=function(t,e,o){return 0>(o=goog.array.binarySearch(t,e,o))&&(goog.array.insertAt(t,e,-(o+1)),!0)},goog.array.binaryRemove=function(t,e,o){return 0<=(e=goog.array.binarySearch(t,e,o))&&goog.array.removeAt(t,e)},goog.array.bucket=function(t,e){for(var o={},i=0;i<t.length;i++){var n=t[i],r=e(n,i,t);goog.isDef(r)&&(o[r]||(o[r]=[])).push(n)}return o},goog.array.toObject=function(t,e,o){var i={};return goog.array.forEach(t,function(n,r){i[e.call(o,n,r,t)]=n}),i},goog.array.range=function(t,e,o){var i=[],n=0,r=t;if(o=o||1,void 0!==e&&(n=t,r=e),0>o*(r-n))return[];if(0<o)for(t=n;t<r;t+=o)i.push(t);else for(t=n;t>r;t+=o)i.push(t);return i},goog.array.repeat=function(t,e){for(var o=[],i=0;i<e;i++)o[i]=t;return o},goog.array.flatten=function(){for(var t=[],e=0;e<arguments.length;e++){var o=arguments[e];goog.isArray(o)?t.push.apply(t,goog.array.flatten.apply(null,o)):t.push(o)}return t},goog.array.rotate=function(t,e){return goog.asserts.assert(null!=t.length),t.length&&(0<(e%=t.length)?goog.array.ARRAY_PROTOTYPE_.unshift.apply(t,t.splice(-e,e)):0>e&&goog.array.ARRAY_PROTOTYPE_.push.apply(t,t.splice(0,-e))),t},goog.array.zip=function(){if(!arguments.length)return[];for(var t=[],e=0;;e++){for(var o=[],i=0;i<arguments.length;i++){var n=arguments[i];if(e>=n.length)return t;o.push(n[e])}t.push(o)}},goog.array.shuffle=function(t,e){for(var o=e||Math.random,i=t.length-1;0<i;i--){var n=Math.floor(o()*(i+1)),r=t[i];t[i]=t[n],t[n]=r}},goog.math={},goog.math.randomInt=function(t){return Math.floor(Math.random()*t)},goog.math.uniformRandom=function(t,e){return t+Math.random()*(e-t)},goog.math.clamp=function(t,e,o){return Math.min(Math.max(t,e),o)},goog.math.modulo=function(t,e){var o=t%e;return 0>o*e?o+e:o},goog.math.lerp=function(t,e,o){return t+o*(e-t)},goog.math.nearlyEquals=function(t,e,o){return Math.abs(t-e)<=(o||1e-6)},goog.math.standardAngle=function(t){return goog.math.modulo(t,360)},goog.math.toRadians=function(t){return t*Math.PI/180},goog.math.toDegrees=function(t){return 180*t/Math.PI},goog.math.angleDx=function(t,e){return e*Math.cos(goog.math.toRadians(t))},goog.math.angleDy=function(t,e){return e*Math.sin(goog.math.toRadians(t))},goog.math.angle=function(t,e,o,i){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(i-e,o-t)))},goog.math.angleDifference=function(t,e){var o=goog.math.standardAngle(e)-goog.math.standardAngle(t);return 180<o?o-=360:-180>=o&&(o=360+o),o},goog.math.sign=function(t){return 0==t?0:0>t?-1:1},goog.math.longestCommonSubsequence=function(t,e,o,i){o=o||function(t,e){return t==e},i=i||function(e){return t[e]};for(var n=t.length,r=e.length,g=[],s=0;s<n+1;s++)g[s]=[],g[s][0]=0;for(var a=0;a<r+1;a++)g[0][a]=0;for(s=1;s<=n;s++)for(a=1;a<=n;a++)o(t[s-1],e[a-1])?g[s][a]=g[s-1][a-1]+1:g[s][a]=Math.max(g[s-1][a],g[s][a-1]);var l=[];for(s=n,a=r;0<s&&0<a;)o(t[s-1],e[a-1])?(l.unshift(i(s-1,a-1)),s--,a--):g[s-1][a]>g[s][a-1]?s--:a--;return l},goog.math.sum=function(){return goog.array.reduce(arguments,function(t,e){return t+e},0)},goog.math.average=function(){return goog.math.sum.apply(null,arguments)/arguments.length},goog.math.standardDeviation=function(){if(2>(e=arguments.length))return 0;var t=goog.math.average.apply(null,arguments),e=goog.math.sum.apply(null,goog.array.map(arguments,function(e){return Math.pow(e-t,2)}))/(e-1);return Math.sqrt(e)},goog.math.isInt=function(t){return isFinite(t)&&0==t%1},goog.math.isFiniteNumber=function(t){return isFinite(t)&&!isNaN(t)},goog.math.safeFloor=function(t,e){return goog.asserts.assert(!goog.isDef(e)||0<e),Math.floor(t+(e||2e-15))},goog.math.safeCeil=function(t,e){return goog.asserts.assert(!goog.isDef(e)||0<e),Math.ceil(t-(e||2e-15))},goog.math.Coordinate=function(t,e){this.x=goog.isDef(t)?t:0,this.y=goog.isDef(e)?e:0},goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)},goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}),goog.math.Coordinate.equals=function(t,e){return t==e||!(!t||!e)&&(t.x==e.x&&t.y==e.y)},goog.math.Coordinate.distance=function(t,e){var o=t.x-e.x,i=t.y-e.y;return Math.sqrt(o*o+i*i)},goog.math.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},goog.math.Coordinate.azimuth=function(t){return goog.math.angle(0,0,t.x,t.y)},goog.math.Coordinate.squaredDistance=function(t,e){var o=t.x-e.x,i=t.y-e.y;return o*o+i*i},goog.math.Coordinate.difference=function(t,e){return new goog.math.Coordinate(t.x-e.x,t.y-e.y)},goog.math.Coordinate.sum=function(t,e){return new goog.math.Coordinate(t.x+e.x,t.y+e.y)},goog.math.Coordinate.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},goog.math.Coordinate.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},goog.math.Coordinate.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},goog.math.Coordinate.prototype.translate=function(t,e){return t instanceof goog.math.Coordinate?(this.x+=t.x,this.y+=t.y):(this.x+=t,goog.isNumber(e)&&(this.y+=e)),this},goog.math.Coordinate.prototype.scale=function(t,e){var o=goog.isNumber(e)?e:t;return this.x*=t,this.y*=o,this},goog.math.Box=function(t,e,o,i){this.top=t,this.right=e,this.bottom=o,this.left=i},goog.math.Box.boundingBox=function(){for(var t=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),e=1;e<arguments.length;e++){var o=arguments[e];t.top=Math.min(t.top,o.y),t.right=Math.max(t.right,o.x),t.bottom=Math.max(t.bottom,o.y),t.left=Math.min(t.left,o.x)}return t},goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)},goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"}),goog.math.Box.prototype.contains=function(t){return goog.math.Box.contains(this,t)},goog.math.Box.prototype.expand=function(t,e,o,i){return goog.isObject(t)?(this.top-=t.top,this.right+=t.right,this.bottom+=t.bottom,this.left-=t.left):(this.top-=t,this.right+=e,this.bottom+=o,this.left-=i),this},goog.math.Box.prototype.expandToInclude=function(t){this.left=Math.min(this.left,t.left),this.top=Math.min(this.top,t.top),this.right=Math.max(this.right,t.right),this.bottom=Math.max(this.bottom,t.bottom)},goog.math.Box.equals=function(t,e){return t==e||!(!t||!e)&&(t.top==e.top&&t.right==e.right&&t.bottom==e.bottom&&t.left==e.left)},goog.math.Box.contains=function(t,e){return!(!t||!e)&&(e instanceof goog.math.Box?e.left>=t.left&&e.right<=t.right&&e.top>=t.top&&e.bottom<=t.bottom:e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom)},goog.math.Box.relativePositionX=function(t,e){return e.x<t.left?e.x-t.left:e.x>t.right?e.x-t.right:0},goog.math.Box.relativePositionY=function(t,e){return e.y<t.top?e.y-t.top:e.y>t.bottom?e.y-t.bottom:0},goog.math.Box.distance=function(t,e){var o=goog.math.Box.relativePositionX(t,e),i=goog.math.Box.relativePositionY(t,e);return Math.sqrt(o*o+i*i)},goog.math.Box.intersects=function(t,e){return t.left<=e.right&&e.left<=t.right&&t.top<=e.bottom&&e.top<=t.bottom},goog.math.Box.intersectsWithPadding=function(t,e,o){return t.left<=e.right+o&&e.left<=t.right+o&&t.top<=e.bottom+o&&e.top<=t.bottom+o},goog.math.Box.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},goog.math.Box.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},goog.math.Box.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this},goog.math.Box.prototype.translate=function(t,e){return t instanceof goog.math.Coordinate?(this.left+=t.x,this.right+=t.x,this.top+=t.y,this.bottom+=t.y):(this.left+=t,this.right+=t,goog.isNumber(e)&&(this.top+=e,this.bottom+=e)),this},goog.math.Box.prototype.scale=function(t,e){var o=goog.isNumber(e)?e:t;return this.left*=t,this.right*=t,this.top*=o,this.bottom*=o,this},goog.math.Size=function(t,e){this.width=t,this.height=e},goog.math.Size.equals=function(t,e){return t==e||!(!t||!e)&&(t.width==e.width&&t.height==e.height)},goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)},goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}),goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)},goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)},goog.math.Size.prototype.area=function(){return this.width*this.height},goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)},goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height},goog.math.Size.prototype.isEmpty=function(){return!this.area()},goog.math.Size.prototype.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Size.prototype.fitsInside=function(t){return this.width<=t.width&&this.height<=t.height},goog.math.Size.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Size.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Size.prototype.scale=function(t,e){var o=goog.isNumber(e)?e:t;return this.width*=t,this.height*=o,this},goog.math.Size.prototype.scaleToFit=function(t){return t=this.aspectRatio()>t.aspectRatio()?t.width/this.width:t.height/this.height,this.scale(t)},goog.math.Rect=function(t,e,o,i){this.left=t,this.top=e,this.width=o,this.height=i},goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)},goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)},goog.math.Rect.createFromBox=function(t){return new goog.math.Rect(t.left,t.top,t.right-t.left,t.bottom-t.top)},goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"}),goog.math.Rect.equals=function(t,e){return t==e||!(!t||!e)&&(t.left==e.left&&t.width==e.width&&t.top==e.top&&t.height==e.height)},goog.math.Rect.prototype.intersection=function(t){var e=Math.max(this.left,t.left),o=Math.min(this.left+this.width,t.left+t.width);if(e<=o){var i=Math.max(this.top,t.top);if(t=Math.min(this.top+this.height,t.top+t.height),i<=t)return this.left=e,this.top=i,this.width=o-e,this.height=t-i,!0}return!1},goog.math.Rect.intersection=function(t,e){var o=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width);if(o<=i){var n=Math.max(t.top,e.top),r=Math.min(t.top+t.height,e.top+e.height);if(n<=r)return new goog.math.Rect(o,n,i-o,r-n)}return null},goog.math.Rect.intersects=function(t,e){return t.left<=e.left+e.width&&e.left<=t.left+t.width&&t.top<=e.top+e.height&&e.top<=t.top+t.height},goog.math.Rect.prototype.intersects=function(t){return goog.math.Rect.intersects(this,t)},goog.math.Rect.difference=function(t,e){if(!(o=goog.math.Rect.intersection(t,e))||!o.height||!o.width)return[t.clone()];var o=[],i=t.top,n=t.height,r=t.left+t.width,g=t.top+t.height,s=e.left+e.width,a=e.top+e.height;return e.top>t.top&&(o.push(new goog.math.Rect(t.left,t.top,t.width,e.top-t.top)),i=e.top,n-=e.top-t.top),a<g&&(o.push(new goog.math.Rect(t.left,a,t.width,g-a)),n=a-i),e.left>t.left&&o.push(new goog.math.Rect(t.left,i,e.left-t.left,n)),s<r&&o.push(new goog.math.Rect(s,i,r-s,n)),o},goog.math.Rect.prototype.difference=function(t){return goog.math.Rect.difference(this,t)},goog.math.Rect.prototype.boundingRect=function(t){var e=Math.max(this.left+this.width,t.left+t.width),o=Math.max(this.top+this.height,t.top+t.height);this.left=Math.min(this.left,t.left),this.top=Math.min(this.top,t.top),this.width=e-this.left,this.height=o-this.top},goog.math.Rect.boundingRect=function(t,e){if(!t||!e)return null;var o=t.clone();return o.boundingRect(e),o},goog.math.Rect.prototype.contains=function(t){return t instanceof goog.math.Rect?this.left<=t.left&&this.left+this.width>=t.left+t.width&&this.top<=t.top&&this.top+this.height>=t.top+t.height:t.x>=this.left&&t.x<=this.left+this.width&&t.y>=this.top&&t.y<=this.top+this.height},goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)},goog.math.Rect.prototype.ceil=function(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Rect.prototype.floor=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Rect.prototype.round=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Rect.prototype.translate=function(t,e){return t instanceof goog.math.Coordinate?(this.left+=t.x,this.top+=t.y):(this.left+=t,goog.isNumber(e)&&(this.top+=e)),this},goog.math.Rect.prototype.scale=function(t,e){var o=goog.isNumber(e)?e:t;return this.left*=t,this.width*=t,this.top*=o,this.height*=o,this},goog.dom={},goog.dom.vendor={},goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null},goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null},goog.dom.classes={},goog.dom.classes.set=function(t,e){t.className=e},goog.dom.classes.get=function(t){return t=t.className,goog.isString(t)&&t.match(/\S+/g)||[]},goog.dom.classes.add=function(t){var e=goog.dom.classes.get(t),o=goog.array.slice(arguments,1),i=e.length+o.length;return goog.dom.classes.add_(e,o),goog.dom.classes.set(t,e.join(" ")),e.length==i},goog.dom.classes.remove=function(t){var e=goog.dom.classes.get(t),o=goog.array.slice(arguments,1),i=goog.dom.classes.getDifference_(e,o);return goog.dom.classes.set(t,i.join(" ")),i.length==e.length-o.length},goog.dom.classes.add_=function(t,e){for(var o=0;o<e.length;o++)goog.array.contains(t,e[o])||t.push(e[o])},goog.dom.classes.getDifference_=function(t,e){return goog.array.filter(t,function(t){return!goog.array.contains(e,t)})},goog.dom.classes.swap=function(t,e,o){for(var i=goog.dom.classes.get(t),n=!1,r=0;r<i.length;r++)i[r]==e&&(goog.array.splice(i,r--,1),n=!0);return n&&(i.push(o),goog.dom.classes.set(t,i.join(" "))),n},goog.dom.classes.addRemove=function(t,e,o){var i=goog.dom.classes.get(t);goog.isString(e)?goog.array.remove(i,e):goog.isArray(e)&&(i=goog.dom.classes.getDifference_(i,e)),goog.isString(o)&&!goog.array.contains(i,o)?i.push(o):goog.isArray(o)&&goog.dom.classes.add_(i,o),goog.dom.classes.set(t,i.join(" "))},goog.dom.classes.has=function(t,e){return goog.array.contains(goog.dom.classes.get(t),e)},goog.dom.classes.enable=function(t,e,o){o?goog.dom.classes.add(t,e):goog.dom.classes.remove(t,e)},goog.dom.classes.toggle=function(t,e){var o=!goog.dom.classes.has(t,e);return goog.dom.classes.enable(t,e,o),o},goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDI:"BDI",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",COMMAND:"COMMAND",DATA:"DATA",DATALIST:"DATALIST",DD:"DD",DEL:"DEL",DETAILS:"DETAILS",DFN:"DFN",DIALOG:"DIALOG",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",EMBED:"EMBED",FIELDSET:"FIELDSET",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FONT:"FONT",FOOTER:"FOOTER",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEAD:"HEAD",HEADER:"HEADER",HGROUP:"HGROUP",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",KEYGEN:"KEYGEN",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MARK:"MARK",MATH:"MATH",MENU:"MENU",META:"META",METER:"METER",NAV:"NAV",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",OUTPUT:"OUTPUT",P:"P",PARAM:"PARAM",PRE:"PRE",PROGRESS:"PROGRESS",Q:"Q",RP:"RP",RT:"RT",RUBY:"RUBY",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SECTION:"SECTION",SELECT:"SELECT",SMALL:"SMALL",SOURCE:"SOURCE",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUMMARY:"SUMMARY",SUP:"SUP",SVG:"SVG",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TIME:"TIME",TITLE:"TITLE",TR:"TR",TRACK:"TRACK",TT:"TT",U:"U",UL:"UL",VAR:"VAR",VIDEO:"VIDEO",WBR:"WBR"},goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentMode(9)||goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersion("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE},goog.dom.ASSUME_QUIRKS_MODE=!1,goog.dom.ASSUME_STANDARDS_MODE=!1,goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE,goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.dom.getDomHelper=function(t){return t?new goog.dom.DomHelper(goog.dom.getOwnerDocument(t)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)},goog.dom.getDocument=function(){return document},goog.dom.getElement=function(t){return goog.isString(t)?document.getElementById(t):t},goog.dom.$=goog.dom.getElement,goog.dom.getElementsByTagNameAndClass=function(t,e,o){return goog.dom.getElementsByTagNameAndClass_(document,t,e,o)},goog.dom.getElementsByClass=function(t,e){var o=e||document;return goog.dom.canUseQuerySelector_(o)?o.querySelectorAll("."+t):o.getElementsByClassName?o.getElementsByClassName(t):goog.dom.getElementsByTagNameAndClass_(document,"*",t,e)},goog.dom.getElementByClass=function(t,e){var o=e||document;return(goog.dom.canUseQuerySelector_(o)?o.querySelector("."+t):goog.dom.getElementsByClass(t,e)[0])||null},goog.dom.canUseQuerySelector_=function(t){return!(!t.querySelectorAll||!t.querySelector)},goog.dom.getElementsByTagNameAndClass_=function(t,e,o,i){if(t=i||t,e=e&&"*"!=e?e.toUpperCase():"",goog.dom.canUseQuerySelector_(t)&&(e||o))return t.querySelectorAll(e+(o?"."+o:""));if(o&&t.getElementsByClassName){if(t=t.getElementsByClassName(o),e){i={};for(var n,r=0,g=0;n=t[g];g++)e==n.nodeName&&(i[r++]=n);return i.length=r,i}return t}if(t=t.getElementsByTagName(e||"*"),o){for(i={},g=r=0;n=t[g];g++)"function"==typeof(e=n.className).split&&goog.array.contains(e.split(/\s+/),o)&&(i[r++]=n);return i.length=r,i}return t},goog.dom.$$=goog.dom.getElementsByTagNameAndClass,goog.dom.setProperties=function(t,e){goog.object.forEach(e,function(e,o){"style"==o?t.style.cssText=e:"class"==o?t.className=e:"for"==o?t.htmlFor=e:o in goog.dom.DIRECT_ATTRIBUTE_MAP_?t.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[o],e):goog.string.startsWith(o,"aria-")||goog.string.startsWith(o,"data-")?t.setAttribute(o,e):t[o]=e})},goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},goog.dom.getViewportSize=function(t){return goog.dom.getViewportSize_(t||window)},goog.dom.getViewportSize_=function(t){return t=t.document,t=goog.dom.isCss1CompatMode_(t)?t.documentElement:t.body,new goog.math.Size(t.clientWidth,t.clientHeight)},goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)},goog.dom.getDocumentHeight_=function(t){var e=0;if(i=t.document){t=goog.dom.getViewportSize_(t).height;e=i.body;var o=i.documentElement;if(goog.dom.isCss1CompatMode_(i)&&o.scrollHeight)e=o.scrollHeight!=t?o.scrollHeight:o.offsetHeight;else{var i=o.scrollHeight,n=o.offsetHeight;o.clientHeight!=n&&(i=e.scrollHeight,n=e.offsetHeight),e=i>t?i>n?i:n:i<n?i:n}}return e},goog.dom.getPageScroll=function(t){return goog.dom.getDomHelper((t||goog.global||window).document).getDocumentScroll()},goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)},goog.dom.getDocumentScroll_=function(t){var e=goog.dom.getDocumentScrollElement_(t);return t=goog.dom.getWindow_(t),new goog.math.Coordinate(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)},goog.dom.getDocumentScrollElement_=function(t){return!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(t)?t.documentElement:t.body},goog.dom.getWindow=function(t){return t?goog.dom.getWindow_(t):window},goog.dom.getWindow_=function(t){
return t.parentWindow||t.defaultView},goog.dom.createDom=function(){return goog.dom.createDom_(document,arguments)},goog.dom.createDom_=function(t,e){var o=e[0],i=e[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&i&&(i.name||i.type)){if(o=["<",o],i.name&&o.push(' name="',goog.string.htmlEscape(i.name),'"'),i.type){o.push(' type="',goog.string.htmlEscape(i.type),'"');var n={};goog.object.extend(n,i),delete n.type,i=n}o.push(">"),o=o.join("")}return o=t.createElement(o),i&&(goog.isString(i)?o.className=i:goog.isArray(i)?goog.dom.classes.add.apply(null,[o].concat(i)):goog.dom.setProperties(o,i)),2<e.length&&goog.dom.append_(t,o,e,2),o},goog.dom.append_=function(t,e,o,i){function n(o){o&&e.appendChild(goog.isString(o)?t.createTextNode(o):o)}for(;i<o.length;i++){var r=o[i];goog.isArrayLike(r)&&!goog.dom.isNodeLike(r)?goog.array.forEach(goog.dom.isNodeList(r)?goog.array.toArray(r):r,n):n(r)}},goog.dom.$dom=goog.dom.createDom,goog.dom.createElement=function(t){return document.createElement(t)},goog.dom.createTextNode=function(t){return document.createTextNode(String(t))},goog.dom.createTable=function(t,e,o){return goog.dom.createTable_(document,t,e,!!o)},goog.dom.createTable_=function(t,e,o,i){for(var n=["<tr>"],r=0;r<o;r++)n.push(i?"<td>&nbsp;</td>":"<td></td>");for(n.push("</tr>"),n=n.join(""),o=["<table>"],r=0;r<e;r++)o.push(n);return o.push("</table>"),t=t.createElement(goog.dom.TagName.DIV),t.innerHTML=o.join(""),t.removeChild(t.firstChild)},goog.dom.htmlToDocumentFragment=function(t){return goog.dom.htmlToDocumentFragment_(document,t)},goog.dom.htmlToDocumentFragment_=function(t,e){var o=t.createElement("div");if(goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(o.innerHTML="<br>"+e,o.removeChild(o.firstChild)):o.innerHTML=e,1==o.childNodes.length)return o.removeChild(o.firstChild);for(var i=t.createDocumentFragment();o.firstChild;)i.appendChild(o.firstChild);return i},goog.dom.getCompatMode=function(){return goog.dom.isCss1CompatMode()?"CSS1Compat":"BackCompat"},goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)},goog.dom.isCss1CompatMode_=function(t){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==t.compatMode},goog.dom.canHaveChildren=function(t){if(t.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(t.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.COMMAND:case goog.dom.TagName.EMBED:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.KEYGEN:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.SOURCE:case goog.dom.TagName.STYLE:case goog.dom.TagName.TRACK:case goog.dom.TagName.WBR:return!1}return!0},goog.dom.appendChild=function(t,e){t.appendChild(e)},goog.dom.append=function(t){goog.dom.append_(goog.dom.getOwnerDocument(t),t,arguments,1)},goog.dom.removeChildren=function(t){for(var e;e=t.firstChild;)t.removeChild(e)},goog.dom.insertSiblingBefore=function(t,e){e.parentNode&&e.parentNode.insertBefore(t,e)},goog.dom.insertSiblingAfter=function(t,e){e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)},goog.dom.insertChildAt=function(t,e,o){t.insertBefore(e,t.childNodes[o]||null)},goog.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},goog.dom.replaceNode=function(t,e){var o=e.parentNode;o&&o.replaceChild(t,e)},goog.dom.flattenElement=function(t){var e,o=t.parentNode;if(o&&o.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(t.removeNode)return t.removeNode(!1);for(;e=t.firstChild;)o.insertBefore(e,t);return goog.dom.removeNode(t)}},goog.dom.getChildren=function(t){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=t.children?t.children:goog.array.filter(t.childNodes,function(t){return t.nodeType==goog.dom.NodeType.ELEMENT})},goog.dom.getFirstElementChild=function(t){return void 0!=t.firstElementChild?t.firstElementChild:goog.dom.getNextElementNode_(t.firstChild,!0)},goog.dom.getLastElementChild=function(t){return void 0!=t.lastElementChild?t.lastElementChild:goog.dom.getNextElementNode_(t.lastChild,!1)},goog.dom.getNextElementSibling=function(t){return void 0!=t.nextElementSibling?t.nextElementSibling:goog.dom.getNextElementNode_(t.nextSibling,!0)},goog.dom.getPreviousElementSibling=function(t){return void 0!=t.previousElementSibling?t.previousElementSibling:goog.dom.getNextElementNode_(t.previousSibling,!1)},goog.dom.getNextElementNode_=function(t,e){for(;t&&t.nodeType!=goog.dom.NodeType.ELEMENT;)t=e?t.nextSibling:t.previousSibling;return t},goog.dom.getNextNode=function(t){if(!t)return null;if(t.firstChild)return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null},goog.dom.getPreviousNode=function(t){if(!t)return null;if(!t.previousSibling)return t.parentNode;for(t=t.previousSibling;t&&t.lastChild;)t=t.lastChild;return t},goog.dom.isNodeLike=function(t){return goog.isObject(t)&&0<t.nodeType},goog.dom.isElement=function(t){return goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT},goog.dom.isWindow=function(t){return goog.isObject(t)&&t.window==t},goog.dom.getParentElement=function(t){return goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY?t.parentElement:(t=t.parentNode,goog.dom.isElement(t)?t:null)},goog.dom.contains=function(t,e){if(t.contains&&e.nodeType==goog.dom.NodeType.ELEMENT)return t==e||t.contains(e);if("undefined"!=typeof t.compareDocumentPosition)return t==e||Boolean(16&t.compareDocumentPosition(e));for(;e&&t!=e;)e=e.parentNode;return e==t},goog.dom.compareNodeOrder=function(t,e){if(t==e)return 0;if(t.compareDocumentPosition)return 2&t.compareDocumentPosition(e)?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentMode(9)){if(t.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(e.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in t||t.parentNode&&"sourceIndex"in t.parentNode){var o=t.nodeType==goog.dom.NodeType.ELEMENT,i=e.nodeType==goog.dom.NodeType.ELEMENT;if(o&&i)return t.sourceIndex-e.sourceIndex;var n=t.parentNode,r=e.parentNode;return n==r?goog.dom.compareSiblingOrder_(t,e):!o&&goog.dom.contains(n,e)?-1*goog.dom.compareParentsDescendantNodeIe_(t,e):!i&&goog.dom.contains(r,t)?goog.dom.compareParentsDescendantNodeIe_(e,t):(o?t.sourceIndex:n.sourceIndex)-(i?e.sourceIndex:r.sourceIndex)}return i=goog.dom.getOwnerDocument(t),(o=i.createRange()).selectNode(t),o.collapse(!0),(i=i.createRange()).selectNode(e),i.collapse(!0),o.compareBoundaryPoints(goog.global.Range.START_TO_END,i)},goog.dom.compareParentsDescendantNodeIe_=function(t,e){var o=t.parentNode;if(o==e)return-1;for(var i=e;i.parentNode!=o;)i=i.parentNode;return goog.dom.compareSiblingOrder_(i,t)},goog.dom.compareSiblingOrder_=function(t,e){for(var o=e;o=o.previousSibling;)if(o==t)return-1;return 1},goog.dom.findCommonAncestor=function(){var t,e=arguments.length;if(!e)return null;if(1==e)return arguments[0];var o=[],i=Infinity;for(t=0;t<e;t++){for(var n=[],r=arguments[t];r;)n.unshift(r),r=r.parentNode;o.push(n),i=Math.min(i,n.length)}for(n=null,t=0;t<i;t++){r=o[0][t];for(var g=1;g<e;g++)if(r!=o[g][t])return n;n=r}return n},goog.dom.getOwnerDocument=function(t){return t.nodeType==goog.dom.NodeType.DOCUMENT?t:t.ownerDocument||t.document},goog.dom.getFrameContentDocument=function(t){return t.contentDocument||t.contentWindow.document},goog.dom.getFrameContentWindow=function(t){return t.contentWindow||goog.dom.getWindow_(goog.dom.getFrameContentDocument(t))},goog.dom.setTextContent=function(t,e){if("textContent"in t)t.textContent=e;else if(t.firstChild&&t.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;t.lastChild!=t.firstChild;)t.removeChild(t.lastChild);t.firstChild.data=e}else{goog.dom.removeChildren(t);var o=goog.dom.getOwnerDocument(t);t.appendChild(o.createTextNode(String(e)))}},goog.dom.getOuterHtml=function(t){if("outerHTML"in t)return t.outerHTML;var e=goog.dom.getOwnerDocument(t).createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML},goog.dom.findNode=function(t,e){var o=[];return goog.dom.findNodes_(t,e,o,!0)?o[0]:void 0},goog.dom.findNodes=function(t,e){var o=[];return goog.dom.findNodes_(t,e,o,!1),o},goog.dom.findNodes_=function(t,e,o,i){if(null!=t)for(t=t.firstChild;t;){if(e(t)&&(o.push(t),i)||goog.dom.findNodes_(t,e,o,i))return!0;t=t.nextSibling}return!1},goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"},goog.dom.isFocusableTabIndex=function(t){var e=t.getAttributeNode("tabindex");return!(!e||!e.specified)&&(t=t.tabIndex,goog.isNumber(t)&&0<=t&&32768>t)},goog.dom.setFocusableTabIndex=function(t,e){e?t.tabIndex=0:(t.tabIndex=-1,t.removeAttribute("tabIndex"))},goog.dom.getTextContent=function(t){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in t)t=goog.string.canonicalizeNewlines(t.innerText);else{var e=[];goog.dom.getTextContent_(t,e,!0),t=e.join("")}return t=t.replace(/ \xAD /g," ").replace(/\xAD/g,""),t=t.replace(/\u200B/g,""),goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(t=t.replace(/ +/g," "))," "!=t&&(t=t.replace(/^\s*/,"")),t},goog.dom.getRawTextContent=function(t){var e=[];return goog.dom.getTextContent_(t,e,!1),e.join("")},goog.dom.getTextContent_=function(t,e,o){if(!(t.nodeName in goog.dom.TAGS_TO_IGNORE_))if(t.nodeType==goog.dom.NodeType.TEXT)o?e.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):e.push(t.nodeValue);else if(t.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)e.push(goog.dom.PREDEFINED_TAG_VALUES_[t.nodeName]);else for(t=t.firstChild;t;)goog.dom.getTextContent_(t,e,o),t=t.nextSibling},goog.dom.getNodeTextLength=function(t){return goog.dom.getTextContent(t).length},goog.dom.getNodeTextOffset=function(t,e){for(var o=e||goog.dom.getOwnerDocument(t).body,i=[];t&&t!=o;){for(var n=t;n=n.previousSibling;)i.unshift(goog.dom.getTextContent(n));t=t.parentNode}return goog.string.trimLeft(i.join("")).replace(/ +/g," ").length},goog.dom.getNodeAtOffset=function(t,e,o){t=[t];for(var i=0,n=null;0<t.length&&i<e;)if(!((n=t.pop()).nodeName in goog.dom.TAGS_TO_IGNORE_))if(n.nodeType==goog.dom.NodeType.TEXT){var r=n.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");i=i+r.length}else if(n.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)i+=goog.dom.PREDEFINED_TAG_VALUES_[n.nodeName].length;else for(r=n.childNodes.length-1;0<=r;r--)t.push(n.childNodes[r]);return goog.isObject(o)&&(o.remainder=n?n.nodeValue.length+e-i-1:0,o.node=n),n},goog.dom.isNodeList=function(t){if(t&&"number"==typeof t.length){if(goog.isObject(t))return"function"==typeof t.item||"string"==typeof t.item;if(goog.isFunction(t))return"function"==typeof t.item}return!1},goog.dom.getAncestorByTagNameAndClass=function(t,e,o){if(!e&&!o)return null;var i=e?e.toUpperCase():null;return goog.dom.getAncestor(t,function(t){return(!i||t.nodeName==i)&&(!o||goog.dom.classes.has(t,o))},!0)},goog.dom.getAncestorByClass=function(t,e){return goog.dom.getAncestorByTagNameAndClass(t,null,e)},goog.dom.getAncestor=function(t,e,o,i){o||(t=t.parentNode),o=null==i;for(var n=0;t&&(o||n<=i);){if(e(t))return t;t=t.parentNode,n++}return null},goog.dom.getActiveElement=function(t){try{return t&&t.activeElement}catch(e){}return null},goog.dom.DomHelper=function(t){this.document_=t||goog.global.document||document},goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper,goog.dom.DomHelper.prototype.setDocument=function(t){this.document_=t},goog.dom.DomHelper.prototype.getDocument=function(){return this.document_},goog.dom.DomHelper.prototype.getElement=function(t){return goog.isString(t)?this.document_.getElementById(t):t},goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement,goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(t,e,o){return goog.dom.getElementsByTagNameAndClass_(this.document_,t,e,o)},goog.dom.DomHelper.prototype.getElementsByClass=function(t,e){return goog.dom.getElementsByClass(t,e||this.document_)},goog.dom.DomHelper.prototype.getElementByClass=function(t,e){return goog.dom.getElementByClass(t,e||this.document_)},goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass,goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties,goog.dom.DomHelper.prototype.getViewportSize=function(t){return goog.dom.getViewportSize(t||this.getWindow())},goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())},goog.dom.DomHelper.prototype.createDom=function(){return goog.dom.createDom_(this.document_,arguments)},goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom,goog.dom.DomHelper.prototype.createElement=function(t){return this.document_.createElement(t)},goog.dom.DomHelper.prototype.createTextNode=function(t){return this.document_.createTextNode(String(t))},goog.dom.DomHelper.prototype.createTable=function(t,e,o){return goog.dom.createTable_(this.document_,t,e,!!o)},goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(t){return goog.dom.htmlToDocumentFragment_(this.document_,t)},goog.dom.DomHelper.prototype.getCompatMode=function(){return this.isCss1CompatMode()?"CSS1Compat":"BackCompat"},goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)},goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)},goog.dom.DomHelper.prototype.getActiveElement=function(t){return goog.dom.getActiveElement(t||this.document_)},goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild,goog.dom.DomHelper.prototype.append=goog.dom.append,goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren,goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren,goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore,goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter,goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt,goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode,goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode,goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement,goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren,goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild,goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild,goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling,goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling,goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode,goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode,goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike,goog.dom.DomHelper.prototype.isElement=goog.dom.isElement,goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow,goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement,goog.dom.DomHelper.prototype.contains=goog.dom.contains,goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder,goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor,goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument,goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument,goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow,goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent,goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml,goog.dom.DomHelper.prototype.findNode=goog.dom.findNode,goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes,goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex,goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex,goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent,goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength,goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset,goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset,goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList,goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass,goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass,goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor,goog.style={},goog.style.setStyle=function(t,e,o){goog.isString(e)?goog.style.setStyle_(t,o,e):goog.object.forEach(e,goog.partial(goog.style.setStyle_,t))},goog.style.setStyle_=function(t,e,o){(o=goog.style.getVendorJsStyleName_(t,o))&&(t.style[o]=e)},goog.style.getVendorJsStyleName_=function(t,e){var o=goog.string.toCamelCase(e);if(void 0===t.style[o]){var i=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(e);if(void 0!==t.style[i])return i}return o},goog.style.getVendorStyleName_=function(t,e){var o=goog.string.toCamelCase(e);return void 0===t.style[o]&&(o=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(e),void 0!==t.style[o])?goog.dom.vendor.getVendorPrefix()+"-"+e:e},goog.style.getStyle=function(t,e){var o=t.style[goog.string.toCamelCase(e)];return void 0!==o?o:t.style[goog.style.getVendorJsStyleName_(t,e)]||""},goog.style.getComputedStyle=function(t,e){var o=goog.dom.getOwnerDocument(t);return o.defaultView&&o.defaultView.getComputedStyle&&(o=o.defaultView.getComputedStyle(t,null))?o[e]||o.getPropertyValue(e)||"":""},goog.style.getCascadedStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:null},goog.style.getStyle_=function(t,e){return goog.style.getComputedStyle(t,e)||goog.style.getCascadedStyle(t,e)||t.style&&t.style[e]},goog.style.getComputedPosition=function(t){return goog.style.getStyle_(t,"position")},goog.style.getBackgroundColor=function(t){return goog.style.getStyle_(t,"backgroundColor")},goog.style.getComputedOverflowX=function(t){return goog.style.getStyle_(t,"overflowX")},goog.style.getComputedOverflowY=function(t){return goog.style.getStyle_(t,"overflowY")},goog.style.getComputedZIndex=function(t){return goog.style.getStyle_(t,"zIndex")},goog.style.getComputedTextAlign=function(t){return goog.style.getStyle_(t,"textAlign")},goog.style.getComputedCursor=function(t){return goog.style.getStyle_(t,"cursor")},goog.style.setPosition=function(t,e,o){var i,n=goog.userAgent.GECKO&&(goog.userAgent.MAC||goog.userAgent.X11)&&goog.userAgent.isVersion("1.9");e instanceof goog.math.Coordinate?(i=e.x,e=e.y):(i=e,e=o),t.style.left=goog.style.getPixelStyleValue_(i,n),t.style.top=goog.style.getPixelStyleValue_(e,n)},goog.style.getPosition=function(t){return new goog.math.Coordinate(t.offsetLeft,t.offsetTop)},goog.style.getClientViewportElement=function(t){return t=t?goog.dom.getOwnerDocument(t):goog.dom.getDocument(),!goog.userAgent.IE||goog.userAgent.isDocumentMode(9)||goog.dom.getDomHelper(t).isCss1CompatMode()?t.documentElement:t.body},goog.style.getViewportPageOffset=function(t){var e=t.body;return t=t.documentElement,new goog.math.Coordinate(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},goog.style.getBoundingClientRect_=function(t){var e=t.getBoundingClientRect();return goog.userAgent.IE&&(t=t.ownerDocument,e.left-=t.documentElement.clientLeft+t.body.clientLeft,e.top-=t.documentElement.clientTop+t.body.clientTop),e},goog.style.getOffsetParent=function(t){if(goog.userAgent.IE&&!goog.userAgent.isDocumentMode(8))return t.offsetParent;var e=goog.dom.getOwnerDocument(t),o=goog.style.getStyle_(t,"position"),i="fixed"==o||"absolute"==o;for(t=t.parentNode;t&&t!=e;t=t.parentNode)if(o=goog.style.getStyle_(t,"position"),!(i=i&&"static"==o&&t!=e.documentElement&&t!=e.body)&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight||"fixed"==o||"absolute"==o||"relative"==o))return t;return null},goog.style.getVisibleRectForElement=function(t){for(var e=new goog.math.Box(0,Infinity,Infinity,0),o=goog.dom.getDomHelper(t),i=o.getDocument().body,n=o.getDocument().documentElement,r=o.getDocumentScrollElement();t=goog.style.getOffsetParent(t);)if(!(goog.userAgent.IE&&0==t.clientWidth||goog.userAgent.WEBKIT&&0==t.clientHeight&&t==i||t==i||t==n||"visible"==goog.style.getStyle_(t,"overflow"))){var g=goog.style.getPageOffset(t),s=goog.style.getClientLeftTop(t);g.x+=s.x,g.y+=s.y,e.top=Math.max(e.top,g.y),e.right=Math.min(e.right,g.x+t.clientWidth),e.bottom=Math.min(e.bottom,g.y+t.clientHeight),e.left=Math.max(e.left,g.x)}return i=r.scrollLeft,r=r.scrollTop,e.left=Math.max(e.left,i),e.top=Math.max(e.top,r),o=o.getViewportSize(),e.right=Math.min(e.right,i+o.width),e.bottom=Math.min(e.bottom,r+o.height),0<=e.top&&0<=e.left&&e.bottom>e.top&&e.right>e.left?e:null},goog.style.getContainerOffsetToScrollInto=function(t,e,o){var i=goog.style.getPageOffset(t),n=goog.style.getPageOffset(e),r=goog.style.getBorderBox(e),g=i.x-n.x-r.left;i=i.y-n.y-r.top,n=e.clientWidth-t.offsetWidth;return t=e.clientHeight-t.offsetHeight,r=e.scrollLeft,e=e.scrollTop,o?(r+=g-n/2,e+=i-t/2):(r+=Math.min(g,Math.max(g-n,0)),e+=Math.min(i,Math.max(i-t,0))),new goog.math.Coordinate(r,e)},goog.style.scrollIntoContainerView=function(t,e,o){t=goog.style.getContainerOffsetToScrollInto(t,e,o),e.scrollLeft=t.x,e.scrollTop=t.y},goog.style.getClientLeftTop=function(t){if(goog.userAgent.GECKO&&!goog.userAgent.isVersion("1.9")){var e=parseFloat(goog.style.getComputedStyle(t,"borderLeftWidth"));if(goog.style.isRightToLeft(t)){var o=t.offsetWidth-t.clientWidth-e-parseFloat(goog.style.getComputedStyle(t,"borderRightWidth"));e=e+o}return new goog.math.Coordinate(e,parseFloat(goog.style.getComputedStyle(t,"borderTopWidth")))}return new goog.math.Coordinate(t.clientLeft,t.clientTop)},goog.style.getPageOffset=function(t){var e,o=goog.dom.getOwnerDocument(t),i=goog.style.getStyle_(t,"position");goog.asserts.assertObject(t,"Parameter is required");var n=goog.userAgent.GECKO&&o.getBoxObjectFor&&!t.getBoundingClientRect&&"absolute"==i&&(e=o.getBoxObjectFor(t))&&(0>e.screenX||0>e.screenY),r=new goog.math.Coordinate(0,0),g=goog.style.getClientViewportElement(o);if(t==g)return r;if(t.getBoundingClientRect)e=goog.style.getBoundingClientRect_(t),t=goog.dom.getDomHelper(o).getDocumentScroll(),r.x=e.left+t.x,r.y=e.top+t.y;else if(o.getBoxObjectFor&&!n)e=o.getBoxObjectFor(t),t=o.getBoxObjectFor(g),r.x=e.screenX-t.screenX,r.y=e.screenY-t.screenY;else{e=t;do{if(r.x+=e.offsetLeft,r.y+=e.offsetTop,e!=t&&(r.x+=e.clientLeft||0,r.y+=e.clientTop||0),goog.userAgent.WEBKIT&&"fixed"==goog.style.getComputedPosition(e)){r.x+=o.body.scrollLeft,r.y+=o.body.scrollTop;break}e=e.offsetParent}while(e&&e!=t);for((goog.userAgent.OPERA||goog.userAgent.WEBKIT&&"absolute"==i)&&(r.y-=o.body.offsetTop),e=t;(e=goog.style.getOffsetParent(e))&&e!=o.body&&e!=g;)r.x-=e.scrollLeft,goog.userAgent.OPERA&&"TR"==e.tagName||(r.y-=e.scrollTop)}return r},goog.style.getPageOffsetLeft=function(t){return goog.style.getPageOffset(t).x},goog.style.getPageOffsetTop=function(t){return goog.style.getPageOffset(t).y},goog.style.getFramedPageOffset=function(t,e){var o=new goog.math.Coordinate(0,0),i=goog.dom.getWindow(goog.dom.getOwnerDocument(t)),n=t;do{var r=i==e?goog.style.getPageOffset(n):goog.style.getClientPosition(n);o.x+=r.x,o.y+=r.y}while(i&&i!=e&&(n=i.frameElement)&&(i=i.parent));return o},goog.style.translateRectForAnotherFrame=function(t,e,o){if(e.getDocument()!=o.getDocument()){var i=e.getDocument().body;o=goog.style.getFramedPageOffset(i,o.getWindow()),o=goog.math.Coordinate.difference(o,goog.style.getPageOffset(i)),goog.userAgent.IE&&!e.isCss1CompatMode()&&(o=goog.math.Coordinate.difference(o,e.getDocumentScroll())),t.left+=o.x,t.top+=o.y}},goog.style.getRelativePosition=function(t,e){var o=goog.style.getClientPosition(t),i=goog.style.getClientPosition(e);return new goog.math.Coordinate(o.x-i.x,o.y-i.y)},goog.style.getClientPosition=function(t){var e=new goog.math.Coordinate;if(t.nodeType==goog.dom.NodeType.ELEMENT){if(t.getBoundingClientRect){var o=goog.style.getBoundingClientRect_(t);e.x=o.left,e.y=o.top}else{o=goog.dom.getDomHelper(t).getDocumentScroll();var i=goog.style.getPageOffset(t);e.x=i.x-o.x,e.y=i.y-o.y}goog.userAgent.GECKO&&!goog.userAgent.isVersion(12)&&(e=goog.math.Coordinate.sum(e,goog.style.getCssTranslation(t)))}else o=goog.isFunction(t.getBrowserEvent),i=t,t.targetTouches?i=t.targetTouches[0]:o&&t.getBrowserEvent().targetTouches&&(i=t.getBrowserEvent().targetTouches[0]),e.x=i.clientX,e.y=i.clientY;return e},goog.style.setPageOffset=function(t,e,o){var i=goog.style.getPageOffset(t);e instanceof goog.math.Coordinate&&(o=e.y,e=e.x),goog.style.setPosition(t,t.offsetLeft+(e-i.x),t.offsetTop+(o-i.y))},goog.style.setSize=function(t,e,o){if(e instanceof goog.math.Size)o=e.height,e=e.width;else if(void 0==o)throw Error("missing height argument");goog.style.setWidth(t,e),goog.style.setHeight(t,o)},goog.style.getPixelStyleValue_=function(t,e){return"number"==typeof t&&(t=(e?Math.round(t):t)+"px"),t},goog.style.setHeight=function(t,e){t.style.height=goog.style.getPixelStyleValue_(e,!0)},goog.style.setWidth=function(t,e){t.style.width=goog.style.getPixelStyleValue_(e,!0)},goog.style.getSize=function(t){if("none"!=goog.style.getStyle_(t,"display"))return goog.style.getSizeWithDisplay_(t);var e=t.style,o=e.display,i=e.visibility,n=e.position;return e.visibility="hidden",e.position="absolute",e.display="inline",t=goog.style.getSizeWithDisplay_(t),e.display=o,e.position=n,e.visibility=i,t},goog.style.getSizeWithDisplay_=function(t){var e=t.offsetWidth,o=t.offsetHeight,i=goog.userAgent.WEBKIT&&!e&&!o;return goog.isDef(e)&&!i||!t.getBoundingClientRect?new goog.math.Size(e,o):(t=goog.style.getBoundingClientRect_(t),new goog.math.Size(t.right-t.left,t.bottom-t.top))},goog.style.getBounds=function(t){var e=goog.style.getPageOffset(t);return t=goog.style.getSize(t),new goog.math.Rect(e.x,e.y,t.width,t.height)},goog.style.toCamelCase=function(t){return goog.string.toCamelCase(String(t))},goog.style.toSelectorCase=function(t){return goog.string.toSelectorCase(t)},goog.style.getOpacity=function(t){var e=t.style;return t="","opacity"in e?t=e.opacity:"MozOpacity"in e?t=e.MozOpacity:"filter"in e&&(e=e.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(t=String(e[1]/100)),""==t?t:Number(t)},goog.style.setOpacity=function(t,e){var o=t.style;"opacity"in o?o.opacity=e:"MozOpacity"in o?o.MozOpacity=e:"filter"in o&&(o.filter=""===e?"":"alpha(opacity="+100*e+")")},goog.style.setTransparentBackgroundImage=function(t,e){var o=t.style;goog.userAgent.IE&&!goog.userAgent.isVersion("8")?o.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+e+'", sizingMethod="crop")':(o.backgroundImage="url("+e+")",o.backgroundPosition="top left",o.backgroundRepeat="no-repeat")},goog.style.clearTransparentBackgroundImage=function(t){"filter"in(t=t.style)?t.filter="":t.backgroundImage="none"},goog.style.showElement=function(t,e){t.style.display=e?"":"none"},goog.style.isElementShown=function(t){return"none"!=t.style.display},goog.style.installStyles=function(t,e){var o=goog.dom.getDomHelper(e),i=null;if(goog.userAgent.IE)i=o.getDocument().createStyleSheet(),goog.style.setStyles(i,t);else{var n=o.getElementsByTagNameAndClass("head")[0];n||(i=o.getElementsByTagNameAndClass("body")[0],n=o.createDom("head"),i.parentNode.insertBefore(n,i)),i=o.createDom("style"),goog.style.setStyles(i,t),o.appendChild(n,i)}return i},goog.style.uninstallStyles=function(t){goog.dom.removeNode(t.ownerNode||t.owningElement||t)},goog.style.setStyles=function(t,e){goog.userAgent.IE?t.cssText=e:t.innerHTML=e},goog.style.setPreWrap=function(t){t=t.style,goog.userAgent.IE&&!goog.userAgent.isVersion("8")?(t.whiteSpace="pre",t.wordWrap="break-word"):t.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"},goog.style.setInlineBlock=function(t){(t=t.style).position="relative",goog.userAgent.IE&&!goog.userAgent.isVersion("8")?(t.zoom="1",t.display="inline"):t.display=goog.userAgent.GECKO?goog.userAgent.isVersion("1.9a")?"inline-block":"-moz-inline-box":"inline-block"},goog.style.isRightToLeft=function(t){return"rtl"==goog.style.getStyle_(t,"direction")},goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null,goog.style.isUnselectable=function(t){return goog.style.unselectableStyle_?"none"==t.style[goog.style.unselectableStyle_].toLowerCase():!(!goog.userAgent.IE&&!goog.userAgent.OPERA)&&"on"==t.getAttribute("unselectable")},goog.style.setUnselectable=function(t,e,o){o=o?null:t.getElementsByTagName("*");var i=goog.style.unselectableStyle_;if(i){if(e=e?"none":"",t.style[i]=e,o){t=0;for(var n;n=o[t];t++)n.style[i]=e}}else if((goog.userAgent.IE||goog.userAgent.OPERA)&&(e=e?"on":"",t.setAttribute("unselectable",e),o))for(t=0;n=o[t];t++)n.setAttribute("unselectable",e)},goog.style.getBorderBoxSize=function(t){return new goog.math.Size(t.offsetWidth,t.offsetHeight)},goog.style.setBorderBoxSize=function(t,e){var o=goog.dom.getOwnerDocument(t),i=goog.dom.getDomHelper(o).isCss1CompatMode();if(!goog.userAgent.IE||i&&goog.userAgent.isVersion("8"))goog.style.setBoxSizingSize_(t,e,"border-box");else if(o=t.style,i){i=goog.style.getPaddingBox(t);var n=goog.style.getBorderBox(t);o.pixelWidth=e.width-n.left-i.left-i.right-n.right,o.pixelHeight=e.height-n.top-i.top-i.bottom-n.bottom}else o.pixelWidth=e.width,o.pixelHeight=e.height},goog.style.getContentBoxSize=function(t){var e=goog.dom.getOwnerDocument(t),o=goog.userAgent.IE&&t.currentStyle;return o&&goog.dom.getDomHelper(e).isCss1CompatMode()&&"auto"!=o.width&&"auto"!=o.height&&!o.boxSizing?(e=goog.style.getIePixelValue_(t,o.width,"width","pixelWidth"),t=goog.style.getIePixelValue_(t,o.height,"height","pixelHeight"),new goog.math.Size(e,t)):(o=goog.style.getBorderBoxSize(t),e=goog.style.getPaddingBox(t),t=goog.style.getBorderBox(t),new goog.math.Size(o.width-t.left-e.left-e.right-t.right,o.height-t.top-e.top-e.bottom-t.bottom))},goog.style.setContentBoxSize=function(t,e){var o=goog.dom.getOwnerDocument(t),i=goog.dom.getDomHelper(o).isCss1CompatMode();if(!goog.userAgent.IE||i&&goog.userAgent.isVersion("8"))goog.style.setBoxSizingSize_(t,e,"content-box");else if(o=t.style,i)o.pixelWidth=e.width,o.pixelHeight=e.height;else{i=goog.style.getPaddingBox(t);var n=goog.style.getBorderBox(t);o.pixelWidth=e.width+n.left+i.left+i.right+n.right,o.pixelHeight=e.height+n.top+i.top+i.bottom+n.bottom}},goog.style.setBoxSizingSize_=function(t,e,o){t=t.style,goog.userAgent.GECKO?t.MozBoxSizing=o:goog.userAgent.WEBKIT?t.WebkitBoxSizing=o:t.boxSizing=o,t.width=Math.max(e.width,0)+"px",t.height=Math.max(e.height,0)+"px"},goog.style.getIePixelValue_=function(t,e,o,i){if(/^\d+px?$/.test(e))return parseInt(e,10);var n=t.style[o],r=t.runtimeStyle[o];return t.runtimeStyle[o]=t.currentStyle[o],t.style[o]=e,e=t.style[i],t.style[o]=n,t.runtimeStyle[o]=r,e},goog.style.getIePixelDistance_=function(t,e){var o=goog.style.getCascadedStyle(t,e);return o?goog.style.getIePixelValue_(t,o,"left","pixelLeft"):0},goog.style.getBox_=function(t,e){if(goog.userAgent.IE){var o=goog.style.getIePixelDistance_(t,e+"Left"),i=goog.style.getIePixelDistance_(t,e+"Right"),n=goog.style.getIePixelDistance_(t,e+"Top"),r=goog.style.getIePixelDistance_(t,e+"Bottom");return new goog.math.Box(n,i,r,o)}return o=goog.style.getComputedStyle(t,e+"Left"),i=goog.style.getComputedStyle(t,e+"Right"),n=goog.style.getComputedStyle(t,e+"Top"),r=goog.style.getComputedStyle(t,e+"Bottom"),new goog.math.Box(parseFloat(n),parseFloat(i),parseFloat(r),parseFloat(o))},goog.style.getPaddingBox=function(t){return goog.style.getBox_(t,"padding")},goog.style.getMarginBox=function(t){return goog.style.getBox_(t,"margin")},goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6},goog.style.getIePixelBorder_=function(t,e){if("none"==goog.style.getCascadedStyle(t,e+"Style"))return 0;var o=goog.style.getCascadedStyle(t,e+"Width");return o in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[o]:goog.style.getIePixelValue_(t,o,"left","pixelLeft")},goog.style.getBorderBox=function(t){if(goog.userAgent.IE){var e=goog.style.getIePixelBorder_(t,"borderLeft"),o=goog.style.getIePixelBorder_(t,"borderRight"),i=goog.style.getIePixelBorder_(t,"borderTop");return t=goog.style.getIePixelBorder_(t,"borderBottom"),new goog.math.Box(i,o,t,e)}return e=goog.style.getComputedStyle(t,"borderLeftWidth"),o=goog.style.getComputedStyle(t,"borderRightWidth"),
i=goog.style.getComputedStyle(t,"borderTopWidth"),t=goog.style.getComputedStyle(t,"borderBottomWidth"),new goog.math.Box(parseFloat(i),parseFloat(o),parseFloat(t),parseFloat(e))},goog.style.getFontFamily=function(t){var e=goog.dom.getOwnerDocument(t),o="";if(e.body.createTextRange){(e=e.body.createTextRange()).moveToElementText(t);try{o=e.queryCommandValue("FontName")}catch(i){o=""}}return o||(o=goog.style.getStyle_(t,"fontFamily")),1<(t=o.split(",")).length&&(o=t[0]),goog.string.stripQuotes(o,"\"'")},goog.style.lengthUnitRegex_=/[^\d]+$/,goog.style.getLengthUnits=function(t){return(t=t.match(goog.style.lengthUnitRegex_))&&t[0]||null},goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1},goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1},goog.style.getFontSize=function(t){var e=goog.style.getStyle_(t,"fontSize"),o=goog.style.getLengthUnits(e);if(e&&"px"==o)return parseInt(e,10);if(goog.userAgent.IE){if(o in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(t,e,"left","pixelLeft");if(t.parentNode&&t.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&o in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return t=t.parentNode,o=goog.style.getStyle_(t,"fontSize"),goog.style.getIePixelValue_(t,e==o?"1em":e,"left","pixelLeft")}return o=goog.dom.createDom("span",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"}),goog.dom.appendChild(t,o),e=o.offsetHeight,goog.dom.removeNode(o),e},goog.style.parseStyleAttribute=function(t){var e={};return goog.array.forEach(t.split(/\s*;\s*/),function(t){2==(t=t.split(/\s*:\s*/)).length&&(e[goog.string.toCamelCase(t[0].toLowerCase())]=t[1])}),e},goog.style.toStyleAttribute=function(t){var e=[];return goog.object.forEach(t,function(t,o){e.push(goog.string.toSelectorCase(o),":",t,";")}),e.join("")},goog.style.setFloat=function(t,e){t.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=e},goog.style.getFloat=function(t){return t.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""},goog.style.getScrollbarWidth=function(t){var e=goog.dom.createElement("div");return t&&(e.className=t),e.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px",t=goog.dom.createElement("div"),goog.style.setSize(t,"200px","200px"),e.appendChild(t),goog.dom.appendChild(goog.dom.getDocument().body,e),t=e.offsetWidth-e.clientWidth,goog.dom.removeNode(e),t},goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/,goog.style.getCssTranslation=function(t){var e;goog.userAgent.IE?e="-ms-transform":goog.userAgent.WEBKIT?e="-webkit-transform":goog.userAgent.OPERA?e="-o-transform":goog.userAgent.GECKO&&(e="-moz-transform");var o;return e&&(o=goog.style.getStyle_(t,e)),o||(o=goog.style.getStyle_(t,"transform")),o&&(t=o.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(t[1]),parseFloat(t[2])):new goog.math.Coordinate(0,0)},goog.debug.errorHandlerWeakDep={protectEntryPoint:function(t){return t}},goog.disposable={},goog.disposable.IDisposable=function(){},goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(this.creationStack=Error().stack,goog.Disposable.instances_[goog.getUid(this)]=this)},goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},goog.Disposable.MONITORING_MODE=0,goog.Disposable.instances_={},goog.Disposable.getUndisposedObjects=function(){var t,e=[];for(t in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(t)&&e.push(goog.Disposable.instances_[Number(t)]);return e},goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}},goog.Disposable.prototype.disposed_=!1,goog.Disposable.prototype.isDisposed=function(){return this.disposed_},goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed,goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var t=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(t))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[t]}},goog.Disposable.prototype.registerDisposable=function(t){this.addOnDisposeCallback(goog.partial(goog.dispose,t))},goog.Disposable.prototype.addOnDisposeCallback=function(t,e){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(goog.bind(t,e))},goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},goog.Disposable.isDisposed=function(t){return!(!t||"function"!=typeof t.isDisposed)&&t.isDisposed()},goog.dispose=function(t){t&&"function"==typeof t.dispose&&t.dispose()},goog.disposeAll=function(){for(var t=0,e=arguments.length;t<e;++t){var o=arguments[t];goog.isArrayLike(o)?goog.disposeAll.apply(null,o):goog.dispose(o)}},goog.events={},goog.events.Event=function(t,e){this.type=t,this.currentTarget=this.target=e},goog.events.Event.prototype.disposeInternal=function(){},goog.events.Event.prototype.dispose=function(){},goog.events.Event.prototype.propagationStopped_=!1,goog.events.Event.prototype.defaultPrevented=!1,goog.events.Event.prototype.returnValue_=!0,goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0},goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0,this.returnValue_=!1},goog.events.Event.stopPropagation=function(t){t.stopPropagation()},goog.events.Event.preventDefault=function(t){t.preventDefault()},goog.events.Listenable=function(){},goog.events.Listenable.USE_LISTENABLE_INTERFACE=!1,goog.events.Listenable.IMPLEMENTED_BY_PROP_="__closure_listenable",goog.events.Listenable.addImplementation=function(t){t.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP_]=!0},goog.events.Listenable.isImplementedBy=function(t){return!(!t||!t[goog.events.Listenable.IMPLEMENTED_BY_PROP_])},goog.events.ListenableKey=function(){},goog.events.ListenableKey.counter_=0,goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_},goog.events.Listener=function(){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack)},goog.events.Listener.ENABLE_MONITORING=!1,goog.events.Listener.prototype.key=0,goog.events.Listener.prototype.removed=!1,goog.events.Listener.prototype.callOnce=!1,goog.events.Listener.prototype.init=function(t,e,o,i,n,r){if(goog.isFunction(t))this.isFunctionListener_=!0;else{if(!(t&&t.handleEvent&&goog.isFunction(t.handleEvent)))throw Error("Invalid listener argument");this.isFunctionListener_=!1}this.listener=t,this.proxy=e,this.src=o,this.type=i,this.capture=!!n,this.handler=r,this.callOnce=!1,this.key=goog.events.ListenableKey.reserveKey(),this.removed=!1},goog.events.Listener.prototype.handleEvent=function(t){return this.isFunctionListener_?this.listener.call(this.handler||this.src,t):this.listener.handleEvent.call(this.listener,t)},goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersion("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersion("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersion("8")||goog.userAgent.OPERA&&goog.userAgent.isVersion("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersion("8")||goog.userAgent.IE&&!goog.userAgent.isVersion("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!(!goog.global.document||!(document.documentElement&&"ontouchstart"in document.documentElement))||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)},goog.debug.entryPointRegistry={},goog.debug.EntryPointMonitor=function(){},goog.debug.entryPointRegistry.refList_=[],goog.debug.entryPointRegistry.monitors_=[],goog.debug.entryPointRegistry.monitorsMayExist_=!1,goog.debug.entryPointRegistry.register=function(t){if(goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=t,goog.debug.entryPointRegistry.monitorsMayExist_)for(var e=goog.debug.entryPointRegistry.monitors_,o=0;o<e.length;o++)t(goog.bind(e[o].wrap,e[o]))},goog.debug.entryPointRegistry.monitorAll=function(t){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var e=goog.bind(t.wrap,t),o=0;o<goog.debug.entryPointRegistry.refList_.length;o++)goog.debug.entryPointRegistry.refList_[o](e);goog.debug.entryPointRegistry.monitors_.push(t)},goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(t){var e=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(t==e[e.length-1],"Only the most recent monitor can be unwrapped."),t=goog.bind(t.unwrap,t);for(var o=0;o<goog.debug.entryPointRegistry.refList_.length;o++)goog.debug.entryPointRegistry.refList_[o](t);e.length--},goog.events.EventWrapper=function(){},goog.events.EventWrapper.prototype.listen=function(){},goog.events.EventWrapper.prototype.unlisten=function(){},goog.events.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",SELECTSTART:"selectstart",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONTEXTMENU:"contextmenu",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",TRANSITIONEND:goog.userAgent.WEBKIT?"webkitTransitionEnd":goog.userAgent.OPERA?"oTransitionEnd":"transitionend",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROVER:"MSPointerOver",MSPOINTEROUT:"MSPointerOut",MSPOINTERUP:"MSPointerUp",TEXTINPUT:"textinput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend"},goog.reflect={},goog.reflect.object=function(t,e){return e},goog.reflect.sinkValue=function(t){return goog.reflect.sinkValue[" "](t),t},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(t,e){try{return goog.reflect.sinkValue(t[e]),!0}catch(o){}return!1},goog.events.BrowserEvent=function(t,e){t&&this.init(t,e)},goog.inherits(goog.events.BrowserEvent,goog.events.Event),goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2},goog.events.BrowserEvent.IEButtonMap=[1,4,2],goog.events.BrowserEvent.prototype.target=null,goog.events.BrowserEvent.prototype.relatedTarget=null,goog.events.BrowserEvent.prototype.offsetX=0,goog.events.BrowserEvent.prototype.offsetY=0,goog.events.BrowserEvent.prototype.clientX=0,goog.events.BrowserEvent.prototype.clientY=0,goog.events.BrowserEvent.prototype.screenX=0,goog.events.BrowserEvent.prototype.screenY=0,goog.events.BrowserEvent.prototype.button=0,goog.events.BrowserEvent.prototype.keyCode=0,goog.events.BrowserEvent.prototype.charCode=0,goog.events.BrowserEvent.prototype.ctrlKey=!1,goog.events.BrowserEvent.prototype.altKey=!1,goog.events.BrowserEvent.prototype.shiftKey=!1,goog.events.BrowserEvent.prototype.metaKey=!1,goog.events.BrowserEvent.prototype.platformModifierKey=!1,goog.events.BrowserEvent.prototype.event_=null,goog.events.BrowserEvent.prototype.init=function(t,e){var o=this.type=t.type;goog.events.Event.call(this,o),this.target=t.target||t.srcElement,this.currentTarget=e;var i=t.relatedTarget;i?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(i,"nodeName")||(i=null)):o==goog.events.EventType.MOUSEOVER?i=t.fromElement:o==goog.events.EventType.MOUSEOUT&&(i=t.toElement),this.relatedTarget=i,this.offsetX=goog.userAgent.WEBKIT||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0,this.button=t.button,this.keyCode=t.keyCode||0,this.charCode=t.charCode||("keypress"==o?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.platformModifierKey=goog.userAgent.MAC?t.metaKey:t.ctrlKey,this.state=t.state,this.event_=t,t.defaultPrevented&&this.preventDefault(),delete this.propagationStopped_},goog.events.BrowserEvent.prototype.isButton=function(t){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==t:"click"==this.type?t==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[t])},goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)},goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this),this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0},goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var t=this.event_;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_},goog.events.BrowserEvent.prototype.disposeInternal=function(){},goog.events.listeners_={},goog.events.listenerTree_={},goog.events.sources_={},goog.events.onString_="on",goog.events.onStringMap_={},goog.events.keySeparator_="_",goog.events.listen=function(t,e,o,i,n){if(goog.isArray(e)){for(var r=0;r<e.length;r++)goog.events.listen(t,e[r],o,i,n);return null}return t=goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.isImplementedBy(t)?t.listen(e,goog.events.wrapListener_(o),i,n):goog.events.listen_(t,e,o,!1,i,n),e=t.key,goog.events.listeners_[e]=t,e},goog.events.listen_=function(t,e,o,i,n,r){if(!e)throw Error("Invalid event type");n=!!n;e in(s=goog.events.listenerTree_)||(s[e]={count_:0,remaining_:0}),n in(s=s[e])||(s[n]={count_:0,remaining_:0},s.count_++);var g,s=s[n],a=goog.getUid(t);if(s.remaining_++,s[a]){g=s[a];for(var l=0;l<g.length;l++)if((s=g[l]).listener==o&&s.handler==r){if(s.removed)break;return i||(g[l].callOnce=!1),g[l]}}else g=s[a]=[],s.count_++;return l=goog.events.getProxy(),(s=new goog.events.Listener).init(o,l,t,e,n,r),s.callOnce=i,l.src=t,l.listener=s,g.push(s),goog.events.sources_[a]||(goog.events.sources_[a]=[]),goog.events.sources_[a].push(s),t.addEventListener?(t==goog.global||!t.customEvent_)&&t.addEventListener(e,l,n):t.attachEvent(goog.events.getOnString_(e),l),s},goog.events.getProxy=function(){var t=goog.events.handleBrowserEvent_,e=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(o){return t.call(e.src,e.listener,o)}:function(o){if(!(o=t.call(e.src,e.listener,o)))return o};return e},goog.events.listenOnce=function(t,e,o,i,n){if(goog.isArray(e)){for(var r=0;r<e.length;r++)goog.events.listenOnce(t,e[r],o,i,n);return null}return t=goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.isImplementedBy(t)?t.listenOnce(e,goog.events.wrapListener_(o),i,n):goog.events.listen_(t,e,o,!0,i,n),e=t.key,goog.events.listeners_[e]=t,e},goog.events.listenWithWrapper=function(t,e,o,i,n){e.listen(t,o,i,n)},goog.events.unlisten=function(t,e,o,i,n){if(goog.isArray(e)){for(var r=0;r<e.length;r++)goog.events.unlisten(t,e[r],o,i,n);return null}if(goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.isImplementedBy(t))return t.unlisten(e,goog.events.wrapListener_(o),i,n);if(i=!!i,!(t=goog.events.getListeners_(t,e,i)))return!1;for(r=0;r<t.length;r++)if(t[r].listener==o&&t[r].capture==i&&t[r].handler==n)return goog.events.unlistenByKey(t[r].key);return!1},goog.events.unlistenByKey=function(t){var e=goog.events.listeners_[t];if(!e||e.removed)return!1;var o=e.src;if(goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.isImplementedBy(o))return o.unlistenByKey(e);var i=e.type,n=e.proxy,r=e.capture;return o.removeEventListener?(o==goog.global||!o.customEvent_)&&o.removeEventListener(i,n,r):o.detachEvent&&o.detachEvent(goog.events.getOnString_(i),n),o=goog.getUid(o),goog.events.sources_[o]&&(n=goog.events.sources_[o],goog.array.remove(n,e),0==n.length&&delete goog.events.sources_[o]),e.removed=!0,(e=goog.events.listenerTree_[i][r][o])&&(e.needsCleanup_=!0,goog.events.cleanUp_(i,r,o,e)),delete goog.events.listeners_[t],!0},goog.events.unlistenWithWrapper=function(t,e,o,i,n){e.unlisten(t,o,i,n)},goog.events.cleanUp=function(t){delete goog.events.listeners_[t.key]},goog.events.cleanUp_=function(t,e,o,i){if(!i.locked_&&i.needsCleanup_){for(var n=0,r=0;n<i.length;n++)i[n].removed?i[n].proxy.src=null:(n!=r&&(i[r]=i[n]),r++);i.length=r,i.needsCleanup_=!1,0==r&&(delete goog.events.listenerTree_[t][e][o],goog.events.listenerTree_[t][e].count_--,0==goog.events.listenerTree_[t][e].count_&&(delete goog.events.listenerTree_[t][e],goog.events.listenerTree_[t].count_--),0==goog.events.listenerTree_[t].count_&&delete goog.events.listenerTree_[t])}},goog.events.removeAll=function(t,e){var o=0,i=null==e;if(null!=t){if(goog.events.Listenable.USE_LISTENABLE_INTERFACE&&t&&goog.events.Listenable.isImplementedBy(t))return t.removeAllListeners(e);var n=goog.getUid(t);if(goog.events.sources_[n]){n=goog.events.sources_[n];for(var r=n.length-1;0<=r;r--){var g=n[r];(i||e==g.type)&&(goog.events.unlistenByKey(g.key),o++)}}}else goog.object.forEach(goog.events.listeners_,function(t,e){goog.events.unlistenByKey(e),o++});return o},goog.events.getListeners=function(t,e,o){return goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.isImplementedBy(t)?t.getListeners(e,o):goog.events.getListeners_(t,e,o)||[]},goog.events.getListeners_=function(t,e,o){var i=goog.events.listenerTree_;return e in i&&(i=i[e],o in i&&(i=i[o],t=goog.getUid(t),i[t]))?i[t]:null},goog.events.getListener=function(t,e,o,i,n){if(i=!!i,goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.isImplementedBy(t))return t.getListener(e,goog.events.wrapListener_(o),i,n);if(t=goog.events.getListeners_(t,e,i))for(e=0;e<t.length;e++)if(!t[e].removed&&t[e].listener==o&&t[e].capture==i&&t[e].handler==n)return t[e];return null},goog.events.hasListener=function(t,e,o){if(goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.isImplementedBy(t))return t.hasListener(e,o);t=goog.getUid(t);var i=goog.events.sources_[t];if(i){var n=goog.isDef(e),r=goog.isDef(o);return n&&r?!!(i=goog.events.listenerTree_[e])&&!!i[o]&&t in i[o]:!n&&!r||goog.array.some(i,function(t){return n&&t.type==e||r&&t.capture==o})}return!1},goog.events.expose=function(t){var e,o=[];for(e in t)t[e]&&t[e].id?o.push(e+" = "+t[e]+" ("+t[e].id+")"):o.push(e+" = "+t[e]);return o.join("\n")},goog.events.getOnString_=function(t){return t in goog.events.onStringMap_?goog.events.onStringMap_[t]:goog.events.onStringMap_[t]=goog.events.onString_+t},goog.events.fireListeners=function(t,e,o,i){if(goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.isImplementedBy(t))return t.fireListeners(e,o,i);var n=goog.events.listenerTree_;return!(e in n&&(n=n[e],o in n))||goog.events.fireListeners_(n[o],t,e,o,i)},goog.events.fireListeners_=function(t,e,o,i,n){var r=1;if(e=goog.getUid(e),t[e]){var g=--t.remaining_,s=t[e];s.locked_?s.locked_++:s.locked_=1;try{for(var a=s.length,l=0;l<a;l++){var h=s[l];h&&!h.removed&&(r&=!1!==goog.events.fireListener(h,n))}}finally{t.remaining_=Math.max(g,t.remaining_),s.locked_--,goog.events.cleanUp_(o,i,e,s)}}return Boolean(r)},goog.events.fireListener=function(t,e){return t.callOnce&&goog.events.unlistenByKey(t.key),t.handleEvent(e)},goog.events.getTotalListenerCount=function(){return goog.object.getCount(goog.events.listeners_)},goog.events.dispatchEvent=function(t,e){if(goog.events.Listenable.USE_LISTENABLE_INTERFACE)return t.dispatchEvent(e);if(!((r=e.type||e)in(n=goog.events.listenerTree_)))return!0;if(goog.isString(e))e=new goog.events.Event(e,t);else if(e instanceof goog.events.Event)e.target=e.target||t;else{var o=e;e=new goog.events.Event(r,t),goog.object.extend(e,o)}var i,n,r,g;o=1;if(r=!0 in(n=n[r])){for(i=[],g=t;g;g=g.getParentEventTarget())i.push(g);(g=n[!0]).remaining_=g.count_;for(var s=i.length-1;!e.propagationStopped_&&0<=s&&g.remaining_;s--)e.currentTarget=i[s],o&=goog.events.fireListeners_(g,i[s],e.type,!0,e)&&0!=e.returnValue_}if(!1 in n)if(g=n[!1],g.remaining_=g.count_,r)for(s=0;!e.propagationStopped_&&s<i.length&&g.remaining_;s++)e.currentTarget=i[s],o&=goog.events.fireListeners_(g,i[s],e.type,!1,e)&&0!=e.returnValue_;else for(n=t;!e.propagationStopped_&&n&&g.remaining_;n=n.getParentEventTarget())e.currentTarget=n,o&=goog.events.fireListeners_(g,n,e.type,!1,e)&&0!=e.returnValue_;return Boolean(o)},goog.events.protectBrowserEventEntryPoint=function(t){goog.events.handleBrowserEvent_=t.protectEntryPoint(goog.events.handleBrowserEvent_)},goog.events.handleBrowserEvent_=function(t,e){if(t.removed)return!0;var o=t.type;if(!(o in(r=goog.events.listenerTree_)))return!0;var i,n,r=r[o];if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){i=e||goog.getObjectByName("window.event");var g=!0 in r,s=!1 in r;if(g){if(goog.events.isMarkedIeEvent_(i))return!0;goog.events.markIeEvent_(i)}var a=new goog.events.BrowserEvent;a.init(i,this),i=!0;try{if(g){for(var l=[],h=a.currentTarget;h;h=h.parentNode)l.push(h);(n=r[!0]).remaining_=n.count_;for(var u=l.length-1;!a.propagationStopped_&&0<=u&&n.remaining_;u--)a.currentTarget=l[u],i&=goog.events.fireListeners_(n,l[u],o,!0,a);if(s)for((n=r[!1]).remaining_=n.count_,u=0;!a.propagationStopped_&&u<l.length&&n.remaining_;u++)a.currentTarget=l[u],i&=goog.events.fireListeners_(n,l[u],o,!1,a)}else i=goog.events.fireListener(t,a)}finally{l&&(l.length=0)}return i}return o=new goog.events.BrowserEvent(e,this),i=goog.events.fireListener(t,o)},goog.events.markIeEvent_=function(t){var e=!1;if(0==t.keyCode)try{return void(t.keyCode=-1)}catch(o){e=!0}(e||void 0==t.returnValue)&&(t.returnValue=!0)},goog.events.isMarkedIeEvent_=function(t){return 0>t.keyCode||void 0!=t.returnValue},goog.events.uniqueIdCounter_=0,goog.events.getUniqueId=function(t){return t+"_"+goog.events.uniqueIdCounter_++},goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1e9*Math.random()>>>0),goog.events.wrapListener_=function(t){return goog.isFunction(t)?t:t[goog.events.LISTENER_WRAPPER_PROP_]||(t[goog.events.LISTENER_WRAPPER_PROP_]=function(e){return t.handleEvent(e)})},goog.debug.entryPointRegistry.register(function(t){goog.events.handleBrowserEvent_=t(goog.events.handleBrowserEvent_)}),goog.events.EventHandler=function(t){goog.Disposable.call(this),this.handler_=t,this.keys_=[]},goog.inherits(goog.events.EventHandler,goog.Disposable),goog.events.EventHandler.typeArray_=[],goog.events.EventHandler.prototype.listen=function(t,e,o,i,n){goog.isArray(e)||(goog.events.EventHandler.typeArray_[0]=e,e=goog.events.EventHandler.typeArray_);for(var r=0;r<e.length;r++){var g=goog.events.listen(t,e[r],o||this,i||!1,n||this.handler_||this);this.keys_.push(g)}return this},goog.events.EventHandler.prototype.listenOnce=function(t,e,o,i,n){if(goog.isArray(e))for(var r=0;r<e.length;r++)this.listenOnce(t,e[r],o,i,n);else t=goog.events.listenOnce(t,e,o||this,i,n||this.handler_||this),this.keys_.push(t);return this},goog.events.EventHandler.prototype.listenWithWrapper=function(t,e,o,i,n){return e.listen(t,o,i,n||this.handler_||this,this),this},goog.events.EventHandler.prototype.getListenerCount=function(){return this.keys_.length},goog.events.EventHandler.prototype.unlisten=function(t,e,o,i,n){if(goog.isArray(e))for(var r=0;r<e.length;r++)this.unlisten(t,e[r],o,i,n);else(t=goog.events.getListener(t,e,o||this,i,n||this.handler_||this))&&(t=t.key,goog.events.unlistenByKey(t),goog.array.remove(this.keys_,t));return this},goog.events.EventHandler.prototype.unlistenWithWrapper=function(t,e,o,i,n){return e.unlisten(t,o,i,n||this.handler_||this,this),this},goog.events.EventHandler.prototype.removeAll=function(){goog.array.forEach(this.keys_,goog.events.unlistenByKey),this.keys_.length=0},goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this),this.removeAll()},goog.events.EventHandler.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},goog.style.bidi={},goog.style.bidi.getScrollLeft=function(t){var e=goog.style.isRightToLeft(t);return e&&goog.userAgent.GECKO?-t.scrollLeft:!e||goog.userAgent.IE&&goog.userAgent.isVersion("8")||"visible"==goog.style.getComputedOverflowX(t)?t.scrollLeft:t.scrollWidth-t.clientWidth-t.scrollLeft},goog.style.bidi.getOffsetStart=function(t){var e=t.offsetLeft,o=t.offsetParent;if(!o&&"fixed"==goog.style.getComputedPosition(t)&&(o=goog.dom.getOwnerDocument(t).documentElement),!o)return e;if(goog.userAgent.GECKO){var i=goog.style.getBorderBox(o);e=e+i.left}else goog.userAgent.isDocumentMode(8)&&(i=goog.style.getBorderBox(o),e-=i.left);return goog.style.isRightToLeft(o)?o.clientWidth-(e+t.offsetWidth):e},goog.style.bidi.setScrollOffset=function(t,e){e=Math.max(e,0),goog.style.isRightToLeft(t)?goog.userAgent.GECKO?t.scrollLeft=-e:goog.userAgent.IE&&goog.userAgent.isVersion("8")?t.scrollLeft=e:t.scrollLeft=t.scrollWidth-e-t.clientWidth:t.scrollLeft=e},goog.style.bidi.setPosition=function(t,e,o,i){goog.isNull(o)||(t.style.top=o+"px"),i?(t.style.right=e+"px",t.style.left=""):(t.style.left=e+"px",t.style.right="")},goog.events.EventTarget=function(){goog.Disposable.call(this),goog.events.Listenable.USE_LISTENABLE_INTERFACE&&(this.eventTargetListeners_={},this.reallyDisposed_=!1,this.actualEventTarget_=this)},goog.inherits(goog.events.EventTarget,goog.Disposable),goog.events.Listenable.USE_LISTENABLE_INTERFACE&&goog.events.Listenable.addImplementation(goog.events.EventTarget),goog.events.EventTarget.MAX_ANCESTORS_=1e3,goog.events.EventTarget.prototype.customEvent_=!0,goog.events.EventTarget.prototype.parentEventTarget_=null,goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_},goog.events.EventTarget.prototype.setParentEventTarget=function(t){this.parentEventTarget_=t},goog.events.EventTarget.prototype.addEventListener=function(t,e,o,i){goog.events.listen(this,t,e,o,i)},goog.events.EventTarget.prototype.removeEventListener=function(t,e,o,i){goog.events.unlisten(this,t,e,o,i)},goog.events.EventTarget.prototype.dispatchEvent=function(t){if(goog.events.Listenable.USE_LISTENABLE_INTERFACE){if(this.reallyDisposed_)return!0;var e,o=this.getParentEventTarget();if(o){e=[];for(var i=1;o;o=o.getParentEventTarget())e.push(o),goog.asserts.assert(++i<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop")}return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,t,e)}return goog.events.dispatchEvent(this,t)},goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this),goog.events.Listenable.USE_LISTENABLE_INTERFACE?(this.removeAllListeners(),this.reallyDisposed_=!0):goog.events.removeAll(this),this.parentEventTarget_=null},goog.events.Listenable.USE_LISTENABLE_INTERFACE&&(goog.events.EventTarget.prototype.listen=function(t,e,o,i){return this.listenInternal_(t,e,!1,o,i)},goog.events.EventTarget.prototype.listenOnce=function(t,e,o,i){return this.listenInternal_(t,e,!0,o,i)},goog.events.EventTarget.prototype.listenInternal_=function(t,e,o,i,n){goog.asserts.assert(!this.reallyDisposed_,"Can not listen on disposed object.");var r,g=this.eventTargetListeners_[t]||(this.eventTargetListeners_[t]=[]);return-1<(r=goog.events.EventTarget.findListenerIndex_(g,e,i,n))?(r=g[r],o||(r.callOnce=!1),r):((r=new goog.events.Listener).init(e,null,this,t,!!i,n),r.callOnce=o,g.push(r),r)},goog.events.EventTarget.prototype.unlisten=function(t,e,o,i){return t in this.eventTargetListeners_&&(t=this.eventTargetListeners_[t],-1<(e=goog.events.EventTarget.findListenerIndex_(t,e,o,i))&&(o=t[e],goog.events.cleanUp(o),o.removed=!0,goog.array.removeAt(t,e)))},goog.events.EventTarget.prototype.unlistenByKey=function(t){var e=t.type;return e in this.eventTargetListeners_&&((e=goog.array.remove(this.eventTargetListeners_[e],t))&&(goog.events.cleanUp(t),t.removed=!0),e)},goog.events.EventTarget.prototype.removeAllListeners=function(t){var e,o=0;for(e in this.eventTargetListeners_)if(!t||e==t){for(var i=this.eventTargetListeners_[e],n=0;n<i.length;n++)++o,goog.events.cleanUp(i[n]),i[n].removed=!0;i.length=0}return o},goog.events.EventTarget.prototype.fireListeners=function(t,e,o){if(goog.asserts.assert(!this.reallyDisposed_,"Can not fire listeners after dispose() completed."),!(t in this.eventTargetListeners_))return!0;var i=!0;t=goog.array.clone(this.eventTargetListeners_[t]);for(var n=0;n<t.length;++n){var r=t[n];r&&!r.removed&&r.capture==e&&(r.callOnce&&this.unlistenByKey(r),i=!1!==r.handleEvent(o)&&i)}return i&&0!=o.returnValue_},goog.events.EventTarget.prototype.getListeners=function(t,e){var o=this.eventTargetListeners_[t],i=[];if(o)for(var n=0;n<o.length;++n){var r=o[n];r.capture==e&&i.push(r)}return i},goog.events.EventTarget.prototype.getListener=function(t,e,o,i){var n=-1;return(t=this.eventTargetListeners_[t])&&(n=goog.events.EventTarget.findListenerIndex_(t,e,o,i)),-1<n?t[n]:null},goog.events.EventTarget.prototype.hasListener=function(t,e){var o=goog.isDef(t),i=goog.isDef(e);return goog.object.some(this.eventTargetListeners_,function(n){for(var r=0;r<n.length;++r)if(!(o&&n[r].type!=t||i&&n[r].capture!=e))return!0;return!1})},goog.events.EventTarget.prototype.setTargetForTesting=function(t){this.actualEventTarget_=t},goog.events.EventTarget.dispatchEventInternal_=function(t,e,o){var i=e.type||e;if(goog.isString(e))e=new goog.events.Event(e,t);else if(e instanceof goog.events.Event)e.target=e.target||t;else{var n=e;e=new goog.events.Event(i,t),goog.object.extend(e,n)}var r;n=!0;if(o)for(var g=o.length-1;!e.propagationStopped_&&0<=g;g--)r=e.currentTarget=o[g],n=r.fireListeners(i,!0,e)&&n;if(e.propagationStopped_||(r=e.currentTarget=t,n=r.fireListeners(i,!0,e)&&n,e.propagationStopped_||(n=r.fireListeners(i,!1,e)&&n)),o)for(g=0;!e.propagationStopped_&&g<o.length;g++)r=e.currentTarget=o[g],n=r.fireListeners(i,!1,e)&&n;return n},goog.events.EventTarget.findListenerIndex_=function(t,e,o,i){for(var n=0;n<t.length;++n){var r=t[n];if(r.listener==e&&r.capture==!!o&&r.handler==i)return n}return-1}),goog.fx={},goog.fx.Dragger=function(t,e,o){goog.events.EventTarget.call(this),this.target=t,this.handle=e||t,this.limits=o||new goog.math.Rect(NaN,NaN,NaN,NaN),this.document_=goog.dom.getOwnerDocument(t),this.eventHandler_=new goog.events.EventHandler(this),goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this)},goog.inherits(goog.fx.Dragger,goog.events.EventTarget),goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9.3"),goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"},goog.fx.Dragger.prototype.clientX=0,goog.fx.Dragger.prototype.clientY=0,goog.fx.Dragger.prototype.screenX=0,goog.fx.Dragger.prototype.screenY=0,goog.fx.Dragger.prototype.startX=0,goog.fx.Dragger.prototype.startY=0,goog.fx.Dragger.prototype.deltaX=0
;goog.fx.Dragger.prototype.deltaY=0,goog.fx.Dragger.prototype.enabled_=!0,goog.fx.Dragger.prototype.dragging_=!1,goog.fx.Dragger.prototype.hysteresisDistanceSquared_=0,goog.fx.Dragger.prototype.mouseDownTime_=0,goog.fx.Dragger.prototype.ieDragStartCancellingOn_=!1,goog.fx.Dragger.prototype.useRightPositioningForRtl_=!1,goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(t){this.useRightPositioningForRtl_=t},goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_},goog.fx.Dragger.prototype.setLimits=function(t){this.limits=t||new goog.math.Rect(NaN,NaN,NaN,NaN)},goog.fx.Dragger.prototype.setHysteresis=function(t){this.hysteresisDistanceSquared_=Math.pow(t,2)},goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)},goog.fx.Dragger.prototype.setScrollTarget=function(t){this.scrollTarget_=t},goog.fx.Dragger.prototype.setCancelIeDragStart=function(t){this.ieDragStartCancellingOn_=t},goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_},goog.fx.Dragger.prototype.setEnabled=function(t){this.enabled_=t},goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this),goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this),this.cleanUpAfterDragging_(),this.eventHandler_=this.handle=this.target=null},goog.fx.Dragger.prototype.isRightToLeft_=function(){return goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.target)),this.rightToLeft_},goog.fx.Dragger.prototype.startDrag=function(t){var e=t.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||e&&!t.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{if(this.maybeReinitTouchEvent_(t),0==this.hysteresisDistanceSquared_){if(!this.fireDragStart_(t))return;this.dragging_=!0,t.preventDefault()}else t.preventDefault();this.setupDragHandlers(),this.clientX=this.startX=t.clientX,this.clientY=this.startY=t.clientY,this.screenX=t.screenX,this.screenY=t.screenY,this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft,this.deltaY=this.target.offsetTop,this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll(),this.mouseDownTime_=goog.now()}},goog.fx.Dragger.prototype.setupDragHandlers=function(){var t=this.document_,e=t.documentElement,o=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(t,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,o),this.eventHandler_.listen(t,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,o),goog.fx.Dragger.HAS_SET_CAPTURE_?(e.setCapture(!1),this.eventHandler_.listen(e,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(t),goog.events.EventType.BLUR,this.endDrag),goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(t,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault),this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,o)},goog.fx.Dragger.prototype.fireDragStart_=function(t){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,t.clientX,t.clientY,t))},goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll(),goog.fx.Dragger.HAS_SET_CAPTURE_&&this.document_.releaseCapture()},goog.fx.Dragger.prototype.endDrag=function(t,e){if(this.cleanUpAfterDragging_(),this.dragging_){this.maybeReinitTouchEvent_(t),this.dragging_=!1;var o=this.limitX(this.deltaX),i=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,t.clientX,t.clientY,t,o,i,e||t.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);(t.type==goog.events.EventType.TOUCHEND||t.type==goog.events.EventType.TOUCHCANCEL)&&t.preventDefault()},goog.fx.Dragger.prototype.endDragCancel=function(t){this.endDrag(t,!0)},goog.fx.Dragger.prototype.maybeReinitTouchEvent_=function(t){var e=t.type;e==goog.events.EventType.TOUCHSTART||e==goog.events.EventType.TOUCHMOVE?t.init(t.getBrowserEvent().targetTouches[0],t.currentTarget):(e==goog.events.EventType.TOUCHEND||e==goog.events.EventType.TOUCHCANCEL)&&t.init(t.getBrowserEvent().changedTouches[0],t.currentTarget)},goog.fx.Dragger.prototype.handleMove_=function(t){if(this.enabled_){this.maybeReinitTouchEvent_(t);var e=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(t.clientX-this.clientX),o=t.clientY-this.clientY;if(this.clientX=t.clientX,this.clientY=t.clientY,this.screenX=t.screenX,this.screenY=t.screenY,!this.dragging_){var i=this.startX-this.clientX,n=this.startY-this.clientY;if(i*i+n*n>this.hysteresisDistanceSquared_){if(!this.fireDragStart_(t))return void(this.isDisposed()||this.endDrag(t));this.dragging_=!0}}e=(o=this.calculatePosition_(e,o)).x,o=o.y,this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,t.clientX,t.clientY,t,e,o))&&(this.doDrag(t,e,o,!1),t.preventDefault())}},goog.fx.Dragger.prototype.calculatePosition_=function(t,e){t+=(o=goog.dom.getDomHelper(this.document_).getDocumentScroll()).x-this.pageScroll.x,e+=o.y-this.pageScroll.y,this.pageScroll=o,this.deltaX+=t,this.deltaY+=e;var o=this.limitX(this.deltaX),i=this.limitY(this.deltaY);return new goog.math.Coordinate(o,i)},goog.fx.Dragger.prototype.onScroll_=function(t){var e=this.calculatePosition_(0,0);t.clientX=this.clientX,t.clientY=this.clientY,this.doDrag(t,e.x,e.y,!0)},goog.fx.Dragger.prototype.doDrag=function(t,e,o){this.defaultAction(e,o),this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,t.clientX,t.clientY,t,e,o))},goog.fx.Dragger.prototype.limitX=function(t){var e=this.limits,o=isNaN(e.left)?null:e.left;e=isNaN(e.width)?0:e.width;return Math.min(null!=o?o+e:Infinity,Math.max(null!=o?o:-Infinity,t))},goog.fx.Dragger.prototype.limitY=function(t){var e=this.limits,o=isNaN(e.top)?null:e.top;e=isNaN(e.height)?0:e.height;return Math.min(null!=o?o+e:Infinity,Math.max(null!=o?o:-Infinity,t))},goog.fx.Dragger.prototype.defaultAction=function(t,e){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=t+"px":this.target.style.left=t+"px",this.target.style.top=e+"px"},goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_},goog.fx.DragEvent=function(t,e,o,i,n,r,g,s){goog.events.Event.call(this,t),this.clientX=o,this.clientY=i,this.browserEvent=n,this.left=goog.isDef(r)?r:e.deltaX,this.top=goog.isDef(g)?g:e.deltaY,this.dragger=e,this.dragCanceled=!!s},goog.inherits(goog.fx.DragEvent,goog.events.Event),goog.ui={},goog.ui.IdGenerator=function(){},goog.addSingletonGetter(goog.ui.IdGenerator),goog.ui.IdGenerator.prototype.nextId_=0,goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)},goog.ui.IdGenerator.instance=goog.ui.IdGenerator.getInstance(),goog.ui.Component=function(t){goog.events.EventTarget.call(this),this.dom_=t||goog.dom.getDomHelper(),this.rightToLeft_=goog.ui.Component.defaultRightToLeft_},goog.inherits(goog.ui.Component,goog.events.EventTarget),goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance(),goog.ui.Component.defaultRightToLeft_=null,goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"},goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"},goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64},goog.ui.Component.getStateTransitionEvent=function(t,e){switch(t){case goog.ui.Component.State.DISABLED:return e?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return e?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return e?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return e?goog.ui.Component.EventType.SELECT:goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return e?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return e?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return e?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID)},goog.ui.Component.setDefaultRightToLeft=function(t){goog.ui.Component.defaultRightToLeft_=t},goog.ui.Component.prototype.id_=null,goog.ui.Component.prototype.inDocument_=!1,goog.ui.Component.prototype.element_=null,goog.ui.Component.prototype.rightToLeft_=null,goog.ui.Component.prototype.model_=null,goog.ui.Component.prototype.parent_=null,goog.ui.Component.prototype.children_=null,goog.ui.Component.prototype.childIndex_=null,goog.ui.Component.prototype.wasDecorated_=!1,goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())},goog.ui.Component.prototype.setId=function(t){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,t,this)),this.id_=t},goog.ui.Component.prototype.getElement=function(){return this.element_},goog.ui.Component.prototype.getElementStrict=function(){var t=this.element_;return goog.asserts.assert(t,"Can not call getElementStrict before rendering/decorating."),t},goog.ui.Component.prototype.setElementInternal=function(t){this.element_=t},goog.ui.Component.prototype.getElementsByClass=function(t){return this.element_?this.dom_.getElementsByClass(t,this.element_):[]},goog.ui.Component.prototype.getElementByClass=function(t){return this.element_?this.dom_.getElementByClass(t,this.element_):null},goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this))},goog.ui.Component.prototype.setParent=function(t){if(this==t)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(t&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=t)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=t,goog.ui.Component.superClass_.setParentEventTarget.call(this,t)},goog.ui.Component.prototype.getParent=function(){return this.parent_},goog.ui.Component.prototype.setParentEventTarget=function(t){if(this.parent_&&this.parent_!=t)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,t)},goog.ui.Component.prototype.getDomHelper=function(){return this.dom_},goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_},goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("div")},goog.ui.Component.prototype.render=function(t){this.render_(t)},goog.ui.Component.prototype.renderBefore=function(t){this.render_(t.parentNode,t)},goog.ui.Component.prototype.render_=function(t,e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom(),t?t.insertBefore(this.element_,e||null):this.dom_.getDocument().body.appendChild(this.element_),(!this.parent_||this.parent_.isInDocument())&&this.enterDocument()},goog.ui.Component.prototype.decorate=function(t){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(!t||!this.canDecorate(t))throw Error(goog.ui.Component.Error.DECORATE_INVALID);this.wasDecorated_=!0,this.dom_&&this.dom_.getDocument()==goog.dom.getOwnerDocument(t)||(this.dom_=goog.dom.getDomHelper(t)),this.decorateInternal(t),this.enterDocument()},goog.ui.Component.prototype.canDecorate=function(){return!0},goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_},goog.ui.Component.prototype.decorateInternal=function(t){this.element_=t},goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild(function(t){!t.isInDocument()&&t.getElement()&&t.enterDocument()})},goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(t){t.isInDocument()&&t.exitDocument()}),this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll(),this.inDocument_=!1},goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument(),this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_),this.forEachChild(function(t){t.dispose()}),!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_),this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null,goog.ui.Component.superClass_.disposeInternal.call(this)},goog.ui.Component.prototype.makeId=function(t){return this.getId()+"."+t},goog.ui.Component.prototype.makeIds=function(t){var e,o={};for(e in t)o[e]=this.makeId(t[e]);return o},goog.ui.Component.prototype.getModel=function(){return this.model_},goog.ui.Component.prototype.setModel=function(t){this.model_=t},goog.ui.Component.prototype.getFragmentFromId=function(t){return t.substring(this.getId().length+1)},goog.ui.Component.prototype.getElementByFragment=function(t){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(t))},goog.ui.Component.prototype.addChild=function(t,e){this.addChildAt(t,this.getChildCount(),e)},goog.ui.Component.prototype.addChildAt=function(t,e,o){if(t.inDocument_&&(o||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>e||e>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]),t.getParent()==this?(goog.object.set(this.childIndex_,t.getId(),t),goog.array.remove(this.children_,t)):goog.object.add(this.childIndex_,t.getId(),t),t.setParent(this),goog.array.insertAt(this.children_,t,e),t.inDocument_&&this.inDocument_&&t.getParent()==this?(o=this.getContentElement()).insertBefore(t.getElement(),o.childNodes[e]||null):o?(this.element_||this.createDom(),e=this.getChildAt(e+1),t.render_(this.getContentElement(),e?e.element_:null)):this.inDocument_&&!t.inDocument_&&t.element_&&t.element_.parentNode&&t.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&t.enterDocument()},goog.ui.Component.prototype.getContentElement=function(){return this.element_},goog.ui.Component.prototype.isRightToLeft=function(){return null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body)),this.rightToLeft_},goog.ui.Component.prototype.setRightToLeft=function(t){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=t},goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length},goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0},goog.ui.Component.prototype.getChildIds=function(){var t=[];return this.forEachChild(function(e){t.push(e.getId())}),t},goog.ui.Component.prototype.getChild=function(t){return this.childIndex_&&t?goog.object.get(this.childIndex_,t)||null:null},goog.ui.Component.prototype.getChildAt=function(t){return this.children_?this.children_[t]||null:null},goog.ui.Component.prototype.forEachChild=function(t,e){this.children_&&goog.array.forEach(this.children_,t,e)},goog.ui.Component.prototype.indexOfChild=function(t){return this.children_&&t?goog.array.indexOf(this.children_,t):-1},goog.ui.Component.prototype.removeChild=function(t,e){if(t){var o=goog.isString(t)?t:t.getId();t=this.getChild(o),o&&t&&(goog.object.remove(this.childIndex_,o),goog.array.remove(this.children_,t),e&&(t.exitDocument(),t.element_&&goog.dom.removeNode(t.element_)),t.setParent(null))}if(!t)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return t},goog.ui.Component.prototype.removeChildAt=function(t,e){return this.removeChild(this.getChildAt(t),e)},goog.ui.Component.prototype.removeChildren=function(t){for(var e=[];this.hasChildren();)e.push(this.removeChildAt(0,t));return e},goog.Timer=function(t,e){goog.events.EventTarget.call(this),this.interval_=t||1,this.timerObject_=e||goog.Timer.defaultTimerObject,this.boundTick_=goog.bind(this.tick_,this),this.last_=goog.now()},goog.inherits(goog.Timer,goog.events.EventTarget),goog.Timer.MAX_TIMEOUT_=2147483647,goog.Timer.prototype.enabled=!1,goog.Timer.defaultTimerObject=goog.global,goog.Timer.intervalScale=.8,goog.Timer.prototype.timer_=null,goog.Timer.prototype.getInterval=function(){return this.interval_},goog.Timer.prototype.setInterval=function(t){this.interval_=t,this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()},goog.Timer.prototype.tick_=function(){if(this.enabled){var t=goog.now()-this.last_;0<t&&t<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-t):(this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}},goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)},goog.Timer.prototype.start=function(){this.enabled=!0,this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())},goog.Timer.prototype.stop=function(){this.enabled=!1,this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)},goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this),this.stop(),delete this.timerObject_},goog.Timer.TICK="tick",goog.Timer.callOnce=function(t,e,o){if(goog.isFunction(t))o&&(t=goog.bind(t,o));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=goog.bind(t.handleEvent,t)}return e>goog.Timer.MAX_TIMEOUT_?-1:goog.Timer.defaultTimerObject.setTimeout(t,e||0)},goog.Timer.clear=function(t){goog.Timer.defaultTimerObject.clearTimeout(t)},goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,PHANTOM:255},goog.events.KeyCodes.isTextModifyingKeyEvent=function(t){if(t.altKey&&!t.ctrlKey||t.metaKey||t.keyCode>=goog.events.KeyCodes.F1&&t.keyCode<=goog.events.KeyCodes.F12)return!1;switch(t.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;default:return t.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||t.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}},goog.events.KeyCodes.firesKeyPressEvent=function(t,e,o,i,n){if(!(goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("525")))return!0;if(goog.userAgent.MAC&&n)return goog.events.KeyCodes.isCharacterKey(t);if(n&&!i||!o&&(e==goog.events.KeyCodes.CTRL||e==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&e==goog.events.KeyCodes.META))return!1;if(goog.userAgent.WEBKIT&&i&&o)switch(t){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&i&&e==t)return!1;switch(t){case goog.events.KeyCodes.ENTER:return!(goog.userAgent.IE&&goog.userAgent.isDocumentMode(9));case goog.events.KeyCodes.ESC:return!goog.userAgent.WEBKIT}return goog.events.KeyCodes.isCharacterKey(t)},goog.events.KeyCodes.isCharacterKey=function(t){if(t>=goog.events.KeyCodes.ZERO&&t<=goog.events.KeyCodes.NINE||t>=goog.events.KeyCodes.NUM_ZERO&&t<=goog.events.KeyCodes.NUM_MULTIPLY||t>=goog.events.KeyCodes.A&&t<=goog.events.KeyCodes.Z||goog.userAgent.WEBKIT&&0==t)return!0;switch(t){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},goog.events.KeyCodes.normalizeGeckoKeyCode=function(t){switch(t){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return t}},goog.fx.Transition=function(){},goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"},goog.ui.PopupBase=function(t,e){goog.events.EventTarget.call(this),this.handler_=new goog.events.EventHandler(this),this.setElement(t||null),e&&this.setType(e)},goog.inherits(goog.ui.PopupBase,goog.events.EventTarget),goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"},goog.ui.PopupBase.prototype.element_=null,goog.ui.PopupBase.prototype.autoHide_=!0,goog.ui.PopupBase.prototype.autoHideRegion_=null,goog.ui.PopupBase.prototype.isVisible_=!1,goog.ui.PopupBase.prototype.shouldHideAsync_=!1,goog.ui.PopupBase.prototype.lastShowTime_=-1,goog.ui.PopupBase.prototype.lastHideTime_=-1,goog.ui.PopupBase.prototype.hideOnEscape_=!1,goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0,goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY,goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"},goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150,goog.ui.PopupBase.prototype.getType=function(){return this.type_},goog.ui.PopupBase.prototype.setType=function(t){this.type_=t},goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_},goog.ui.PopupBase.prototype.setShouldHideAsync=function(t){this.shouldHideAsync_=t},goog.ui.PopupBase.prototype.getElement=function(){return this.element_},goog.ui.PopupBase.prototype.setElement=function(t){this.ensureNotVisible_(),this.element_=t},goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_},goog.ui.PopupBase.prototype.setAutoHide=function(t){this.ensureNotVisible_(),this.autoHide_=t},goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_},goog.ui.PopupBase.prototype.setHideOnEscape=function(t){this.ensureNotVisible_(),this.hideOnEscape_=t},goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_},goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(t){this.enableCrossIframeDismissal_=t},goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_},goog.ui.PopupBase.prototype.setAutoHideRegion=function(t){this.autoHideRegion_=t},goog.ui.PopupBase.prototype.setTransition=function(t,e){this.showTransition_=t,this.hideTransition_=e},goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_},goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_},goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_)throw Error("Can not change this state of the popup while showing.")},goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_},goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||goog.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS},goog.ui.PopupBase.prototype.setVisible=function(t){this.showTransition_&&this.showTransition_.stop(),this.hideTransition_&&this.hideTransition_.stop(),t?this.show_():this.hide_()},goog.ui.PopupBase.prototype.reposition=goog.nullFunction,goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_)throw Error("Caller must call setElement before trying to show the popup");this.reposition();var t=goog.dom.getOwnerDocument(this.element_);if(this.hideOnEscape_&&this.handler_.listen(t,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0),this.autoHide_)if(this.handler_.listen(t,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){var e;try{e=t.activeElement}catch(i){}for(;e&&"IFRAME"==e.nodeName;){try{var o=goog.dom.getFrameContentDocument(e)}catch(n){break}e=(t=o).activeElement}this.handler_.listen(t,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),this.handler_.listen(t,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else this.handler_.listen(t,goog.events.EventType.BLUR,this.onDocumentBlur_);this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition(),this.isVisible_=!0,this.showTransition_?(goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow_,!1,this),this.showTransition_.play()):this.onShow_()}},goog.ui.PopupBase.prototype.hide_=function(t){return!(!this.isVisible_||!this.onBeforeHide_(t))&&(this.handler_&&this.handler_.removeAll(),this.isVisible_=!1,this.lastHideTime_=goog.now(),this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,t),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(t),!0)},goog.ui.PopupBase.prototype.continueHidingPopup_=function(t){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement_,0,this):this.hidePopupElement_():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_(),this.onHide_(t)},goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible",goog.style.showElement(this.element_,!0)},goog.ui.PopupBase.prototype.hidePopupElement_=function(){this.element_.style.visibility="hidden",goog.style.showElement(this.element_,!1)},goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.top="-10000px"},goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)},goog.ui.PopupBase.prototype.onShow_=function(){this.lastShowTime_=goog.now(),this.lastHideTime_=-1,this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)},goog.ui.PopupBase.prototype.onBeforeHide_=function(t){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:t})},goog.ui.PopupBase.prototype.onHide_=function(t){this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:t})},goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(t){t=t.target,!goog.dom.contains(this.element_,t)&&(!this.autoHideRegion_||goog.dom.contains(this.autoHideRegion_,t))&&!this.shouldDebounce_()&&this.hide_(t)},goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(t){t.keyCode==goog.events.KeyCodes.ESC&&this.hide_(t.target)&&(t.preventDefault(),t.stopPropagation())},goog.ui.PopupBase.prototype.onDocumentBlur_=function(t){if(this.enableCrossIframeDismissal_){var e=goog.dom.getOwnerDocument(this.element_);if(goog.userAgent.IE||goog.userAgent.OPERA){if(!(t=e.activeElement)||goog.dom.contains(this.element_,t)||"BODY"==t.tagName)return}else if(t.target!=e)return;this.shouldDebounce_()||this.hide_()}},goog.ui.PopupBase.prototype.shouldDebounce_=function(){return goog.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS},goog.ui.PopupBase.prototype.disposeInternal=function(){goog.ui.PopupBase.superClass_.disposeInternal.call(this),this.handler_.dispose(),goog.dispose(this.showTransition_),goog.dispose(this.hideTransition_),delete this.element_,delete this.handler_},goog.events.FocusHandler=function(t){goog.events.EventTarget.call(this),this.element_=t,t=goog.userAgent.IE?"focusout":"blur",this.listenKeyIn_=goog.events.listen(this.element_,goog.userAgent.IE?"focusin":"focus",this,!goog.userAgent.IE),this.listenKeyOut_=goog.events.listen(this.element_,t,this,!goog.userAgent.IE)},goog.inherits(goog.events.FocusHandler,goog.events.EventTarget),goog.events.FocusHandler.EventType={FOCUSIN:"focusin",FOCUSOUT:"focusout"},goog.events.FocusHandler.prototype.handleEvent=function(t){var e=t.getBrowserEvent();(e=new goog.events.BrowserEvent(e)).type="focusin"==t.type||"focus"==t.type?goog.events.FocusHandler.EventType.FOCUSIN:goog.events.FocusHandler.EventType.FOCUSOUT,this.dispatchEvent(e)},goog.events.FocusHandler.prototype.disposeInternal=function(){goog.events.FocusHandler.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.listenKeyIn_),goog.events.unlistenByKey(this.listenKeyOut_),delete this.element_},goog.dom.iframe={},goog.dom.iframe.BLANK_SOURCE='javascript:""',goog.dom.iframe.STYLES_="border:0;vertical-align:bottom;",goog.dom.iframe.createBlank=function(t,e){return t.createDom("iframe",{frameborder:0,style:goog.dom.iframe.STYLES_+(e||""),src:goog.dom.iframe.BLANK_SOURCE})},goog.dom.iframe.writeContent=function(t,e){var o=goog.dom.getFrameContentDocument(t);o.open(),o.write(e),o.close()},goog.dom.iframe.createWithContent=function(t,e,o,i,n){var r=goog.dom.getDomHelper(t),g=[];return n||g.push("<!DOCTYPE html>"),g.push("<html><head>",e,"</head><body>",o,"</body></html>"),e=goog.dom.iframe.createBlank(r,i),t.appendChild(e),goog.dom.iframe.writeContent(e,g.join("")),e},goog.ui.ModalPopup=function(t,e){goog.ui.Component.call(this,e),this.useIframeMask_=!!t},goog.inherits(goog.ui.ModalPopup,goog.ui.Component),goog.ui.ModalPopup.prototype.focusHandler_=null,goog.ui.ModalPopup.prototype.visible_=!1,goog.ui.ModalPopup.prototype.bgEl_=null,goog.ui.ModalPopup.prototype.bgIframeEl_=null,goog.ui.ModalPopup.prototype.tabCatcherElement_=null,goog.ui.ModalPopup.prototype.backwardTabWrapInProgress_=!1,
goog.ui.ModalPopup.prototype.getCssClass=function(){return"goog-modalpopup"},goog.ui.ModalPopup.prototype.getBackgroundIframe=function(){return this.bgIframeEl_},goog.ui.ModalPopup.prototype.getBackgroundElement=function(){return this.bgEl_},goog.ui.ModalPopup.prototype.createDom=function(){goog.ui.ModalPopup.superClass_.createDom.call(this);var t=this.getElement();goog.dom.classes.add(t,this.getCssClass()),goog.dom.setFocusableTabIndex(t,!0),goog.style.showElement(t,!1),this.manageBackgroundDom_(),this.createTabCatcher_()},goog.ui.ModalPopup.prototype.manageBackgroundDom_=function(){this.useIframeMask_&&!this.bgIframeEl_&&(this.bgIframeEl_=goog.dom.iframe.createBlank(this.getDomHelper()),this.bgIframeEl_.className=this.getCssClass()+"-bg",goog.style.showElement(this.bgIframeEl_,!1),goog.style.setOpacity(this.bgIframeEl_,0)),this.bgEl_||(this.bgEl_=this.getDomHelper().createDom("div",this.getCssClass()+"-bg"),goog.style.showElement(this.bgEl_,!1))},goog.ui.ModalPopup.prototype.createTabCatcher_=function(){this.tabCatcherElement_||(this.tabCatcherElement_=this.getDomHelper().createElement("span"),goog.style.showElement(this.tabCatcherElement_,!1),goog.dom.setFocusableTabIndex(this.tabCatcherElement_,!0),this.tabCatcherElement_.style.position="absolute")},goog.ui.ModalPopup.prototype.setupBackwardTabWrap=function(){this.backwardTabWrapInProgress_=!0;try{this.tabCatcherElement_.focus()}catch(t){}goog.Timer.callOnce(this.resetBackwardTabWrap_,0,this)},goog.ui.ModalPopup.prototype.resetBackwardTabWrap_=function(){this.backwardTabWrapInProgress_=!1},goog.ui.ModalPopup.prototype.renderBackground_=function(){goog.asserts.assert(!!this.bgEl_,"Background element must not be null."),this.bgIframeEl_&&goog.dom.insertSiblingBefore(this.bgIframeEl_,this.getElement()),goog.dom.insertSiblingBefore(this.bgEl_,this.getElement())},goog.ui.ModalPopup.prototype.canDecorate=function(t){return!!t&&t.tagName==goog.dom.TagName.DIV},goog.ui.ModalPopup.prototype.decorateInternal=function(t){goog.ui.ModalPopup.superClass_.decorateInternal.call(this,t),goog.dom.classes.add(this.getElement(),this.getCssClass()),this.manageBackgroundDom_(),this.createTabCatcher_(),goog.style.showElement(this.getElement(),!1)},goog.ui.ModalPopup.prototype.enterDocument=function(){this.renderBackground_(),goog.ui.ModalPopup.superClass_.enterDocument.call(this),goog.dom.insertSiblingAfter(this.tabCatcherElement_,this.getElement()),this.focusHandler_=new goog.events.FocusHandler(this.getDomHelper().getDocument()),this.getHandler().listen(this.focusHandler_,goog.events.FocusHandler.EventType.FOCUSIN,this.onFocus_)},goog.ui.ModalPopup.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1),goog.dispose(this.focusHandler_),goog.ui.ModalPopup.superClass_.exitDocument.call(this),goog.dom.removeNode(this.bgIframeEl_),goog.dom.removeNode(this.bgEl_),goog.dom.removeNode(this.tabCatcherElement_)},goog.ui.ModalPopup.prototype.setVisible=function(t){goog.asserts.assert(this.isInDocument(),"ModalPopup must be rendered first."),t!=this.visible_&&(this.popupShowTransition_&&this.popupShowTransition_.stop(),this.bgShowTransition_&&this.bgShowTransition_.stop(),this.popupHideTransition_&&this.popupHideTransition_.stop(),this.bgHideTransition_&&this.bgHideTransition_.stop(),t?this.show_():this.hide_())},goog.ui.ModalPopup.prototype.setTransition=function(t,e,o,i){this.popupShowTransition_=t,this.popupHideTransition_=e,this.bgShowTransition_=o,this.bgHideTransition_=i},goog.ui.ModalPopup.prototype.show_=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)&&(this.resizeBackground_(),this.reposition(),this.getHandler().listen(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_),this.showPopupElement_(!0),this.focus(),this.visible_=!0,this.popupShowTransition_&&this.bgShowTransition_?(goog.events.listenOnce(this.popupShowTransition_,goog.fx.Transition.EventType.END,this.onShow,!1,this),this.bgShowTransition_.play(),this.popupShowTransition_.play()):this.onShow())},goog.ui.ModalPopup.prototype.hide_=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_HIDE)&&(this.getHandler().unlisten(this.getDomHelper().getWindow(),goog.events.EventType.RESIZE,this.resizeBackground_),this.visible_=!1,this.popupHideTransition_&&this.bgHideTransition_?(goog.events.listenOnce(this.popupHideTransition_,goog.fx.Transition.EventType.END,this.onHide,!1,this),this.bgHideTransition_.play(),this.popupHideTransition_.play()):this.onHide())},goog.ui.ModalPopup.prototype.showPopupElement_=function(t){this.bgIframeEl_&&goog.style.showElement(this.bgIframeEl_,t),this.bgEl_&&goog.style.showElement(this.bgEl_,t),goog.style.showElement(this.getElement(),t),goog.style.showElement(this.tabCatcherElement_,t)},goog.ui.ModalPopup.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)},goog.ui.ModalPopup.prototype.onHide=function(){this.showPopupElement_(!1),this.dispatchEvent(goog.ui.PopupBase.EventType.HIDE)},goog.ui.ModalPopup.prototype.isVisible=function(){return this.visible_},goog.ui.ModalPopup.prototype.focus=function(){this.focusElement_()},goog.ui.ModalPopup.prototype.resizeBackground_=function(){this.bgIframeEl_&&goog.style.showElement(this.bgIframeEl_,!1),this.bgEl_&&goog.style.showElement(this.bgEl_,!1);var t=this.getDomHelper().getDocument(),e=goog.dom.getWindow(t)||window,o=goog.dom.getViewportSize(e);e=Math.max(o.width,Math.max(t.body.scrollWidth,t.documentElement.scrollWidth)),t=Math.max(o.height,Math.max(t.body.scrollHeight,t.documentElement.scrollHeight));this.bgIframeEl_&&(goog.style.showElement(this.bgIframeEl_,!0),goog.style.setSize(this.bgIframeEl_,e,t)),this.bgEl_&&(goog.style.showElement(this.bgEl_,!0),goog.style.setSize(this.bgEl_,e,t))},goog.ui.ModalPopup.prototype.reposition=function(){var t=this.getDomHelper().getDocument(),e=goog.dom.getWindow(t)||window;if("fixed"==goog.style.getComputedPosition(this.getElement()))var o=t=0;else o=this.getDomHelper().getDocumentScroll(),t=o.x,o=o.y;var i=goog.style.getSize(this.getElement());e=goog.dom.getViewportSize(e),t=Math.max(t+e.width/2-i.width/2,0),o=Math.max(o+e.height/2-i.height/2,0);goog.style.setPosition(this.getElement(),t,o),goog.style.setPosition(this.tabCatcherElement_,t,o)},goog.ui.ModalPopup.prototype.onFocus_=function(t){this.backwardTabWrapInProgress_?this.resetBackwardTabWrap_():t.target==this.tabCatcherElement_&&goog.Timer.callOnce(this.focusElement_,0,this)},goog.ui.ModalPopup.prototype.focusElement_=function(){try{goog.userAgent.IE&&this.getDomHelper().getDocument().body.focus(),this.getElement().focus()}catch(t){}},goog.ui.ModalPopup.prototype.disposeInternal=function(){goog.dispose(this.popupShowTransition_),this.popupShowTransition_=null,goog.dispose(this.popupHideTransition_),this.popupHideTransition_=null,goog.dispose(this.bgShowTransition_),this.bgShowTransition_=null,goog.dispose(this.bgHideTransition_),this.bgHideTransition_=null,goog.ui.ModalPopup.superClass_.disposeInternal.call(this)},goog.iter={},goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:Error("StopIteration"),goog.iter.Iterator=function(){},goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration},goog.iter.Iterator.prototype.__iterator__=function(){return this},goog.iter.toIterator=function(t){if(t instanceof goog.iter.Iterator)return t;if("function"==typeof t.__iterator__)return t.__iterator__(!1);if(goog.isArrayLike(t)){var e=0,o=new goog.iter.Iterator;return o.next=function(){for(;;){if(e>=t.length)throw goog.iter.StopIteration;if(e in t)return t[e++];e++}},o}throw Error("Not implemented")},goog.iter.forEach=function(t,e,o){if(goog.isArrayLike(t))try{goog.array.forEach(t,e,o)}catch(i){if(i!==goog.iter.StopIteration)throw i}else{t=goog.iter.toIterator(t);try{for(;;)e.call(o,t.next(),void 0,t)}catch(n){if(n!==goog.iter.StopIteration)throw n}}},goog.iter.filter=function(t,e,o){var i=goog.iter.toIterator(t);return t=new goog.iter.Iterator,t.next=function(){for(;;){var t=i.next();if(e.call(o,t,void 0,i))return t}},t},goog.iter.range=function(t,e,o){var i=0,n=t,r=o||1;if(1<arguments.length&&(i=t,n=e),0==r)throw Error("Range step argument must not be zero");var g=new goog.iter.Iterator;return g.next=function(){if(0<r&&i>=n||0>r&&i<=n)throw goog.iter.StopIteration;var t=i;return i+=r,t},g},goog.iter.join=function(t,e){return goog.iter.toArray(t).join(e)},goog.iter.map=function(t,e,o){var i=goog.iter.toIterator(t);return t=new goog.iter.Iterator,t.next=function(){for(;;){var t=i.next();return e.call(o,t,void 0,i)}},t},goog.iter.reduce=function(t,e,o,i){var n=o;return goog.iter.forEach(t,function(t){n=e.call(i,n,t)}),n},goog.iter.some=function(t,e,o){t=goog.iter.toIterator(t);try{for(;;)if(e.call(o,t.next(),void 0,t))return!0}catch(i){if(i!==goog.iter.StopIteration)throw i}return!1},goog.iter.every=function(t,e,o){t=goog.iter.toIterator(t);try{for(;;)if(!e.call(o,t.next(),void 0,t))return!1}catch(i){if(i!==goog.iter.StopIteration)throw i}return!0},goog.iter.chain=function(t){var e=arguments,o=e.length,i=0,n=new goog.iter.Iterator;return n.next=function(){try{if(i>=o)throw goog.iter.StopIteration;return goog.iter.toIterator(e[i]).next()}catch(t){if(t!==goog.iter.StopIteration||i>=o)throw t;return i++,this.next()}},n},goog.iter.dropWhile=function(t,e,o){var i=goog.iter.toIterator(t),n=!0;return(t=new goog.iter.Iterator).next=function(){for(;;){var t=i.next();if(!n||!e.call(o,t,void 0,i))return n=!1,t}},t},goog.iter.takeWhile=function(t,e,o){var i=goog.iter.toIterator(t),n=!0;return(t=new goog.iter.Iterator).next=function(){for(;;){if(!n)throw goog.iter.StopIteration;var t=i.next();if(e.call(o,t,void 0,i))return t;n=!1}},t},goog.iter.toArray=function(t){if(goog.isArrayLike(t))return goog.array.toArray(t);t=goog.iter.toIterator(t);var e=[];return goog.iter.forEach(t,function(t){e.push(t)}),e},goog.iter.equals=function(t,e){t=goog.iter.toIterator(t),e=goog.iter.toIterator(e);var o,i;try{for(;;){o=i=!1;var n=t.next();o=!0;var r=e.next();if(i=!0,n!=r)break}}catch(g){if(g!==goog.iter.StopIteration)throw g;if(o&&!i)return!1;if(!i)try{e.next()}catch(s){if(s!==goog.iter.StopIteration)throw s;return!0}}return!1},goog.iter.nextOrValue=function(t,e){try{return goog.iter.toIterator(t).next()}catch(o){if(o!=goog.iter.StopIteration)throw o;return e}},goog.iter.product=function(){if(goog.array.some(arguments,function(t){return!t.length})||!arguments.length)return new goog.iter.Iterator;var t=new goog.iter.Iterator,e=arguments,o=goog.array.repeat(0,e.length);return t.next=function(){if(o){for(var t=goog.array.map(o,function(t,o){return e[o][t]}),i=o.length-1;0<=i;i--){if(goog.asserts.assert(o),o[i]<e[i].length-1){o[i]++;break}if(0==i){o=null;break}o[i]=0}return t}throw goog.iter.StopIteration},t},goog.iter.cycle=function(t){var e=goog.iter.toIterator(t),o=[],i=0,n=!1;return(t=new goog.iter.Iterator).next=function(){var t=null;if(!n)try{return t=e.next(),o.push(t),t}catch(r){if(r!=goog.iter.StopIteration||goog.array.isEmpty(o))throw r;n=!0}return t=o[i],i=(i+1)%o.length,t},t},goog.structs={},goog.structs.getCount=function(t){return"function"==typeof t.getCount?t.getCount():goog.isArrayLike(t)||goog.isString(t)?t.length:goog.object.getCount(t)},goog.structs.getValues=function(t){if("function"==typeof t.getValues)return t.getValues();if(goog.isString(t))return t.split("");if(goog.isArrayLike(t)){for(var e=[],o=t.length,i=0;i<o;i++)e.push(t[i]);return e}return goog.object.getValues(t)},goog.structs.getKeys=function(t){if("function"==typeof t.getKeys)return t.getKeys();if("function"!=typeof t.getValues){if(goog.isArrayLike(t)||goog.isString(t)){var e=[];t=t.length;for(var o=0;o<t;o++)e.push(o);return e}return goog.object.getKeys(t)}},goog.structs.contains=function(t,e){return"function"==typeof t.contains?t.contains(e):"function"==typeof t.containsValue?t.containsValue(e):goog.isArrayLike(t)||goog.isString(t)?goog.array.contains(t,e):goog.object.containsValue(t,e)},goog.structs.isEmpty=function(t){return"function"==typeof t.isEmpty?t.isEmpty():goog.isArrayLike(t)||goog.isString(t)?goog.array.isEmpty(t):goog.object.isEmpty(t)},goog.structs.clear=function(t){"function"==typeof t.clear?t.clear():goog.isArrayLike(t)?goog.array.clear(t):goog.object.clear(t)},goog.structs.forEach=function(t,e,o){if("function"==typeof t.forEach)t.forEach(e,o);else if(goog.isArrayLike(t)||goog.isString(t))goog.array.forEach(t,e,o);else for(var i=goog.structs.getKeys(t),n=goog.structs.getValues(t),r=n.length,g=0;g<r;g++)e.call(o,n[g],i&&i[g],t)},goog.structs.filter=function(t,e,o){if("function"==typeof t.filter)return t.filter(e,o);if(goog.isArrayLike(t)||goog.isString(t))return goog.array.filter(t,e,o);var i,n=goog.structs.getKeys(t),r=goog.structs.getValues(t),g=r.length;if(n){i={};for(var s=0;s<g;s++)e.call(o,r[s],n[s],t)&&(i[n[s]]=r[s])}else for(i=[],s=0;s<g;s++)e.call(o,r[s],void 0,t)&&i.push(r[s]);return i},goog.structs.map=function(t,e,o){if("function"==typeof t.map)return t.map(e,o);if(goog.isArrayLike(t)||goog.isString(t))return goog.array.map(t,e,o);var i,n=goog.structs.getKeys(t),r=goog.structs.getValues(t),g=r.length;if(n){i={};for(var s=0;s<g;s++)i[n[s]]=e.call(o,r[s],n[s],t)}else for(i=[],s=0;s<g;s++)i[s]=e.call(o,r[s],void 0,t);return i},goog.structs.some=function(t,e,o){if("function"==typeof t.some)return t.some(e,o);if(goog.isArrayLike(t)||goog.isString(t))return goog.array.some(t,e,o);for(var i=goog.structs.getKeys(t),n=goog.structs.getValues(t),r=n.length,g=0;g<r;g++)if(e.call(o,n[g],i&&i[g],t))return!0;return!1},goog.structs.every=function(t,e,o){if("function"==typeof t.every)return t.every(e,o);if(goog.isArrayLike(t)||goog.isString(t))return goog.array.every(t,e,o);for(var i=goog.structs.getKeys(t),n=goog.structs.getValues(t),r=n.length,g=0;g<r;g++)if(!e.call(o,n[g],i&&i[g],t))return!1;return!0},goog.structs.Map=function(t){this.map_={},this.keys_=[];var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var o=0;o<e;o+=2)this.set(arguments[o],arguments[o+1])}else t&&this.addAll(t)},goog.structs.Map.prototype.count_=0,goog.structs.Map.prototype.version_=0,goog.structs.Map.prototype.getCount=function(){return this.count_},goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var t=[],e=0;e<this.keys_.length;e++)t.push(this.map_[this.keys_[e]]);return t},goog.structs.Map.prototype.getKeys=function(){return this.cleanupKeysArray_(),this.keys_.concat()},goog.structs.Map.prototype.containsKey=function(t){return goog.structs.Map.hasKey_(this.map_,t)},goog.structs.Map.prototype.containsValue=function(t){for(var e=0;e<this.keys_.length;e++){var o=this.keys_[e];if(goog.structs.Map.hasKey_(this.map_,o)&&this.map_[o]==t)return!0}return!1},goog.structs.Map.prototype.equals=function(t,e){if(this===t)return!0;if(this.count_!=t.getCount())return!1;var o=e||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var i,n=0;i=this.keys_[n];n++)if(!o(this.get(i),t.get(i)))return!1;return!0},goog.structs.Map.defaultEquals=function(t,e){return t===e},goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_},goog.structs.Map.prototype.clear=function(){this.map_={},this.version_=this.count_=this.keys_.length=0},goog.structs.Map.prototype.remove=function(t){return!!goog.structs.Map.hasKey_(this.map_,t)&&(delete this.map_[t],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0)},goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var t=0,e=0;t<this.keys_.length;){var o=this.keys_[t];goog.structs.Map.hasKey_(this.map_,o)&&(this.keys_[e++]=o),t++}this.keys_.length=e}if(this.count_!=this.keys_.length){var i={};for(e=t=0;t<this.keys_.length;)o=this.keys_[t],goog.structs.Map.hasKey_(i,o)||(this.keys_[e++]=o,i[o]=1),t++;this.keys_.length=e}},goog.structs.Map.prototype.get=function(t,e){return goog.structs.Map.hasKey_(this.map_,t)?this.map_[t]:e},goog.structs.Map.prototype.set=function(t,e){goog.structs.Map.hasKey_(this.map_,t)||(this.count_++,this.keys_.push(t),this.version_++),this.map_[t]=e},goog.structs.Map.prototype.addAll=function(t){var e;t instanceof goog.structs.Map?(e=t.getKeys(),t=t.getValues()):(e=goog.object.getKeys(t),t=goog.object.getValues(t));for(var o=0;o<e.length;o++)this.set(e[o],t[o])},goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)},goog.structs.Map.prototype.transpose=function(){for(var t=new goog.structs.Map,e=0;e<this.keys_.length;e++){var o=this.keys_[e];t.set(this.map_[o],o)}return t},goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var t={},e=0;e<this.keys_.length;e++){var o=this.keys_[e];t[o]=this.map_[o]}return t},goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)},goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)},goog.structs.Map.prototype.__iterator__=function(t){this.cleanupKeysArray_();var e=0,o=this.keys_,i=this.map_,n=this.version_,r=this,g=new goog.iter.Iterator;return g.next=function(){for(;;){if(n!=r.version_)throw Error("The map has changed since the iterator was created");if(e>=o.length)throw goog.iter.StopIteration;var g=o[e++];return t?g:i[g]}},g},goog.structs.Map.hasKey_=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},goog.a11y={},goog.a11y.aria={},goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"},goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"},goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"},goog.a11y.aria.setRole=function(t,e){t.setAttribute("role",e)},goog.a11y.aria.getRole=function(t){return t.getAttribute("role")||""},goog.a11y.aria.setState=function(t,e,o){t.setAttribute("aria-"+e,o)},goog.a11y.aria.getState=function(t,e){var o=t.getAttribute("aria-"+e);return!0===o||!1===o?o?"true":"false":o?String(o):""},goog.a11y.aria.getActiveDescendant=function(t){var e=goog.a11y.aria.getState(t,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(t).getElementById(e)},goog.a11y.aria.setActiveDescendant=function(t,e){goog.a11y.aria.setState(t,goog.a11y.aria.State.ACTIVEDESCENDANT,e?e.id:"")},goog.a11y.aria.getLabel=function(t){return goog.a11y.aria.getState(t,goog.a11y.aria.State.LABEL)},goog.a11y.aria.setLabel=function(t,e){goog.a11y.aria.setState(t,goog.a11y.aria.State.LABEL,e)},goog.ui.Dialog=function(t,e,o){goog.ui.ModalPopup.call(this,e,o),this.class_=t||"modal-dialog",this.buttons_=goog.ui.Dialog.ButtonSet.createOkCancel()},goog.inherits(goog.ui.Dialog,goog.ui.ModalPopup),goog.ui.Dialog.prototype.escapeToCancel_=!0,goog.ui.Dialog.prototype.hasTitleCloseButton_=!0,goog.ui.Dialog.prototype.modal_=!0,goog.ui.Dialog.prototype.draggable_=!0,goog.ui.Dialog.prototype.backgroundElementOpacity_=.5,goog.ui.Dialog.prototype.title_="",goog.ui.Dialog.prototype.content_="",goog.ui.Dialog.prototype.dragger_=null,goog.ui.Dialog.prototype.disposeOnHide_=!1,goog.ui.Dialog.prototype.titleEl_=null,goog.ui.Dialog.prototype.titleTextEl_=null,goog.ui.Dialog.prototype.titleId_=null,goog.ui.Dialog.prototype.titleCloseEl_=null,goog.ui.Dialog.prototype.contentEl_=null,goog.ui.Dialog.prototype.buttonEl_=null,goog.ui.Dialog.prototype.preferredAriaRole_=goog.a11y.aria.Role.DIALOG,goog.ui.Dialog.prototype.getCssClass=function(){return this.class_},goog.ui.Dialog.prototype.setTitle=function(t){this.title_=t,this.titleTextEl_&&goog.dom.setTextContent(this.titleTextEl_,t)},goog.ui.Dialog.prototype.getTitle=function(){return this.title_},goog.ui.Dialog.prototype.setContent=function(t){this.content_=t,this.contentEl_&&(this.contentEl_.innerHTML=t)},goog.ui.Dialog.prototype.getContent=function(){return this.content_},goog.ui.Dialog.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_},goog.ui.Dialog.prototype.setPreferredAriaRole=function(t){this.preferredAriaRole_=t},goog.ui.Dialog.prototype.renderIfNoDom_=function(){this.getElement()||this.render()},goog.ui.Dialog.prototype.getContentElement=function(){return this.renderIfNoDom_(),this.contentEl_},goog.ui.Dialog.prototype.getTitleElement=function(){return this.renderIfNoDom_(),this.titleEl_},goog.ui.Dialog.prototype.getTitleTextElement=function(){return this.renderIfNoDom_(),this.titleTextEl_},goog.ui.Dialog.prototype.getTitleCloseElement=function(){return this.renderIfNoDom_(),this.titleCloseEl_},goog.ui.Dialog.prototype.getButtonElement=function(){return this.renderIfNoDom_(),this.buttonEl_},goog.ui.Dialog.prototype.getDialogElement=function(){return this.renderIfNoDom_(),this.getElement()},goog.ui.Dialog.prototype.getBackgroundElement=function(){return this.renderIfNoDom_(),goog.ui.Dialog.superClass_.getBackgroundElement.call(this)},goog.ui.Dialog.prototype.getBackgroundElementOpacity=function(){return this.backgroundElementOpacity_},goog.ui.Dialog.prototype.setBackgroundElementOpacity=function(t){this.backgroundElementOpacity_=t,this.getElement()&&(t=this.getBackgroundElement())&&goog.style.setOpacity(t,this.backgroundElementOpacity_)},goog.ui.Dialog.prototype.setModal=function(t){t!=this.modal_&&this.setModalInternal_(t)},goog.ui.Dialog.prototype.setModalInternal_=function(t){if(this.modal_=t,this.isInDocument()){var e=this.getDomHelper(),o=this.getBackgroundElement(),i=this.getBackgroundIframe();t?(i&&e.insertSiblingBefore(i,this.getElement()),e.insertSiblingBefore(o,this.getElement())):(e.removeNode(i),e.removeNode(o))}},goog.ui.Dialog.prototype.getModal=function(){return this.modal_},goog.ui.Dialog.prototype.getClass=function(){return this.getCssClass()},goog.ui.Dialog.prototype.setDraggable=function(t){this.draggable_=t,this.setDraggingEnabled_(t&&this.isInDocument())},goog.ui.Dialog.prototype.createDragger=function(){return new goog.fx.Dragger(this.getElement(),this.titleEl_)},goog.ui.Dialog.prototype.getDraggable=function(){return this.draggable_},goog.ui.Dialog.prototype.setDraggingEnabled_=function(t){this.getElement()&&goog.dom.classes.enable(this.titleEl_,this.class_+"-title-draggable",t),t&&!this.dragger_?(this.dragger_=this.createDragger(),goog.dom.classes.add(this.titleEl_,this.class_+"-title-draggable"),goog.events.listen(this.dragger_,goog.fx.Dragger.EventType.START,this.setDraggerLimits_,!1,this)):!t&&this.dragger_&&(this.dragger_.dispose(),this.dragger_=null)},goog.ui.Dialog.prototype.createDom=function(){goog.ui.Dialog.superClass_.createDom.call(this);var t=this.getElement();goog.asserts.assert(t,"getElement() returns null");var e=this.getDomHelper();this.titleEl_=e.createDom("div",{className:this.class_+"-title",id:this.getId()},this.titleTextEl_=e.createDom("span",this.class_+"-title-text",this.title_),this.titleCloseEl_=e.createDom("span",this.class_+"-title-close")),goog.dom.append(t,this.titleEl_,this.contentEl_=e.createDom("div",this.class_+"-content"),this.buttonEl_=e.createDom("div",this.class_+"-buttons")),this.titleId_=this.titleEl_.id,goog.a11y.aria.setRole(t,this.getPreferredAriaRole()),goog.a11y.aria.setState(t,goog.a11y.aria.State.LABELLEDBY,this.titleId_||""),this.content_&&(this.contentEl_.innerHTML=this.content_),goog.style.showElement(this.titleCloseEl_,this.hasTitleCloseButton_),this.buttons_&&this.buttons_.attachToElement(this.buttonEl_),goog.style.showElement(this.buttonEl_,!!this.buttons_),this.setBackgroundElementOpacity(this.backgroundElementOpacity_)},goog.ui.Dialog.prototype.decorateInternal=function(t){goog.ui.Dialog.superClass_.decorateInternal.call(this,t),t=this.getElement(),goog.asserts.assert(t,"The DOM element for dialog cannot be null.");var e=this.class_+"-content";(this.contentEl_=goog.dom.getElementsByTagNameAndClass(null,e,t)[0])?this.content_=this.contentEl_.innerHTML:(this.contentEl_=this.getDomHelper().createDom("div",e),this.content_&&(this.contentEl_.innerHTML=this.content_),t.appendChild(this.contentEl_));e=this.class_+"-title";var o=this.class_+"-title-text",i=this.class_+"-title-close";(this.titleEl_=goog.dom.getElementsByTagNameAndClass(null,e,t)[0])?(this.titleTextEl_=goog.dom.getElementsByTagNameAndClass(null,o,this.titleEl_)[0],this.titleCloseEl_=goog.dom.getElementsByTagNameAndClass(null,i,this.titleEl_)[0],this.titleEl_.id||(this.titleEl_.id=this.getId())):(this.titleEl_=this.getDomHelper().createDom("div",{className:e,id:this.getId()}),t.insertBefore(this.titleEl_,this.contentEl_)),this.titleId_=this.titleEl_.id,this.titleTextEl_?this.title_=goog.dom.getTextContent(this.titleTextEl_):(this.titleTextEl_=this.getDomHelper().createDom("span",o,this.title_),this.titleEl_.appendChild(this.titleTextEl_)),goog.a11y.aria.setState(t,goog.a11y.aria.State.LABELLEDBY,this.titleId_||""),this.titleCloseEl_||(this.titleCloseEl_=this.getDomHelper().createDom("span",i),this.titleEl_.appendChild(this.titleCloseEl_)),goog.style.showElement(this.titleCloseEl_,this.hasTitleCloseButton_),e=this.class_+"-buttons",(this.buttonEl_=goog.dom.getElementsByTagNameAndClass(null,e,t)[0])?(this.buttons_=new goog.ui.Dialog.ButtonSet(this.getDomHelper()),this.buttons_.decorate(this.buttonEl_)):(this.buttonEl_=this.getDomHelper().createDom("div",e),t.appendChild(this.buttonEl_),this.buttons_&&this.buttons_.attachToElement(this.buttonEl_),goog.style.showElement(this.buttonEl_,!!this.buttons_)),this.setBackgroundElementOpacity(this.backgroundElementOpacity_)},goog.ui.Dialog.prototype.enterDocument=function(){goog.ui.Dialog.superClass_.enterDocument.call(this),this.getHandler().listen(this.getElement(),goog.events.EventType.KEYDOWN,this.onKey_).listen(this.getElement(),goog.events.EventType.KEYPRESS,this.onKey_),this.getHandler().listen(this.buttonEl_,goog.events.EventType.CLICK,this.onButtonClick_),this.setDraggingEnabled_(this.draggable_),this.getHandler().listen(this.titleCloseEl_,goog.events.EventType.CLICK,this.onTitleCloseClick_);var t=this.getElement();goog.asserts.assert(t,"The DOM element for dialog cannot be null"),goog.a11y.aria.setRole(t,this.getPreferredAriaRole()),""!==this.titleTextEl_.id&&goog.a11y.aria.setState(t,goog.a11y.aria.State.LABELLEDBY,this.titleTextEl_.id),this.modal_||this.setModalInternal_(!1)},goog.ui.Dialog.prototype.exitDocument=function(){this.isVisible()&&this.setVisible(!1),this.setDraggingEnabled_(!1),goog.ui.Dialog.superClass_.exitDocument.call(this)},goog.ui.Dialog.prototype.setVisible=function(t){t!=this.isVisible()&&(this.isInDocument()||this.render(),goog.ui.Dialog.superClass_.setVisible.call(this,t))},goog.ui.Dialog.prototype.onShow=function(){goog.ui.Dialog.superClass_.onShow.call(this),this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_SHOW)},goog.ui.Dialog.prototype.onHide=function(){goog.ui.Dialog.superClass_.onHide.call(this),this.dispatchEvent(goog.ui.Dialog.EventType.AFTER_HIDE),this.disposeOnHide_&&this.dispose()},goog.ui.Dialog.prototype.focus=function(){if(goog.ui.Dialog.superClass_.focus.call(this),this.getButtonSet()){var t=this.getButtonSet().getDefault();if(t)for(var e,o=this.getDomHelper().getDocument(),i=this.buttonEl_.getElementsByTagName("button"),n=0;e=i[n];n++)if(e.name==t&&!e.disabled){try{if(goog.userAgent.WEBKIT||goog.userAgent.OPERA){var r=o.createElement("input");r.style.cssText="position:fixed;width:0;height:0;left:0;top:0;",this.getElement().appendChild(r),r.focus(),this.getElement().removeChild(r)}e.focus()}catch(g){}break}}},goog.ui.Dialog.prototype.setDraggerLimits_=function(t){var e=this.getDomHelper().getDocument();t=goog.dom.getWindow(e)||window,t=goog.dom.getViewportSize(t);var o=Math.max(e.body.scrollWidth,t.width),i=(e=Math.max(e.body.scrollHeight,t.height),goog.style.getSize(this.getElement()));"fixed"==goog.style.getComputedPosition(this.getElement())?this.dragger_.setLimits(new goog.math.Rect(0,0,Math.max(0,t.width-i.width),Math.max(0,t.height-i.height))):this.dragger_.setLimits(new goog.math.Rect(0,0,o-i.width,e-i.height))},goog.ui.Dialog.prototype.onTitleCloseClick_=function(t){if(this.hasTitleCloseButton_){var e=this.getButtonSet();(t=e&&e.getCancel())?(e=e.get(t),this.dispatchEvent(new goog.ui.Dialog.Event(t,e))&&this.setVisible(!1)):this.setVisible(!1)}},goog.ui.Dialog.prototype.getHasTitleCloseButton=function(){return this.hasTitleCloseButton_},goog.ui.Dialog.prototype.setHasTitleCloseButton=function(t){this.hasTitleCloseButton_=t,this.titleCloseEl_&&goog.style.showElement(this.titleCloseEl_,this.hasTitleCloseButton_)},goog.ui.Dialog.prototype.isEscapeToCancel=function(){return this.escapeToCancel_},goog.ui.Dialog.prototype.setEscapeToCancel=function(t){this.escapeToCancel_=t},goog.ui.Dialog.prototype.setDisposeOnHide=function(t){this.disposeOnHide_=t},goog.ui.Dialog.prototype.getDisposeOnHide=function(){return this.disposeOnHide_},goog.ui.Dialog.prototype.disposeInternal=function(){this.buttonEl_=this.titleCloseEl_=null,goog.ui.Dialog.superClass_.disposeInternal.call(this)},goog.ui.Dialog.prototype.setButtonSet=function(t){this.buttons_=t,this.buttonEl_&&(this.buttons_?this.buttons_.attachToElement(this.buttonEl_):this.buttonEl_.innerHTML="",goog.style.showElement(this.buttonEl_,!!this.buttons_))},goog.ui.Dialog.prototype.getButtonSet=function(){return this.buttons_},goog.ui.Dialog.prototype.onButtonClick_=function(t){if((t=this.findParentButton_(t.target))&&!t.disabled){t=t.name;var e=this.getButtonSet().get(t);this.dispatchEvent(new goog.ui.Dialog.Event(t,e))&&this.setVisible(!1)}},goog.ui.Dialog.prototype.findParentButton_=function(t){for(;null!=t&&t!=this.buttonEl_;){if("BUTTON"==t.tagName)return t;t=t.parentNode}return null},goog.ui.Dialog.prototype.onKey_=function(t){var e=!1,o=!1,i=this.getButtonSet(),n=t.target;if(t.type==goog.events.EventType.KEYDOWN)if(this.escapeToCancel_&&t.keyCode==goog.events.KeyCodes.ESC){var r=i&&i.getCancel();n="SELECT"==n.tagName&&!n.disabled;r&&!n?(o=!0,e=i.get(r),e=this.dispatchEvent(new goog.ui.Dialog.Event(r,e))):n||(e=!0)}else t.keyCode==goog.events.KeyCodes.TAB&&t.shiftKey&&n==this.getElement()&&this.setupBackwardTabWrap();else if(t.keyCode==goog.events.KeyCodes.ENTER){if("BUTTON"==n.tagName)r=n.name;else if(i){var g=i.getDefault(),s=g&&i.getButton(g);n=("TEXTAREA"==n.tagName||"SELECT"==n.tagName||"A"==n.tagName)&&!n.disabled;s&&!s.disabled&&!n&&(r=g)}r&&i&&(o=!0,e=this.dispatchEvent(new goog.ui.Dialog.Event(r,String(i.get(r)))))}(e||o)&&(t.stopPropagation(),t.preventDefault()),e&&this.setVisible(!1)},goog.ui.Dialog.Event=function(t,e){this.type=goog.ui.Dialog.EventType.SELECT,this.key=t,this.caption=e},goog.inherits(goog.ui.Dialog.Event,goog.events.Event),goog.ui.Dialog.SELECT_EVENT="dialogselect",goog.ui.Dialog.EventType={SELECT:"dialogselect",AFTER_HIDE:"afterhide",AFTER_SHOW:"aftershow"},goog.ui.Dialog.ButtonSet=function(t){this.dom_=t||goog.dom.getDomHelper(),goog.structs.Map.call(this)},goog.inherits(goog.ui.Dialog.ButtonSet,goog.structs.Map),goog.ui.Dialog.ButtonSet.prototype.class_="goog-buttonset",goog.ui.Dialog.ButtonSet.prototype.defaultButton_=null,goog.ui.Dialog.ButtonSet.prototype.element_=null,goog.ui.Dialog.ButtonSet.prototype.cancelButton_=null,goog.ui.Dialog.ButtonSet.prototype.set=function(t,e,o,i){return goog.structs.Map.prototype.set.call(this,t,e),
o&&(this.defaultButton_=t),i&&(this.cancelButton_=t),this},goog.ui.Dialog.ButtonSet.prototype.addButton=function(t,e,o){return this.set(t.key,t.caption,e,o)},goog.ui.Dialog.ButtonSet.prototype.attachToElement=function(t){this.element_=t,this.render()},goog.ui.Dialog.ButtonSet.prototype.render=function(){if(this.element_){this.element_.innerHTML="";var t=goog.dom.getDomHelper(this.element_);goog.structs.forEach(this,function(e,o){var i=t.createDom("button",{name:o},e);o==this.defaultButton_&&(i.className=this.class_+"-default"),this.element_.appendChild(i)},this)}},goog.ui.Dialog.ButtonSet.prototype.decorate=function(t){if(t&&t.nodeType==goog.dom.NodeType.ELEMENT){this.element_=t,t=this.element_.getElementsByTagName("button");for(var e,o,i,n=0;e=t[n];n++)if(o=e.name||e.id,i=goog.dom.getTextContent(e)||e.value,o){var r=0==n;this.set(o,i,r,e.name==goog.ui.Dialog.DefaultButtonKeys.CANCEL),r&&goog.dom.classes.add(e,this.class_+"-default")}}},goog.ui.Dialog.ButtonSet.prototype.getElement=function(){return this.element_},goog.ui.Dialog.ButtonSet.prototype.getDomHelper=function(){return this.dom_},goog.ui.Dialog.ButtonSet.prototype.setDefault=function(t){this.defaultButton_=t},goog.ui.Dialog.ButtonSet.prototype.getDefault=function(){return this.defaultButton_},goog.ui.Dialog.ButtonSet.prototype.setCancel=function(t){this.cancelButton_=t},goog.ui.Dialog.ButtonSet.prototype.getCancel=function(){return this.cancelButton_},goog.ui.Dialog.ButtonSet.prototype.getButton=function(t){for(var e,o=this.getAllButtons(),i=0;e=o[i];i++)if(e.name==t||e.id==t)return e;return null},goog.ui.Dialog.ButtonSet.prototype.getAllButtons=function(){return this.element_.getElementsByTagName(goog.dom.TagName.BUTTON)},goog.ui.Dialog.ButtonSet.prototype.setButtonEnabled=function(t,e){var o=this.getButton(t);o&&(o.disabled=!e)},goog.ui.Dialog.ButtonSet.prototype.setAllButtonsEnabled=function(t){for(var e,o=this.getAllButtons(),i=0;e=o[i];i++)e.disabled=!t},goog.ui.Dialog.DefaultButtonKeys={OK:"ok",CANCEL:"cancel",YES:"yes",NO:"no",SAVE:"save",CONTINUE:"continue"},goog.ui.Dialog.MSG_DIALOG_OK_=goog.getMsg("OK"),goog.ui.Dialog.MSG_DIALOG_CANCEL_=goog.getMsg("Cancel"),goog.ui.Dialog.MSG_DIALOG_YES_=goog.getMsg("Yes"),goog.ui.Dialog.MSG_DIALOG_NO_=goog.getMsg("No"),goog.ui.Dialog.MSG_DIALOG_SAVE_=goog.getMsg("Save"),goog.ui.Dialog.MSG_DIALOG_CONTINUE_=goog.getMsg("Continue"),goog.ui.Dialog.DefaultButtonCaptions={OK:goog.ui.Dialog.MSG_DIALOG_OK_,CANCEL:goog.ui.Dialog.MSG_DIALOG_CANCEL_,YES:goog.ui.Dialog.MSG_DIALOG_YES_,NO:goog.ui.Dialog.MSG_DIALOG_NO_,SAVE:goog.ui.Dialog.MSG_DIALOG_SAVE_,CONTINUE:goog.ui.Dialog.MSG_DIALOG_CONTINUE_},goog.ui.Dialog.ButtonSet.DefaultButtons={OK:{key:goog.ui.Dialog.DefaultButtonKeys.OK,caption:goog.ui.Dialog.DefaultButtonCaptions.OK},CANCEL:{key:goog.ui.Dialog.DefaultButtonKeys.CANCEL,caption:goog.ui.Dialog.DefaultButtonCaptions.CANCEL},YES:{key:goog.ui.Dialog.DefaultButtonKeys.YES,caption:goog.ui.Dialog.DefaultButtonCaptions.YES},NO:{key:goog.ui.Dialog.DefaultButtonKeys.NO,caption:goog.ui.Dialog.DefaultButtonCaptions.NO},SAVE:{key:goog.ui.Dialog.DefaultButtonKeys.SAVE,caption:goog.ui.Dialog.DefaultButtonCaptions.SAVE},CONTINUE:{key:goog.ui.Dialog.DefaultButtonKeys.CONTINUE,caption:goog.ui.Dialog.DefaultButtonCaptions.CONTINUE}},goog.ui.Dialog.ButtonSet.createOk=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0,!0)},goog.ui.Dialog.ButtonSet.createOkCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.OK,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)},goog.ui.Dialog.ButtonSet.createYesNo=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!1,!0)},goog.ui.Dialog.ButtonSet.createYesNoCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.YES).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.NO,!0).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!1,!0)},goog.ui.Dialog.ButtonSet.createContinueSaveCancel=function(){return(new goog.ui.Dialog.ButtonSet).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CONTINUE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.SAVE).addButton(goog.ui.Dialog.ButtonSet.DefaultButtons.CANCEL,!0,!0)},"undefined"!=typeof document&&(goog.ui.Dialog.ButtonSet.OK=goog.ui.Dialog.ButtonSet.createOk(),goog.ui.Dialog.ButtonSet.OK_CANCEL=goog.ui.Dialog.ButtonSet.createOkCancel(),goog.ui.Dialog.ButtonSet.YES_NO=goog.ui.Dialog.ButtonSet.createYesNo(),goog.ui.Dialog.ButtonSet.YES_NO_CANCEL=goog.ui.Dialog.ButtonSet.createYesNoCancel(),goog.ui.Dialog.ButtonSet.CONTINUE_SAVE_CANCEL=goog.ui.Dialog.ButtonSet.createContinueSaveCancel()),goog.graphics={},goog.graphics.Font=function(t,e){this.size=t,this.family=e},goog.graphics.Font.prototype.bold=!1,goog.graphics.Font.prototype.italic=!1,goog.events.InputHandler=function(t){goog.events.EventTarget.call(this),this.element_=t,t=goog.userAgent.IE||goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("531")&&"TEXTAREA"==t.tagName,this.eventHandler_=new goog.events.EventHandler(this),this.eventHandler_.listen(this.element_,t?["keydown","paste","cut","drop","input"]:"input",this)},goog.inherits(goog.events.InputHandler,goog.events.EventTarget),goog.events.InputHandler.EventType={INPUT:"input"},goog.events.InputHandler.prototype.timer_=null,goog.events.InputHandler.prototype.handleEvent=function(t){if("input"==t.type)this.cancelTimerIfSet_(),(!goog.userAgent.OPERA||this.element_==goog.dom.getOwnerDocument(this.element_).activeElement)&&this.dispatchEvent(this.createInputEvent_(t));else if("keydown"!=t.type||goog.events.KeyCodes.isTextModifyingKeyEvent(t)){var e="keydown"==t.type?this.element_.value:null;goog.userAgent.IE&&t.keyCode==goog.events.KeyCodes.WIN_IME&&(e=null);var o=this.createInputEvent_(t);this.cancelTimerIfSet_(),this.timer_=goog.Timer.callOnce(function(){this.timer_=null,this.element_.value!=e&&this.dispatchEvent(o)},0,this)}},goog.events.InputHandler.prototype.cancelTimerIfSet_=function(){null!=this.timer_&&(goog.Timer.clear(this.timer_),this.timer_=null)},goog.events.InputHandler.prototype.createInputEvent_=function(t){return t=new goog.events.BrowserEvent(t.getBrowserEvent()),t.type=goog.events.InputHandler.EventType.INPUT,t},goog.events.InputHandler.prototype.disposeInternal=function(){goog.events.InputHandler.superClass_.disposeInternal.call(this),this.eventHandler_.dispose(),this.cancelTimerIfSet_(),delete this.element_},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3)),goog.i18n.bidi.Format={LRE:"\u202a",RLE:"\u202b",PDF:"\u202c",LRM:"\u200e",RLM:"\u200f"},goog.i18n.bidi.Dir={RTL:-1,UNKNOWN:0,LTR:1},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(t){return"number"==typeof t?0<t?goog.i18n.bidi.Dir.LTR:0>t?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.UNKNOWN:t?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02b8\u0300-\u0590\u0800-\u1fff\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff",goog.i18n.bidi.rtlChars_="\u0591-\u07ff\ufb1d-\ufdff\ufe70-\ufefc",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(t,e){return e?t.replace(goog.i18n.bidi.htmlSkipReg_," "):t},goog.i18n.bidi.rtlCharReg_=RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(t,e){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(t,e){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.ltrRe_=RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(t){return goog.i18n.bidi.rtlRe_.test(t)},goog.i18n.bidi.isLtrChar=function(t){return goog.i18n.bidi.ltrRe_.test(t)},goog.i18n.bidi.isNeutralChar=function(t){return!goog.i18n.bidi.isLtrChar(t)&&!goog.i18n.bidi.isRtlChar(t)},goog.i18n.bidi.ltrDirCheckRe_=RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(t,e){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(t,e){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(t,e){return t=goog.i18n.bidi.stripHtmlIfNeeded_(t,e),goog.i18n.bidi.isRequiredLtrRe_.test(t)||!goog.i18n.bidi.hasAnyLtr(t)&&!goog.i18n.bidi.hasAnyRtl(t)},goog.i18n.bidi.ltrExitDirCheckRe_=RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(t,e){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(t,e){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(t,e))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=RegExp("^(ar|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i"),goog.i18n.bidi.isRtlLanguage=function(t){return goog.i18n.bidi.rtlLocalesRe_.test(t)},goog.i18n.bidi.bracketGuardHtmlRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(&lt;.*?(&gt;)+)/g,goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInHtml=function(t,e){return(void 0===e?goog.i18n.bidi.hasAnyRtl(t):e)?t.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=rtl>$&</span>"):t.replace(goog.i18n.bidi.bracketGuardHtmlRe_,"<span dir=ltr>$&</span>")},goog.i18n.bidi.guardBracketInText=function(t,e){var o=(void 0===e?goog.i18n.bidi.hasAnyRtl(t):e)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return t.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)},goog.i18n.bidi.enforceRtlInHtml=function(t){return"<"==t.charAt(0)?t.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+t+"</span>"},goog.i18n.bidi.enforceRtlInText=function(t){return goog.i18n.bidi.Format.RLE+t+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(t){return"<"==t.charAt(0)?t.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+t+"</span>"},goog.i18n.bidi.enforceLtrInText=function(t){return goog.i18n.bidi.Format.LRE+t+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(t){return t.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(t){return t.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05f4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05f3")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/\d/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(t,e){for(var o=0,i=0,n=!1,r=goog.i18n.bidi.stripHtmlIfNeeded_(t,e).split(goog.i18n.bidi.wordSeparatorRe_),g=0;g<r.length;g++){var s=r[g];goog.i18n.bidi.startsWithRtl(s)?(o++,i++):goog.i18n.bidi.isRequiredLtrRe_.test(s)?n=!0:goog.i18n.bidi.hasAnyLtr(s)?i++:goog.i18n.bidi.hasNumeralsRe_.test(s)&&(n=!0)}return 0==i?n?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.UNKNOWN:o/i>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(t,e){return goog.i18n.bidi.estimateDirection(t,e)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(t,e){t&&(e=goog.i18n.bidi.toDir(e))!=goog.i18n.bidi.Dir.UNKNOWN&&(t.style.textAlign=e==goog.i18n.bidi.Dir.RTL?"right":"left",t.dir=e==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.ui.BidiInput=function(t){goog.ui.Component.call(this,t)},goog.inherits(goog.ui.BidiInput,goog.ui.Component),goog.ui.BidiInput.prototype.inputHandler_=null,goog.ui.BidiInput.prototype.decorateInternal=function(t){goog.ui.BidiInput.superClass_.decorateInternal.call(this,t),this.init_()},goog.ui.BidiInput.prototype.createDom=function(){this.setElementInternal(this.getDomHelper().createDom("input",{type:"text"})),this.init_()},goog.ui.BidiInput.prototype.init_=function(){this.setDirection_(),this.inputHandler_=new goog.events.InputHandler(this.getElement()),goog.events.listen(this.inputHandler_,goog.events.InputHandler.EventType.INPUT,this.setDirection_,!1,this)},goog.ui.BidiInput.prototype.setDirection_=function(){var t=this.getElement();switch(goog.i18n.bidi.estimateDirection(t.value)){case goog.i18n.bidi.Dir.LTR:t.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:t.dir="rtl";break;default:t.removeAttribute("dir")}},goog.ui.BidiInput.prototype.getDirection=function(){var t=this.getElement().dir;return""==t&&(t=null),t},goog.ui.BidiInput.prototype.setValue=function(t){this.getElement().value=t,this.setDirection_()},goog.ui.BidiInput.prototype.getValue=function(){return this.getElement().value},goog.ui.BidiInput.prototype.disposeInternal=function(){this.inputHandler_&&(goog.events.removeAll(this.inputHandler_),this.inputHandler_.dispose(),this.inputHandler_=null,goog.ui.BidiInput.superClass_.disposeInternal.call(this))},goog.ui.ControlRenderer=function(){},goog.addSingletonGetter(goog.ui.ControlRenderer),goog.ui.ControlRenderer.getCustomRenderer=function(t,e){var o=new t;return o.getCssClass=function(){return e},o},goog.ui.ControlRenderer.CSS_CLASS="goog-control",goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[],goog.ui.ControlRenderer.prototype.getAriaRole=function(){},goog.ui.ControlRenderer.prototype.createDom=function(t){var e=t.getDomHelper().createDom("div",this.getClassNames(t).join(" "),t.getContent());return this.setAriaStates(t,e),e},goog.ui.ControlRenderer.prototype.getContentElement=function(t){return t},goog.ui.ControlRenderer.prototype.enableClassName=function(t,e,o){if(t=t.getElement?t.getElement():t)if(goog.userAgent.IE&&!goog.userAgent.isVersion("7")){var i=this.getAppliedCombinedClassNames_(goog.dom.classes.get(t),e);i.push(e),goog.partial(o?goog.dom.classes.add:goog.dom.classes.remove,t).apply(null,i)}else goog.dom.classes.enable(t,e,o)},goog.ui.ControlRenderer.prototype.enableExtraClassName=function(t,e,o){this.enableClassName(t,e,o)},goog.ui.ControlRenderer.prototype.canDecorate=function(){return!0},goog.ui.ControlRenderer.prototype.decorate=function(t,e){e.id&&t.setId(e.id);(s=this.getContentElement(e))&&s.firstChild?t.setContentInternal(s.firstChild.nextSibling?goog.array.clone(s.childNodes):s.firstChild):t.setContentInternal(null);var o=0,i=this.getCssClass(),n=this.getStructuralCssClass(),r=!1,g=!1,s=!1,a=goog.dom.classes.get(e);goog.array.forEach(a,function(t){r||t!=i?g||t!=n?o|=this.getStateFromClass(t):g=!0:(r=!0,n==i&&(g=!0))},this),t.setStateInternal(o),r||(a.push(i),n==i&&(g=!0)),g||a.push(n);var l=t.getExtraClassNames();if(l&&a.push.apply(a,l),goog.userAgent.IE&&!goog.userAgent.isVersion("7")){var h=this.getAppliedCombinedClassNames_(a);0<h.length&&(a.push.apply(a,h),s=!0)}return(!r||!g||l||s)&&goog.dom.classes.set(e,a.join(" ")),this.setAriaStates(t,e),e},goog.ui.ControlRenderer.prototype.initializeDom=function(t){t.isRightToLeft()&&this.setRightToLeft(t.getElement(),!0),t.isEnabled()&&this.setFocusable(t,t.isVisible())},goog.ui.ControlRenderer.prototype.setAriaRole=function(t,e){var o=e||this.getAriaRole();o&&(goog.asserts.assert(t,"The element passed as a first parameter cannot be null."),goog.a11y.aria.setRole(t,o))},goog.ui.ControlRenderer.prototype.setAriaStates=function(t,e){goog.asserts.assert(t),goog.asserts.assert(e),t.isVisible()||goog.a11y.aria.setState(e,goog.a11y.aria.State.HIDDEN,!t.isVisible()),t.isEnabled()||this.updateAriaState(e,goog.ui.Component.State.DISABLED,!t.isEnabled()),t.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(e,goog.ui.Component.State.SELECTED,t.isSelected()),t.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(e,goog.ui.Component.State.CHECKED,t.isChecked()),t.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(e,goog.ui.Component.State.OPENED,t.isOpen())},goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(t,e){goog.style.setUnselectable(t,!e,!goog.userAgent.IE&&!goog.userAgent.OPERA)},goog.ui.ControlRenderer.prototype.setRightToLeft=function(t,e){this.enableClassName(t,this.getStructuralCssClass()+"-rtl",e)},goog.ui.ControlRenderer.prototype.isFocusable=function(t){var e;return!(!t.isSupportedState(goog.ui.Component.State.FOCUSED)||!(e=t.getKeyEventTarget()))&&goog.dom.isFocusableTabIndex(e)},goog.ui.ControlRenderer.prototype.setFocusable=function(t,e){var o;if(t.isSupportedState(goog.ui.Component.State.FOCUSED)&&(o=t.getKeyEventTarget())){if(!e&&t.isFocused()){try{o.blur()}catch(i){}t.isFocused()&&t.handleBlur(null)}goog.dom.isFocusableTabIndex(o)!=e&&goog.dom.setFocusableTabIndex(o,e)}},goog.ui.ControlRenderer.prototype.setVisible=function(t,e){goog.style.showElement(t,e),t&&goog.a11y.aria.setState(t,goog.a11y.aria.State.HIDDEN,!e)},goog.ui.ControlRenderer.prototype.setState=function(t,e,o){var i=t.getElement();if(i){var n=this.getClassForState(e);n&&this.enableClassName(t,n,o),this.updateAriaState(i,e,o)}},goog.ui.ControlRenderer.prototype.updateAriaState=function(t,e,o){goog.ui.ControlRenderer.ARIA_STATE_MAP_||(goog.ui.ControlRenderer.ARIA_STATE_MAP_=goog.object.create(goog.ui.Component.State.DISABLED,goog.a11y.aria.State.DISABLED,goog.ui.Component.State.SELECTED,goog.a11y.aria.State.SELECTED,goog.ui.Component.State.CHECKED,goog.a11y.aria.State.CHECKED,goog.ui.Component.State.OPENED,goog.a11y.aria.State.EXPANDED)),(e=goog.ui.ControlRenderer.ARIA_STATE_MAP_[e])&&(goog.asserts.assert(t,"The element passed as a first parameter cannot be null."),goog.a11y.aria.setState(t,e,o))},goog.ui.ControlRenderer.prototype.setContent=function(t,e){var o=this.getContentElement(t);if(o&&(goog.dom.removeChildren(o),e))if(goog.isString(e))goog.dom.setTextContent(o,e);else{var i=function(t){if(t){var e=goog.dom.getOwnerDocument(o);o.appendChild(goog.isString(t)?e.createTextNode(t):t)}};goog.isArray(e)?goog.array.forEach(e,i):!goog.isArrayLike(e)||"nodeType"in e?i(e):goog.array.forEach(goog.array.clone(e),i)}},goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(t){return t.getElement()},goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS},goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]},goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()},goog.ui.ControlRenderer.prototype.getClassNames=function(t){var e=this.getCssClass(),o=[e],i=this.getStructuralCssClass();return i!=e&&o.push(i),e=this.getClassNamesForState(t.getState()),o.push.apply(o,e),(t=t.getExtraClassNames())&&o.push.apply(o,t),goog.userAgent.IE&&!goog.userAgent.isVersion("7")&&o.push.apply(o,this.getAppliedCombinedClassNames_(o)),o},goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(t,e){var o=[];return e&&(t=t.concat([e])),goog.array.forEach(this.getIe6ClassCombinations(),function(i){goog.array.every(i,goog.partial(goog.array.contains,t))&&(!e||goog.array.contains(i,e))&&o.push(i.join("_"))}),o},goog.ui.ControlRenderer.prototype.getClassNamesForState=function(t){for(var e=[];t;){var o=t&-t;e.push(this.getClassForState(o)),t&=~o}return e},goog.ui.ControlRenderer.prototype.getClassForState=function(t){return this.classByState_||this.createClassByStateMap_(),this.classByState_[t]},goog.ui.ControlRenderer.prototype.getStateFromClass=function(t){return this.stateByClass_||this.createStateByClassMap_(),t=parseInt(this.stateByClass_[t],10),isNaN(t)?0:t},goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var t=this.getStructuralCssClass();this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,t+"-disabled",goog.ui.Component.State.HOVER,t+"-hover",goog.ui.Component.State.ACTIVE,t+"-active",goog.ui.Component.State.SELECTED,t+"-selected",goog.ui.Component.State.CHECKED,t+"-checked",goog.ui.Component.State.FOCUSED,t+"-focused",goog.ui.Component.State.OPENED,t+"-open")},goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_(),this.stateByClass_=goog.object.transpose(this.classByState_)},goog.ui.CheckboxRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.CheckboxRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.CheckboxRenderer),goog.ui.CheckboxRenderer.CSS_CLASS="goog-checkbox",goog.ui.CheckboxRenderer.prototype.createDom=function(t){var e=t.getDomHelper().createDom("span",this.getClassNames(t).join(" "));return t=t.getChecked(),this.setCheckboxState(e,t),e},goog.ui.CheckboxRenderer.prototype.decorate=function(t,e){e=goog.ui.CheckboxRenderer.superClass_.decorate.call(this,t,e);var o=goog.dom.classes.get(e),i=goog.ui.Checkbox.State.UNCHECKED;return goog.array.contains(o,this.getClassForCheckboxState(goog.ui.Checkbox.State.UNDETERMINED))?i=goog.ui.Checkbox.State.UNDETERMINED:goog.array.contains(o,this.getClassForCheckboxState(goog.ui.Checkbox.State.CHECKED))?i=goog.ui.Checkbox.State.CHECKED:goog.array.contains(o,this.getClassForCheckboxState(goog.ui.Checkbox.State.UNCHECKED))&&(i=goog.ui.Checkbox.State.UNCHECKED),t.setCheckedInternal(i),goog.asserts.assert(e,"The element cannot be null."),goog.a11y.aria.setState(e,goog.a11y.aria.State.CHECKED,this.ariaStateFromCheckState_(i)),e},goog.ui.CheckboxRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.CHECKBOX},goog.ui.CheckboxRenderer.prototype.setCheckboxState=function(t,e){if(t){var o=this.getClassForCheckboxState(e);goog.asserts.assert(o),goog.dom.classes.has(t,o)||(goog.object.forEach(goog.ui.Checkbox.State,function(e){e=this.getClassForCheckboxState(e),goog.dom.classes.enable(t,e,e==o)},this),goog.a11y.aria.setState(t,goog.a11y.aria.State.CHECKED,this.ariaStateFromCheckState_(e)))}},goog.ui.CheckboxRenderer.prototype.ariaStateFromCheckState_=function(t){return t==goog.ui.Checkbox.State.UNDETERMINED?"mixed":t==goog.ui.Checkbox.State.CHECKED?"true":"false"},goog.ui.CheckboxRenderer.prototype.getCssClass=function(){return goog.ui.CheckboxRenderer.CSS_CLASS},goog.ui.CheckboxRenderer.prototype.getClassForCheckboxState=function(t){var e=this.getStructuralCssClass();if(t==goog.ui.Checkbox.State.CHECKED)return e+"-checked";if(t==goog.ui.Checkbox.State.UNCHECKED)return e+"-unchecked";if(t==goog.ui.Checkbox.State.UNDETERMINED)return e+"-undetermined";throw Error("Invalid checkbox state: "+t)},goog.ui.registry={},goog.ui.registry.getDefaultRenderer=function(t){for(var e;t&&(e=goog.getUid(t),!(e=goog.ui.registry.defaultRenderers_[e]));)t=t.superClass_?t.superClass_.constructor:null;return e?goog.isFunction(e.getInstance)?e.getInstance():new e:null},goog.ui.registry.setDefaultRenderer=function(t,e){if(!goog.isFunction(t))throw Error("Invalid component class "+t);if(!goog.isFunction(e))throw Error("Invalid renderer class "+e);var o=goog.getUid(t);goog.ui.registry.defaultRenderers_[o]=e},goog.ui.registry.getDecoratorByClassName=function(t){return t in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[t]():null},goog.ui.registry.setDecoratorByClassName=function(t,e){if(!t)throw Error("Invalid class name "+t);if(!goog.isFunction(e))throw Error("Invalid decorator function "+e);goog.ui.registry.decoratorFunctions_[t]=e},goog.ui.registry.getDecorator=function(t){for(var e=goog.dom.classes.get(t),o=0,i=e.length;o<i;o++)if(t=goog.ui.registry.getDecoratorByClassName(e[o]))return t;return null},goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={}},goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={},goog.ui.decorate=function(t){var e=goog.ui.registry.getDecorator(t);return e&&e.decorate(t),e},goog.events.KeyHandler=function(t,e){goog.events.EventTarget.call(this),t&&this.attach(t,e)},goog.inherits(goog.events.KeyHandler,goog.events.EventTarget),goog.events.KeyHandler.prototype.element_=null,goog.events.KeyHandler.prototype.keyPressKey_=null,goog.events.KeyHandler.prototype.keyDownKey_=null,goog.events.KeyHandler.prototype.keyUpKey_=null,goog.events.KeyHandler.prototype.lastKey_=-1,goog.events.KeyHandler.prototype.keyCode_=-1,goog.events.KeyHandler.prototype.altKey_=!1,goog.events.KeyHandler.EventType={KEY:"key"},goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("525"),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO,goog.events.KeyHandler.prototype.handleKeyDown_=function(t){goog.userAgent.WEBKIT&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!t.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!t.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!t.metaKey)&&(this.keyCode_=this.lastKey_=-1),-1==this.lastKey_&&(t.ctrlKey&&t.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:t.altKey&&t.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:t.metaKey&&t.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META)),goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(t.keyCode,this.lastKey_,t.shiftKey,t.ctrlKey,t.altKey)?this.handleEvent(t):(this.keyCode_=goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(t.keyCode):t.keyCode,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=t.altKey))},goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.handleKeyup_=function(t){this.resetState(),this.altKey_=t.altKey},goog.events.KeyHandler.prototype.handleEvent=function(t){var e,o,i=t.getBrowserEvent(),n=i.altKey;goog.userAgent.IE&&t.type==goog.events.EventType.KEYPRESS?(e=this.keyCode_,o=e!=goog.events.KeyCodes.ENTER&&e!=goog.events.KeyCodes.ESC?i.keyCode:0):goog.userAgent.WEBKIT&&t.type==goog.events.EventType.KEYPRESS?(e=this.keyCode_,o=0<=i.charCode&&63232>i.charCode&&goog.events.KeyCodes.isCharacterKey(e)?i.charCode:0):goog.userAgent.OPERA?(e=this.keyCode_,o=goog.events.KeyCodes.isCharacterKey(e)?i.keyCode:0):(e=i.keyCode||this.keyCode_,o=i.charCode||0,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(n=this.altKey_),goog.userAgent.MAC&&o==goog.events.KeyCodes.QUESTION_MARK&&e==goog.events.KeyCodes.WIN_KEY&&(e=goog.events.KeyCodes.SLASH));var r=e,g=i.keyIdentifier;e?63232<=e&&e in goog.events.KeyHandler.safariKey_?r=goog.events.KeyHandler.safariKey_[e]:25==e&&t.shiftKey&&(r=9):g&&g in goog.events.KeyHandler.keyIdentifier_&&(r=goog.events.KeyHandler.keyIdentifier_[g]),t=r==this.lastKey_,this.lastKey_=r,(i=new goog.events.KeyEvent(r,o,t,i)).altKey=n,this.dispatchEvent(i)},goog.events.KeyHandler.prototype.getElement=function(){return this.element_},goog.events.KeyHandler.prototype.attach=function(t,e){this.keyUpKey_&&this.detach(),this.element_=t,this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,e),this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,e,this),this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,e,this)},goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null),this.element_=null,this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this),this.detach()},goog.events.KeyEvent=function(t,e,o,i){goog.events.BrowserEvent.call(this,i),this.type=goog.events.KeyHandler.EventType.KEY,this.keyCode=t,this.charCode=e,this.repeat=o},goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent),goog.ui.Control=function(t,e,o){goog.ui.Component.call(this,o),this.renderer_=e||goog.ui.registry.getDefaultRenderer(this.constructor),this.setContentInternal(t)},goog.inherits(goog.ui.Control,goog.ui.Component),goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName,goog.ui.Control.getDecorator=goog.ui.registry.getDecorator,goog.ui.Control.decorate=goog.ui.decorate,goog.ui.Control.prototype.content_=null,goog.ui.Control.prototype.state_=0,goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED,goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL,goog.ui.Control.prototype.statesWithTransitionEvents_=0,goog.ui.Control.prototype.visible_=!0,goog.ui.Control.prototype.extraClassNames_=null,goog.ui.Control.prototype.handleMouseEvents_=!0,goog.ui.Control.prototype.allowTextSelection_=!1,goog.ui.Control.prototype.preferredAriaRole_=null,goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_},goog.ui.Control.prototype.setHandleMouseEvents=function(t){this.isInDocument()&&t!=this.handleMouseEvents_&&this.enableMouseEventHandling_(t),this.handleMouseEvents_=t},goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)},goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)},goog.ui.Control.prototype.getRenderer=function(){return this.renderer_},goog.ui.Control.prototype.setRenderer=function(t){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null),this.renderer_=t},goog.ui.Control.prototype.getExtraClassNames=function(){
return this.extraClassNames_},goog.ui.Control.prototype.addClassName=function(t){t&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,t)||this.extraClassNames_.push(t):this.extraClassNames_=[t],this.renderer_.enableExtraClassName(this,t,!0))},goog.ui.Control.prototype.removeClassName=function(t){t&&this.extraClassNames_&&(goog.array.remove(this.extraClassNames_,t),0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,t,!1))},goog.ui.Control.prototype.enableClassName=function(t,e){e?this.addClassName(t):this.removeClassName(t)},goog.ui.Control.prototype.createDom=function(){var t=this.renderer_.createDom(this);this.setElementInternal(t),this.renderer_.setAriaRole(t,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(t,!1),this.isVisible()||this.renderer_.setVisible(t,!1)},goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_},goog.ui.Control.prototype.setPreferredAriaRole=function(t){this.preferredAriaRole_=t},goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())},goog.ui.Control.prototype.canDecorate=function(t){return this.renderer_.canDecorate(t)},goog.ui.Control.prototype.decorateInternal=function(t){t=this.renderer_.decorate(this,t),this.setElementInternal(t),this.renderer_.setAriaRole(t,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(t,!1),this.visible_="none"!=t.style.display},goog.ui.Control.prototype.enterDocument=function(){if(goog.ui.Control.superClass_.enterDocument.call(this),this.renderer_.initializeDom(this),this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var t=this.getKeyEventTarget();if(t){var e=this.getKeyHandler();e.attach(t),this.getHandler().listen(e,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(t,goog.events.EventType.FOCUS,this.handleFocus).listen(t,goog.events.EventType.BLUR,this.handleBlur)}}},goog.ui.Control.prototype.enableMouseEventHandling_=function(t){var e=this.getHandler(),o=this.getElement();t?(e.listen(o,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(o,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(o,goog.events.EventType.MOUSEUP,this.handleMouseUp).listen(o,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&e.listen(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&e.listen(o,goog.events.EventType.DBLCLICK,this.handleDblClick)):(e.unlisten(o,goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(o,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).unlisten(o,goog.events.EventType.MOUSEUP,this.handleMouseUp).unlisten(o,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.handleContextMenu!=goog.nullFunction&&e.unlisten(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&e.unlisten(o,goog.events.EventType.DBLCLICK,this.handleDblClick))},goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this),this.keyHandler_&&this.keyHandler_.detach(),this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)},goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this),this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_),delete this.renderer_,this.extraClassNames_=this.content_=null},goog.ui.Control.prototype.getContent=function(){return this.content_},goog.ui.Control.prototype.setContent=function(t){this.renderer_.setContent(this.getElement(),t),this.setContentInternal(t)},goog.ui.Control.prototype.setContentInternal=function(t){this.content_=t},goog.ui.Control.prototype.getCaption=function(){var t=this.getContent();return t?(t=goog.isString(t)?t:goog.isArray(t)?goog.array.map(t,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(t),goog.string.collapseBreakingSpaces(t)):""},goog.ui.Control.prototype.setCaption=function(t){this.setContent(t)},goog.ui.Control.prototype.setRightToLeft=function(t){goog.ui.Control.superClass_.setRightToLeft.call(this,t);var e=this.getElement();e&&this.renderer_.setRightToLeft(e,t)},goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_},goog.ui.Control.prototype.setAllowTextSelection=function(t){this.allowTextSelection_=t;var e=this.getElement();e&&this.renderer_.setAllowTextSelection(e,t)},goog.ui.Control.prototype.isVisible=function(){return this.visible_},goog.ui.Control.prototype.setVisible=function(t,e){if(e||this.visible_!=t&&this.dispatchEvent(t?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){var o=this.getElement();return o&&this.renderer_.setVisible(o,t),this.isEnabled()&&this.renderer_.setFocusable(this,t),this.visible_=t,!0}return!1},goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)},goog.ui.Control.prototype.isParentDisabled_=function(){var t=this.getParent();return!!t&&"function"==typeof t.isEnabled&&!t.isEnabled()},goog.ui.Control.prototype.setEnabled=function(t){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!t)&&(t||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,t),this.setState(goog.ui.Component.State.DISABLED,!t))},goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)},goog.ui.Control.prototype.setHighlighted=function(t){this.isTransitionAllowed(goog.ui.Component.State.HOVER,t)&&this.setState(goog.ui.Component.State.HOVER,t)},goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)},goog.ui.Control.prototype.setActive=function(t){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,t)&&this.setState(goog.ui.Component.State.ACTIVE,t)},goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)},goog.ui.Control.prototype.setSelected=function(t){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,t)&&this.setState(goog.ui.Component.State.SELECTED,t)},goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)},goog.ui.Control.prototype.setChecked=function(t){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,t)&&this.setState(goog.ui.Component.State.CHECKED,t)},goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)},goog.ui.Control.prototype.setFocused=function(t){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,t)&&this.setState(goog.ui.Component.State.FOCUSED,t)},goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)},goog.ui.Control.prototype.setOpen=function(t){this.isTransitionAllowed(goog.ui.Component.State.OPENED,t)&&this.setState(goog.ui.Component.State.OPENED,t)},goog.ui.Control.prototype.getState=function(){return this.state_},goog.ui.Control.prototype.hasState=function(t){return!!(this.state_&t)},goog.ui.Control.prototype.setState=function(t,e){this.isSupportedState(t)&&e!=this.hasState(t)&&(this.renderer_.setState(this,t,e),this.state_=e?this.state_|t:this.state_&~t)},goog.ui.Control.prototype.setStateInternal=function(t){this.state_=t},goog.ui.Control.prototype.isSupportedState=function(t){return!!(this.supportedStates_&t)},goog.ui.Control.prototype.setSupportedState=function(t,e){if(this.isInDocument()&&this.hasState(t)&&!e)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!e&&this.hasState(t)&&this.setState(t,!1),this.supportedStates_=e?this.supportedStates_|t:this.supportedStates_&~t},goog.ui.Control.prototype.isAutoState=function(t){return!!(this.autoStates_&t)&&this.isSupportedState(t)},goog.ui.Control.prototype.setAutoStates=function(t,e){this.autoStates_=e?this.autoStates_|t:this.autoStates_&~t},goog.ui.Control.prototype.isDispatchTransitionEvents=function(t){return!!(this.statesWithTransitionEvents_&t)&&this.isSupportedState(t)},goog.ui.Control.prototype.setDispatchTransitionEvents=function(t,e){this.statesWithTransitionEvents_=e?this.statesWithTransitionEvents_|t:this.statesWithTransitionEvents_&~t},goog.ui.Control.prototype.isTransitionAllowed=function(t,e){return this.isSupportedState(t)&&this.hasState(t)!=e&&(!(this.statesWithTransitionEvents_&t)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(t,e)))&&!this.isDisposed()},goog.ui.Control.prototype.handleMouseOver=function(t){!goog.ui.Control.isMouseEventWithinElement_(t,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0)},goog.ui.Control.prototype.handleMouseOut=function(t){!goog.ui.Control.isMouseEventWithinElement_(t,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))},goog.ui.Control.prototype.handleContextMenu=goog.nullFunction,goog.ui.Control.isMouseEventWithinElement_=function(t,e){return!!t.relatedTarget&&goog.dom.contains(e,t.relatedTarget)},goog.ui.Control.prototype.handleMouseDown=function(t){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),t.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus())),!this.isAllowTextSelection()&&t.isMouseActionButton()&&t.preventDefault()},goog.ui.Control.prototype.handleMouseUp=function(t){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&this.performActionInternal(t)&&this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1))},goog.ui.Control.prototype.handleDblClick=function(t){this.isEnabled()&&this.performActionInternal(t)},goog.ui.Control.prototype.performActionInternal=function(t){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked()),this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0),this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var e=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);return t&&(e.altKey=t.altKey,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.platformModifierKey=t.platformModifierKey),this.dispatchEvent(e)},goog.ui.Control.prototype.handleFocus=function(){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)},goog.ui.Control.prototype.handleBlur=function(){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)},goog.ui.Control.prototype.handleKeyEvent=function(t){return!!(this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(t))&&(t.preventDefault(),t.stopPropagation(),!0)},goog.ui.Control.prototype.handleKeyEventInternal=function(t){return t.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(t)},goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer),goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)}),goog.ui.Checkbox=function(t,e,o){o=o||goog.ui.CheckboxRenderer.getInstance(),goog.ui.Control.call(this,null,o,e),this.checked_=goog.isDef(t)?t:goog.ui.Checkbox.State.UNCHECKED},goog.inherits(goog.ui.Checkbox,goog.ui.Control),goog.ui.Checkbox.State={CHECKED:!0,UNCHECKED:!1,UNDETERMINED:null},goog.ui.Checkbox.prototype.label_=null,goog.ui.Checkbox.prototype.getChecked=function(){return this.checked_},goog.ui.Checkbox.prototype.isChecked=function(){return this.checked_==goog.ui.Checkbox.State.CHECKED},goog.ui.Checkbox.prototype.isUnchecked=function(){return this.checked_==goog.ui.Checkbox.State.UNCHECKED},goog.ui.Checkbox.prototype.isUndetermined=function(){return this.checked_==goog.ui.Checkbox.State.UNDETERMINED},goog.ui.Checkbox.prototype.setChecked=function(t){t!=this.checked_&&(this.checked_=t,this.getRenderer().setCheckboxState(this.getElement(),this.checked_))},goog.ui.Checkbox.prototype.setCheckedInternal=function(t){this.checked_=t},goog.ui.Checkbox.prototype.setLabel=function(t){this.isInDocument()?(this.exitDocument(),this.label_=t,this.enterDocument()):this.label_=t},goog.ui.Checkbox.prototype.toggle=function(){this.setChecked(this.checked_?goog.ui.Checkbox.State.UNCHECKED:goog.ui.Checkbox.State.CHECKED)},goog.ui.Checkbox.prototype.enterDocument=function(){if(goog.ui.Checkbox.superClass_.enterDocument.call(this),this.isHandleMouseEvents()){var t=this.getHandler();this.label_&&t.listen(this.label_,goog.events.EventType.CLICK,this.handleClickOrSpace_).listen(this.label_,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(this.label_,goog.events.EventType.MOUSEOUT,this.handleMouseOut).listen(this.label_,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(this.label_,goog.events.EventType.MOUSEUP,this.handleMouseUp),t.listen(this.getElement(),goog.events.EventType.CLICK,this.handleClickOrSpace_)}this.label_&&(this.label_.id||(this.label_.id=this.makeId("lbl")),t=this.getElement(),goog.asserts.assert(t,"The checkbox DOM element cannot be null."),goog.a11y.aria.setState(t,goog.a11y.aria.State.LABELLEDBY,this.label_.id))},goog.ui.Checkbox.prototype.setEnabled=function(t){goog.ui.Checkbox.superClass_.setEnabled.call(this,t),(t=this.getElement())&&(t.tabIndex=this.isEnabled()?0:-1)},goog.ui.Checkbox.prototype.handleClickOrSpace_=function(t){t.stopPropagation();var e=this.checked_?goog.ui.Component.EventType.UNCHECK:goog.ui.Component.EventType.CHECK;this.isEnabled()&&this.dispatchEvent(e)&&(t.preventDefault(),this.toggle(),this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.Checkbox.prototype.handleKeyEventInternal=function(t){return t.keyCode==goog.events.KeyCodes.SPACE&&this.handleClickOrSpace_(t),!1},goog.ui.registry.setDecoratorByClassName(goog.ui.CheckboxRenderer.CSS_CLASS,function(){return new goog.ui.Checkbox}),goog.ui.ButtonSide={NONE:0,START:1,END:2,BOTH:3},goog.ui.ButtonRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.ButtonRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.ButtonRenderer),goog.ui.ButtonRenderer.CSS_CLASS="goog-button",goog.ui.ButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON},goog.ui.ButtonRenderer.prototype.updateAriaState=function(t,e,o){e==goog.ui.Component.State.CHECKED?(goog.asserts.assert(t,"The button DOM element cannot be null."),goog.a11y.aria.setState(t,goog.a11y.aria.State.PRESSED,o)):goog.ui.ButtonRenderer.superClass_.updateAriaState.call(this,t,e,o)},goog.ui.ButtonRenderer.prototype.createDom=function(t){var e=goog.ui.ButtonRenderer.superClass_.createDom.call(this,t),o=t.getTooltip();return o&&this.setTooltip(e,o),(o=t.getValue())&&this.setValue(e,o),t.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(e,goog.ui.Component.State.CHECKED,t.isChecked()),e},goog.ui.ButtonRenderer.prototype.decorate=function(t,e){return e=goog.ui.ButtonRenderer.superClass_.decorate.call(this,t,e),t.setValueInternal(this.getValue(e)),t.setTooltipInternal(this.getTooltip(e)),t.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(e,goog.ui.Component.State.CHECKED,t.isChecked()),e},goog.ui.ButtonRenderer.prototype.getValue=goog.nullFunction,goog.ui.ButtonRenderer.prototype.setValue=goog.nullFunction,goog.ui.ButtonRenderer.prototype.getTooltip=function(t){return t.title},goog.ui.ButtonRenderer.prototype.setTooltip=function(t,e){t&&(t.title=e||"")},goog.ui.ButtonRenderer.prototype.setCollapsed=function(t,e){var o=t.isRightToLeft(),i=this.getStructuralCssClass()+"-collapse-left",n=this.getStructuralCssClass()+"-collapse-right";t.enableClassName(o?n:i,!!(e&goog.ui.ButtonSide.START)),t.enableClassName(o?i:n,!!(e&goog.ui.ButtonSide.END))},goog.ui.ButtonRenderer.prototype.getCssClass=function(){return goog.ui.ButtonRenderer.CSS_CLASS},goog.ui.NativeButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)},goog.inherits(goog.ui.NativeButtonRenderer,goog.ui.ButtonRenderer),goog.addSingletonGetter(goog.ui.NativeButtonRenderer),goog.ui.NativeButtonRenderer.prototype.getAriaRole=function(){},goog.ui.NativeButtonRenderer.prototype.createDom=function(t){return this.setUpNativeButton_(t),t.getDomHelper().createDom("button",{"class":this.getClassNames(t).join(" "),disabled:!t.isEnabled(),title:t.getTooltip()||"",value:t.getValue()||""},t.getCaption()||"")},goog.ui.NativeButtonRenderer.prototype.canDecorate=function(t){return"BUTTON"==t.tagName||"INPUT"==t.tagName&&("button"==t.type||"submit"==t.type||"reset"==t.type)},goog.ui.NativeButtonRenderer.prototype.decorate=function(t,e){return this.setUpNativeButton_(t),e.disabled&&goog.dom.classes.add(e,this.getClassForState(goog.ui.Component.State.DISABLED)),goog.ui.NativeButtonRenderer.superClass_.decorate.call(this,t,e)},goog.ui.NativeButtonRenderer.prototype.initializeDom=function(t){t.getHandler().listen(t.getElement(),goog.events.EventType.CLICK,t.performActionInternal)},goog.ui.NativeButtonRenderer.prototype.setAllowTextSelection=goog.nullFunction,goog.ui.NativeButtonRenderer.prototype.setRightToLeft=goog.nullFunction,goog.ui.NativeButtonRenderer.prototype.isFocusable=function(t){return t.isEnabled()},goog.ui.NativeButtonRenderer.prototype.setFocusable=goog.nullFunction,goog.ui.NativeButtonRenderer.prototype.setState=function(t,e,o){goog.ui.NativeButtonRenderer.superClass_.setState.call(this,t,e,o),(t=t.getElement())&&e==goog.ui.Component.State.DISABLED&&(t.disabled=o)},goog.ui.NativeButtonRenderer.prototype.getValue=function(t){return t.value},goog.ui.NativeButtonRenderer.prototype.setValue=function(t,e){t&&(t.value=e)},goog.ui.NativeButtonRenderer.prototype.updateAriaState=goog.nullFunction,goog.ui.NativeButtonRenderer.prototype.setUpNativeButton_=function(t){t.setHandleMouseEvents(!1),t.setAutoStates(goog.ui.Component.State.ALL,!1),t.setSupportedState(goog.ui.Component.State.FOCUSED,!1)},goog.ui.Button=function(t,e,o){goog.ui.Control.call(this,t,e||goog.ui.NativeButtonRenderer.getInstance(),o)},goog.inherits(goog.ui.Button,goog.ui.Control),goog.ui.Button.Side=goog.ui.ButtonSide,goog.ui.Button.prototype.getValue=function(){return this.value_},goog.ui.Button.prototype.setValue=function(t){this.value_=t,this.getRenderer().setValue(this.getElement(),t)},goog.ui.Button.prototype.setValueInternal=function(t){this.value_=t},goog.ui.Button.prototype.getTooltip=function(){return this.tooltip_},goog.ui.Button.prototype.setTooltip=function(t){this.tooltip_=t,this.getRenderer().setTooltip(this.getElement(),t)},goog.ui.Button.prototype.setTooltipInternal=function(t){this.tooltip_=t},goog.ui.Button.prototype.setCollapsed=function(t){this.getRenderer().setCollapsed(this,t)},goog.ui.Button.prototype.disposeInternal=function(){goog.ui.Button.superClass_.disposeInternal.call(this),delete this.value_,delete this.tooltip_},goog.ui.Button.prototype.enterDocument=function(){if(goog.ui.Button.superClass_.enterDocument.call(this),this.isSupportedState(goog.ui.Component.State.FOCUSED)){var t=this.getKeyEventTarget();t&&this.getHandler().listen(t,goog.events.EventType.KEYUP,this.handleKeyEventInternal)}},goog.ui.Button.prototype.handleKeyEventInternal=function(t){return t.keyCode==goog.events.KeyCodes.ENTER&&t.type==goog.events.KeyHandler.EventType.KEY||t.keyCode==goog.events.KeyCodes.SPACE&&t.type==goog.events.EventType.KEYUP?this.performActionInternal(t):t.keyCode==goog.events.KeyCodes.SPACE},goog.ui.registry.setDecoratorByClassName(goog.ui.ButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null)}),goog.structs.Collection=function(){},goog.structs.Set=function(t){this.map_=new goog.structs.Map,t&&this.addAll(t)},goog.structs.Set.getKey_=function(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+goog.getUid(t):e.substr(0,1)+t},goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()},goog.structs.Set.prototype.add=function(t){this.map_.set(goog.structs.Set.getKey_(t),t)},goog.structs.Set.prototype.addAll=function(t){for(var e=(t=goog.structs.getValues(t)).length,o=0;o<e;o++)this.add(t[o])},goog.structs.Set.prototype.removeAll=function(t){for(var e=(t=goog.structs.getValues(t)).length,o=0;o<e;o++)this.remove(t[o])},goog.structs.Set.prototype.remove=function(t){return this.map_.remove(goog.structs.Set.getKey_(t))},goog.structs.Set.prototype.clear=function(){this.map_.clear()},goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()},goog.structs.Set.prototype.contains=function(t){return this.map_.containsKey(goog.structs.Set.getKey_(t))},goog.structs.Set.prototype.containsAll=function(t){return goog.structs.every(t,this.contains,this)},goog.structs.Set.prototype.intersection=function(t){var e=new goog.structs.Set;t=goog.structs.getValues(t);for(var o=0;o<t.length;o++){var i=t[o];this.contains(i)&&e.add(i)}return e},goog.structs.Set.prototype.difference=function(t){var e=this.clone();return e.removeAll(t),e},goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()},goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)},goog.structs.Set.prototype.equals=function(t){return this.getCount()==goog.structs.getCount(t)&&this.isSubsetOf(t)},goog.structs.Set.prototype.isSubsetOf=function(t){var e=goog.structs.getCount(t);return!(this.getCount()>e)&&(!(t instanceof goog.structs.Set)&&5<e&&(t=new goog.structs.Set(t)),goog.structs.every(this,function(e){return goog.structs.contains(t,e)}))},goog.structs.Set.prototype.__iterator__=function(){return this.map_.__iterator__(!1)},goog.debug.catchErrors=function(t,e,o){var i=(o=o||goog.global).onerror,n=!!e;goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("535.3")&&(n=!n),o.onerror=function(e,o,r){return i&&i(e,o,r),t({message:e,fileName:o,line:r}),n}},goog.debug.expose=function(t,e){if(void 0===t)return"undefined";if(null==t)return"NULL";var o,i=[];for(o in t)if(e||!goog.isFunction(t[o])){var n=o+" = ";try{n+=t[o]}catch(r){n+="*** "+r+" ***"}i.push(n)}return i.join("\n")},goog.debug.deepExpose=function(t,e){var o=new goog.structs.Set,i=[],n=function(t,r){var g=r+"  ";try{if(goog.isDef(t))if(goog.isNull(t))i.push("NULL");else if(goog.isString(t))i.push('"'+t.replace(/\n/g,"\n"+r)+'"');else if(goog.isFunction(t))i.push(String(t).replace(/\n/g,"\n"+r));else if(goog.isObject(t))if(o.contains(t))i.push("*** reference loop detected ***");else{o.add(t),i.push("{");for(var s in t)!e&&goog.isFunction(t[s])||(i.push("\n"),i.push(g),i.push(s+" = "),n(t[s],g));i.push("\n"+r+"}")}else i.push(t);else i.push("undefined")}catch(a){i.push("*** "+a+" ***")}};return n(t,""),i.join("")},goog.debug.exposeArray=function(t){for(var e=[],o=0;o<t.length;o++)goog.isArray(t[o])?e.push(goog.debug.exposeArray(t[o])):e.push(t[o]);return"[ "+e.join(", ")+" ]"},goog.debug.exposeException=function(t,e){try{var o=goog.debug.normalizeErrorObject(t);return"Message: "+goog.string.htmlEscape(o.message)+'\nUrl: <a href="view-source:'+o.fileName+'" target="_new">'+o.fileName+"</a>\nLine: "+o.lineNumber+"\n\nBrowser stack:\n"+goog.string.htmlEscape(o.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+goog.string.htmlEscape(goog.debug.getStacktrace(e)+"-> ")}catch(i){return"Exception trying to expose exception! You win, we lose. "+i}},goog.debug.normalizeErrorObject=function(t){var e=goog.getObjectByName("window.location.href");if(goog.isString(t))return{message:t,name:"Unknown error",lineNumber:"Not available",fileName:e,stack:"Not available"};var o,i,n=!1;try{o=t.lineNumber||t.line||"Not available"}catch(r){o="Not available",n=!0}try{i=t.fileName||t.filename||t.sourceURL||goog.global.$googDebugFname||e}catch(g){i="Not available",n=!0}return!n&&t.lineNumber&&t.fileName&&t.stack?t:{message:t.message,name:t.name,lineNumber:o,fileName:i,stack:t.stack||"Not available"}},goog.debug.enhanceError=function(t,e){var o="string"==typeof t?Error(t):t;if(o.stack||(o.stack=goog.debug.getStacktrace(arguments.callee.caller)),e){for(var i=0;o["message"+i];)++i;o["message"+i]=String(e)}return o},goog.debug.getStacktraceSimple=function(t){for(var e=[],o=arguments.callee.caller,i=0;o&&(!t||i<t);){e.push(goog.debug.getFunctionName(o)),e.push("()\n");try{o=o.caller}catch(n){e.push("[exception trying to get caller]\n");break}if(++i>=goog.debug.MAX_STACK_DEPTH){e.push("[...long stack...]");break}}return t&&i>=t?e.push("[...reached max depth limit...]"):e.push("[end]"),e.join("")},goog.debug.MAX_STACK_DEPTH=50,goog.debug.getStacktrace=function(t){return goog.debug.getStacktraceHelper_(t||arguments.callee.caller,[])},goog.debug.getStacktraceHelper_=function(t,e){var o=[];if(goog.array.contains(e,t))o.push("[...circular reference...]");else if(t&&e.length<goog.debug.MAX_STACK_DEPTH){o.push(goog.debug.getFunctionName(t)+"(");for(var i=t.arguments,n=0;n<i.length;n++){0<n&&o.push(", ");var r;switch(typeof(r=i[n])){case"object":r=r?"object":"null";break;case"string":break;case"number":r=String(r);break;case"boolean":r=r?"true":"false";break;case"function":r=(r=goog.debug.getFunctionName(r))?r:"[fn]";break;default:r=typeof r}40<r.length&&(r=r.substr(0,40)+"..."),o.push(r)}e.push(t),o.push(")\n");try{o.push(goog.debug.getStacktraceHelper_(t.caller,e))}catch(g){o.push("[exception trying to get caller]\n")}}else t?o.push("[...long stack...]"):o.push("[end]");return o.join("")},goog.debug.setFunctionResolver=function(t){goog.debug.fnNameResolver_=t},goog.debug.getFunctionName=function(t){if(goog.debug.fnNameCache_[t])return goog.debug.fnNameCache_[t];if(goog.debug.fnNameResolver_){var e=goog.debug.fnNameResolver_(t);if(e)return goog.debug.fnNameCache_[t]=e}return t=String(t),goog.debug.fnNameCache_[t]||(e=/function ([^\(]+)/.exec(t),goog.debug.fnNameCache_[t]=e?e[1]:"[Anonymous]"),goog.debug.fnNameCache_[t]},goog.debug.makeWhitespaceVisible=function(t){return t.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")},goog.debug.fnNameCache_={},goog.debug.LogRecord=function(t,e,o,i,n){this.reset(t,e,o,i,n)},goog.debug.LogRecord.prototype.sequenceNumber_=0,goog.debug.LogRecord.prototype.exception_=null,goog.debug.LogRecord.prototype.exceptionText_=null,goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=!0,goog.debug.LogRecord.nextSequenceNumber_=0,goog.debug.LogRecord.prototype.reset=function(t,e,o,i,n){goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS&&(this.sequenceNumber_="number"==typeof n?n:goog.debug.LogRecord.nextSequenceNumber_++),this.time_=i||goog.now(),this.level_=t,this.msg_=e,this.loggerName_=o,delete this.exception_,delete this.exceptionText_},goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_},goog.debug.LogRecord.prototype.getException=function(){return this.exception_},goog.debug.LogRecord.prototype.setException=function(t){this.exception_=t},goog.debug.LogRecord.prototype.getExceptionText=function(){return this.exceptionText_},goog.debug.LogRecord.prototype.setExceptionText=function(t){this.exceptionText_=t},goog.debug.LogRecord.prototype.setLoggerName=function(t){this.loggerName_=t},goog.debug.LogRecord.prototype.getLevel=function(){return this.level_},goog.debug.LogRecord.prototype.setLevel=function(t){this.level_=t},goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_},goog.debug.LogRecord.prototype.setMessage=function(t){this.msg_=t},goog.debug.LogRecord.prototype.getMillis=function(){return this.time_},goog.debug.LogRecord.prototype.setMillis=function(t){this.time_=t},goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_},goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY."),this.clear()},goog.debug.LogBuffer.getInstance=function(){return goog.debug.LogBuffer.instance_||(goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer),goog.debug.LogBuffer.instance_},goog.debug.LogBuffer.CAPACITY=0,goog.debug.LogBuffer.prototype.addRecord=function(t,e,o){var i=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;return this.curIndex_=i,this.isFull_?((i=this.buffer_[i]).reset(t,e,o),i):(this.isFull_=i==goog.debug.LogBuffer.CAPACITY-1,this.buffer_[i]=new goog.debug.LogRecord(t,e,o))},goog.debug.LogBuffer.isBufferingEnabled=function(){return 0<goog.debug.LogBuffer.CAPACITY},goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=Array(goog.debug.LogBuffer.CAPACITY),this.curIndex_=-1,this.isFull_=!1},goog.debug.LogBuffer.prototype.forEachRecord=function(t){var e=this.buffer_;if(e[0]){var o=this.curIndex_,i=this.isFull_?o:-1;do{i=(i+1)%goog.debug.LogBuffer.CAPACITY,t(e[i])}while(i!=o)}},goog.debug.Logger=function(t){this.name_=t},goog.debug.Logger.prototype.parent_=null,goog.debug.Logger.prototype.level_=null,goog.debug.Logger.prototype.children_=null,goog.debug.Logger.prototype.handlers_=null,goog.debug.Logger.ENABLE_HIERARCHY=!0,goog.debug.Logger.ENABLE_HIERARCHY||(goog.debug.Logger.rootHandlers_=[]),goog.debug.Logger.Level=function(t,e){this.name=t,this.value=e},goog.debug.Logger.Level.prototype.toString=function(){return this.name},goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity),goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200),goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1e3),goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900),goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800),goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700),goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500),goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400),goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300),goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0),goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL],goog.debug.Logger.Level.predefinedLevelsCache_=null,goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var t,e=0;t=goog.debug.Logger.Level.PREDEFINED_LEVELS[e];e++)goog.debug.Logger.Level.predefinedLevelsCache_[t.value]=t,goog.debug.Logger.Level.predefinedLevelsCache_[t.name]=t},goog.debug.Logger.Level.getPredefinedLevel=function(t){return goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_(),goog.debug.Logger.Level.predefinedLevelsCache_[t]||null},goog.debug.Logger.Level.getPredefinedLevelByValue=function(t){if(goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_(),t in goog.debug.Logger.Level.predefinedLevelsCache_)return goog.debug.Logger.Level.predefinedLevelsCache_[t];for(var e=0;e<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++e){var o=goog.debug.Logger.Level.PREDEFINED_LEVELS[e];if(o.value<=t)return o}return null};goog.debug.Logger.getLogger=function(t){return goog.debug.LogManager.getLogger(t)},goog.debug.Logger.logToProfilers=function(t){goog.global.console&&(goog.global.console.timeStamp?goog.global.console.timeStamp(t):goog.global.console.markTimeline&&goog.global.console.markTimeline(t)),goog.global.msWriteProfilerMark&&goog.global.msWriteProfilerMark(t)},goog.debug.Logger.prototype.getName=function(){return this.name_},goog.debug.Logger.prototype.addHandler=function(t){goog.debug.Logger.ENABLE_HIERARCHY?(this.handlers_||(this.handlers_=[]),this.handlers_.push(t)):(goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootHandlers_.push(t))},goog.debug.Logger.prototype.removeHandler=function(t){var e=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!e&&goog.array.remove(e,t)},goog.debug.Logger.prototype.getParent=function(){return this.parent_},goog.debug.Logger.prototype.getChildren=function(){return this.children_||(this.children_={}),this.children_},goog.debug.Logger.prototype.setLevel=function(t){
goog.debug.Logger.ENABLE_HIERARCHY?this.level_=t:(goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootLevel_=t)},goog.debug.Logger.prototype.getLevel=function(){return this.level_},goog.debug.Logger.prototype.getEffectiveLevel=function(){return goog.debug.Logger.ENABLE_HIERARCHY?this.level_?this.level_:this.parent_?this.parent_.getEffectiveLevel():(goog.asserts.fail("Root logger has no level set."),null):goog.debug.Logger.rootLevel_},goog.debug.Logger.prototype.isLoggable=function(t){return t.value>=this.getEffectiveLevel().value},goog.debug.Logger.prototype.log=function(t,e,o){this.isLoggable(t)&&this.doLogRecord_(this.getLogRecord(t,e,o))},goog.debug.Logger.prototype.getLogRecord=function(t,e,o){var i=goog.debug.LogBuffer.isBufferingEnabled()?goog.debug.LogBuffer.getInstance().addRecord(t,e,this.name_):new goog.debug.LogRecord(t,String(e),this.name_);return o&&(i.setException(o),i.setExceptionText(goog.debug.exposeException(o,arguments.callee.caller))),i},goog.debug.Logger.prototype.shout=function(t,e){this.log(goog.debug.Logger.Level.SHOUT,t,e)},goog.debug.Logger.prototype.severe=function(t,e){this.log(goog.debug.Logger.Level.SEVERE,t,e)},goog.debug.Logger.prototype.warning=function(t,e){this.log(goog.debug.Logger.Level.WARNING,t,e)},goog.debug.Logger.prototype.info=function(t,e){this.log(goog.debug.Logger.Level.INFO,t,e)},goog.debug.Logger.prototype.config=function(t,e){this.log(goog.debug.Logger.Level.CONFIG,t,e)},goog.debug.Logger.prototype.fine=function(t,e){this.log(goog.debug.Logger.Level.FINE,t,e)},goog.debug.Logger.prototype.finer=function(t,e){this.log(goog.debug.Logger.Level.FINER,t,e)},goog.debug.Logger.prototype.finest=function(t,e){this.log(goog.debug.Logger.Level.FINEST,t,e)},goog.debug.Logger.prototype.logRecord=function(t){this.isLoggable(t.getLevel())&&this.doLogRecord_(t)},goog.debug.Logger.prototype.doLogRecord_=function(t){if(goog.debug.Logger.logToProfilers("log:"+t.getMessage()),goog.debug.Logger.ENABLE_HIERARCHY)for(var e=this;e;)e.callPublish_(t),e=e.getParent();else{var o;for(e=0;o=goog.debug.Logger.rootHandlers_[e++];)o(t)}},goog.debug.Logger.prototype.callPublish_=function(t){if(this.handlers_)for(var e,o=0;e=this.handlers_[o];o++)e(t)},goog.debug.Logger.prototype.setParent_=function(t){this.parent_=t},goog.debug.Logger.prototype.addChild_=function(t,e){this.getChildren()[t]=e},goog.debug.LogManager={},goog.debug.LogManager.loggers_={},goog.debug.LogManager.rootLogger_=null,goog.debug.LogManager.initialize=function(){goog.debug.LogManager.rootLogger_||(goog.debug.LogManager.rootLogger_=new goog.debug.Logger(""),goog.debug.LogManager.loggers_[""]=goog.debug.LogManager.rootLogger_,goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))},goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_},goog.debug.LogManager.getRoot=function(){return goog.debug.LogManager.initialize(),goog.debug.LogManager.rootLogger_},goog.debug.LogManager.getLogger=function(t){return goog.debug.LogManager.initialize(),goog.debug.LogManager.loggers_[t]||goog.debug.LogManager.createLogger_(t)},goog.debug.LogManager.createFunctionForCatchErrors=function(t){return function(e){(t||goog.debug.LogManager.getRoot()).severe("Error: "+e.message+" ("+e.fileName+" @ Line: "+e.line+")")}},goog.debug.LogManager.createLogger_=function(t){var e=new goog.debug.Logger(t);if(goog.debug.Logger.ENABLE_HIERARCHY){var o=t.lastIndexOf("."),i=t.substr(0,o);o=t.substr(o+1);(i=goog.debug.LogManager.getLogger(i)).addChild_(o,e),e.setParent_(i)}return goog.debug.LogManager.loggers_[t]=e},goog.net={},goog.net.WebSocket=function(t,e){goog.events.EventTarget.call(this),this.autoReconnect_=!goog.isDef(t)||t,this.getNextReconnect_=e||goog.net.WebSocket.EXPONENTIAL_BACKOFF_,this.nextReconnect_=this.getNextReconnect_(this.reconnectAttempt_)},goog.inherits(goog.net.WebSocket,goog.events.EventTarget),goog.net.WebSocket.prototype.webSocket_=null,goog.net.WebSocket.prototype.url_=null,goog.net.WebSocket.prototype.protocol_=void 0,goog.net.WebSocket.prototype.closeExpected_=!1,goog.net.WebSocket.prototype.reconnectAttempt_=0,goog.net.WebSocket.prototype.logger_=goog.debug.Logger.getLogger("goog.net.WebSocket"),goog.net.WebSocket.EventType={CLOSED:goog.events.getUniqueId("closed"),ERROR:goog.events.getUniqueId("error"),MESSAGE:goog.events.getUniqueId("message"),OPENED:goog.events.getUniqueId("opened")},goog.net.WebSocket.ReadyState_={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},goog.net.WebSocket.EXPONENTIAL_BACKOFF_CEILING_=6e4,goog.net.WebSocket.EXPONENTIAL_BACKOFF_=function(t){return t=1e3*Math.pow(2,t),Math.min(t,goog.net.WebSocket.EXPONENTIAL_BACKOFF_CEILING_)},goog.net.WebSocket.protectEntryPoints=function(t){goog.net.WebSocket.prototype.onOpen_=t.protectEntryPoint(goog.net.WebSocket.prototype.onOpen_),goog.net.WebSocket.prototype.onClose_=t.protectEntryPoint(goog.net.WebSocket.prototype.onClose_),goog.net.WebSocket.prototype.onMessage_=t.protectEntryPoint(goog.net.WebSocket.prototype.onMessage_),goog.net.WebSocket.prototype.onError_=t.protectEntryPoint(goog.net.WebSocket.prototype.onError_)},goog.net.WebSocket.prototype.open=function(t,e){goog.asserts.assert(goog.global.WebSocket,"This browser does not support WebSocket"),goog.asserts.assert(!this.isOpen(),"The WebSocket is already open"),this.clearReconnectTimer_(),this.url_=t,(this.protocol_=e)?(this.logger_.info("Opening the WebSocket on "+this.url_+" with protocol "+this.protocol_),this.webSocket_=new WebSocket(this.url_,this.protocol_)):(this.logger_.info("Opening the WebSocket on "+this.url_),this.webSocket_=new WebSocket(this.url_)),this.webSocket_.onopen=goog.bind(this.onOpen_,this),this.webSocket_.onclose=goog.bind(this.onClose_,this),this.webSocket_.onmessage=goog.bind(this.onMessage_,this),this.webSocket_.onerror=goog.bind(this.onError_,this)},goog.net.WebSocket.prototype.close=function(){this.clearReconnectTimer_(),this.webSocket_&&(this.logger_.info("Closing the WebSocket."),this.closeExpected_=!0,this.webSocket_.close(),this.webSocket_=null)},goog.net.WebSocket.prototype.send=function(t){goog.asserts.assert(this.isOpen(),"Cannot send without an open socket"),this.webSocket_.send(t)},goog.net.WebSocket.prototype.isOpen=function(){return!!this.webSocket_&&this.webSocket_.readyState==goog.net.WebSocket.ReadyState_.OPEN},goog.net.WebSocket.prototype.onOpen_=function(){this.logger_.info("WebSocket opened on "+this.url_),this.dispatchEvent(goog.net.WebSocket.EventType.OPENED),this.reconnectAttempt_=0,this.nextReconnect_=this.getNextReconnect_(this.reconnectAttempt_)},goog.net.WebSocket.prototype.onClose_=function(t){this.logger_.info("The WebSocket on "+this.url_+" closed."),this.dispatchEvent(goog.net.WebSocket.EventType.CLOSED),this.webSocket_=null,this.closeExpected_?(this.logger_.info("The WebSocket closed normally."),this.url_=null,this.protocol_=void 0):(this.logger_.severe("The WebSocket disconnected unexpectedly: "+t.data),this.autoReconnect_&&(this.logger_.info("Seconds until next reconnect attempt: "+Math.floor(this.nextReconnect_/1e3)),this.reconnectTimer_=goog.Timer.callOnce(goog.bind(this.open,this,this.url_,this.protocol_),this.nextReconnect_,this),this.reconnectAttempt_++,this.nextReconnect_=this.getNextReconnect_(this.reconnectAttempt_))),this.closeExpected_=!1},goog.net.WebSocket.prototype.onMessage_=function(t){this.dispatchEvent(new goog.net.WebSocket.MessageEvent(t.data))},goog.net.WebSocket.prototype.onError_=function(t){t=t.data,this.logger_.severe("An error occurred: "+t),this.dispatchEvent(new goog.net.WebSocket.ErrorEvent(t))},goog.net.WebSocket.prototype.clearReconnectTimer_=function(){goog.isDefAndNotNull(this.reconnectTimer_)&&goog.Timer.clear(this.reconnectTimer_),this.reconnectTimer_=null},goog.net.WebSocket.prototype.disposeInternal=function(){goog.net.WebSocket.superClass_.disposeInternal.call(this),this.close()},goog.net.WebSocket.MessageEvent=function(t){goog.events.Event.call(this,goog.net.WebSocket.EventType.MESSAGE),this.message=t},goog.inherits(goog.net.WebSocket.MessageEvent,goog.events.Event),goog.net.WebSocket.ErrorEvent=function(t){goog.events.Event.call(this,goog.net.WebSocket.EventType.ERROR),this.data=t},goog.inherits(goog.net.WebSocket.ErrorEvent,goog.events.Event),goog.debug.entryPointRegistry.register(function(t){goog.net.WebSocket.prototype.onOpen_=t(goog.net.WebSocket.prototype.onOpen_),goog.net.WebSocket.prototype.onClose_=t(goog.net.WebSocket.prototype.onClose_),goog.net.WebSocket.prototype.onMessage_=t(goog.net.WebSocket.prototype.onMessage_),goog.net.WebSocket.prototype.onError_=t(goog.net.WebSocket.prototype.onError_)}),goog.positioning={},goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:2,BOTTOM_LEFT:1,BOTTOM_RIGHT:3,TOP_START:4,TOP_END:6,BOTTOM_START:5,BOTTOM_END:7},goog.positioning.CornerBit={BOTTOM:1,RIGHT:2,FLIP_RTL:4},goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132},goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256},goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT,goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT,goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM,goog.positioning.positionAtAnchor=function(t,e,o,i,n,r,g,s,a){goog.asserts.assert(o);var l=goog.positioning.getOffsetParentPageOffset(o),h=goog.positioning.getVisiblePart_(t);goog.style.translateRectForAnotherFrame(h,goog.dom.getDomHelper(t),goog.dom.getDomHelper(o)),t=goog.positioning.getEffectiveCorner(t,e),h=new goog.math.Coordinate(t&goog.positioning.CornerBit.RIGHT?h.left+h.width:h.left,t&goog.positioning.CornerBit.BOTTOM?h.top+h.height:h.top),h=goog.math.Coordinate.difference(h,l),n&&(h.x+=(t&goog.positioning.CornerBit.RIGHT?-1:1)*n.x,h.y+=(t&goog.positioning.CornerBit.BOTTOM?-1:1)*n.y);var u;return g&&(a?u=a:(u=goog.style.getVisibleRectForElement(o))&&(u.top-=l.y,u.right-=l.x,u.bottom-=l.y,u.left-=l.x)),goog.positioning.positionAtCoordinate(h,o,i,r,u,g,s)},goog.positioning.getOffsetParentPageOffset=function(t){var e;if(t=t.offsetParent){var o=t.tagName==goog.dom.TagName.HTML||t.tagName==goog.dom.TagName.BODY;o&&"static"==goog.style.getComputedPosition(t)||(e=goog.style.getPageOffset(t),o||(e=goog.math.Coordinate.difference(e,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(t),t.scrollTop))))}return e||new goog.math.Coordinate},goog.positioning.getVisiblePart_=function(t){var e=goog.style.getBounds(t);return(t=goog.style.getVisibleRectForElement(t))&&e.intersection(goog.math.Rect.createFromBox(t)),e},goog.positioning.positionAtCoordinate=function(t,e,o,i,n,r,g){t=t.clone();var s=goog.positioning.OverflowStatus.NONE;o=goog.positioning.getEffectiveCorner(e,o);var a=goog.style.getSize(e);return g=g?g.clone():a.clone(),(i||o!=goog.positioning.Corner.TOP_LEFT)&&(o&goog.positioning.CornerBit.RIGHT?t.x-=g.width+(i?i.right:0):i&&(t.x+=i.left),o&goog.positioning.CornerBit.BOTTOM?t.y-=g.height+(i?i.bottom:0):i&&(t.y+=i.top)),r&&(s=n?goog.positioning.adjustForViewport_(t,g,n,r):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT)&goog.positioning.OverflowStatus.FAILED?s:(goog.style.setPosition(e,t),goog.math.Size.equals(a,g)||goog.style.setBorderBoxSize(e,g),s)},goog.positioning.adjustForViewport_=function(t,e,o,i){var n=goog.positioning.OverflowStatus.NONE,r=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,g=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;return(i&r)==r&&(t.x<o.left||t.x>=o.right)&&(i&=~goog.positioning.Overflow.ADJUST_X),(i&g)==g&&(t.y<o.top||t.y>=o.bottom)&&(i&=~goog.positioning.Overflow.ADJUST_Y),t.x<o.left&&i&goog.positioning.Overflow.ADJUST_X&&(t.x=o.left,n|=goog.positioning.OverflowStatus.ADJUSTED_X),t.x<o.left&&t.x+e.width>o.right&&i&goog.positioning.Overflow.RESIZE_WIDTH&&(e.width=Math.max(e.width-(t.x+e.width-o.right),0),n|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED),t.x+e.width>o.right&&i&goog.positioning.Overflow.ADJUST_X&&(t.x=Math.max(o.right-e.width,o.left),n|=goog.positioning.OverflowStatus.ADJUSTED_X),i&goog.positioning.Overflow.FAIL_X&&(n|=(t.x<o.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(t.x+e.width>o.right?goog.positioning.OverflowStatus.FAILED_RIGHT:0)),t.y<o.top&&i&goog.positioning.Overflow.ADJUST_Y&&(t.y=o.top,n|=goog.positioning.OverflowStatus.ADJUSTED_Y),t.y<=o.top&&t.y+e.height<o.bottom&&i&goog.positioning.Overflow.RESIZE_HEIGHT&&(e.height=Math.max(e.height-(o.top-t.y),0),t.y=0,n|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED),t.y>=o.top&&t.y+e.height>o.bottom&&i&goog.positioning.Overflow.RESIZE_HEIGHT&&(e.height=Math.max(e.height-(t.y+e.height-o.bottom),0),n|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED),t.y+e.height>o.bottom&&i&goog.positioning.Overflow.ADJUST_Y&&(t.y=Math.max(o.bottom-e.height,o.top),n|=goog.positioning.OverflowStatus.ADJUSTED_Y),i&goog.positioning.Overflow.FAIL_Y&&(n|=(t.y<o.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(t.y+e.height>o.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0)),n},goog.positioning.getEffectiveCorner=function(t,e){return(e&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(t)?e^goog.positioning.CornerBit.RIGHT:e)&~goog.positioning.CornerBit.FLIP_RTL},goog.positioning.flipCornerHorizontal=function(t){return t^goog.positioning.CornerBit.RIGHT},goog.positioning.flipCornerVertical=function(t){return t^goog.positioning.CornerBit.BOTTOM},goog.positioning.flipCorner=function(t){return t^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT},goog.positioning.AbstractPosition=function(){},goog.positioning.AbstractPosition.prototype.reposition=function(){},goog.positioning.AnchoredPosition=function(t,e,o){this.element=t,this.corner=e,this.overflow_=o},goog.inherits(goog.positioning.AnchoredPosition,goog.positioning.AbstractPosition),goog.positioning.AnchoredPosition.prototype.reposition=function(t,e,o){goog.positioning.positionAtAnchor(this.element,this.corner,t,e,void 0,o,this.overflow_)},goog.positioning.ViewportPosition=function(t,e){this.coordinate=t instanceof goog.math.Coordinate?t:new goog.math.Coordinate(t,e)},goog.inherits(goog.positioning.ViewportPosition,goog.positioning.AbstractPosition),goog.positioning.ViewportPosition.prototype.reposition=function(t,e,o,i){goog.positioning.positionAtAnchor(goog.style.getClientViewportElement(t),goog.positioning.Corner.TOP_LEFT,t,e,this.coordinate,o,null,i)},goog.positioning.ClientPosition=function(t,e){this.coordinate=t instanceof goog.math.Coordinate?t:new goog.math.Coordinate(t,e)},goog.inherits(goog.positioning.ClientPosition,goog.positioning.AbstractPosition),goog.positioning.ClientPosition.prototype.reposition=function(t,e,o,i){goog.asserts.assert(t);var n=goog.style.getViewportPageOffset(goog.dom.getOwnerDocument(t)),r=this.coordinate.x+n.x,g=(n=this.coordinate.y+n.y,goog.positioning.getOffsetParentPageOffset(t));r-=g.x,n-=g.y;goog.positioning.positionAtCoordinate(new goog.math.Coordinate(r,n),t,e,o,null,null,i)},goog.positioning.ViewportClientPosition=function(t,e){goog.positioning.ClientPosition.call(this,t,e)},goog.inherits(goog.positioning.ViewportClientPosition,goog.positioning.ClientPosition),goog.positioning.ViewportClientPosition.prototype.lastResortOverflow_=0,goog.positioning.ViewportClientPosition.prototype.setLastResortOverflow=function(t){this.lastResortOverflow_=t},goog.positioning.ViewportClientPosition.prototype.reposition=function(t,e,o,i){var n=goog.style.getClientViewportElement(t),r=(n=goog.style.getVisibleRectForElement(n),goog.dom.getDomHelper(t).getDocumentScrollElement()),g=(r=new goog.math.Coordinate(this.coordinate.x+r.scrollLeft,this.coordinate.y+r.scrollTop),goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y),s=e,a=goog.positioning.positionAtCoordinate(r,t,s,o,n,g,i);0!=(a&goog.positioning.OverflowStatus.FAILED)&&((a&goog.positioning.OverflowStatus.FAILED_LEFT||a&goog.positioning.OverflowStatus.FAILED_RIGHT)&&(s=goog.positioning.flipCornerHorizontal(s)),(a&goog.positioning.OverflowStatus.FAILED_TOP||a&goog.positioning.OverflowStatus.FAILED_BOTTOM)&&(s=goog.positioning.flipCornerVertical(s)),0!=((a=goog.positioning.positionAtCoordinate(r,t,s,o,n,g,i))&goog.positioning.OverflowStatus.FAILED)&&goog.positioning.positionAtCoordinate(r,t,e,o,n,this.lastResortOverflow_,i))},goog.positioning.AbsolutePosition=function(t,e){this.coordinate=t instanceof goog.math.Coordinate?t:new goog.math.Coordinate(t,e)},goog.inherits(goog.positioning.AbsolutePosition,goog.positioning.AbstractPosition),goog.positioning.AbsolutePosition.prototype.reposition=function(t,e,o,i){goog.positioning.positionAtCoordinate(this.coordinate,t,e,o,null,null,i)},goog.positioning.AnchoredViewportPosition=function(t,e,o,i){goog.positioning.AnchoredPosition.call(this,t,e),this.lastResortOverflow_=o?goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y:goog.positioning.Overflow.IGNORE,this.overflowConstraint_=i||void 0},goog.inherits(goog.positioning.AnchoredViewportPosition,goog.positioning.AnchoredPosition),goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow=function(){return this.lastResortOverflow_},goog.positioning.AnchoredViewportPosition.prototype.setLastResortOverflow=function(t){this.lastResortOverflow_=t},goog.positioning.AnchoredViewportPosition.prototype.reposition=function(t,e,o,i){var n=goog.positioning.positionAtAnchor(this.element,this.corner,t,e,null,o,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,i,this.overflowConstraint_);if(n&goog.positioning.OverflowStatus.FAILED){var r=this.adjustCorner(n,this.corner);e=this.adjustCorner(n,e),(n=goog.positioning.positionAtAnchor(this.element,r,t,e,null,o,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,i,this.overflowConstraint_))&goog.positioning.OverflowStatus.FAILED&&(r=this.adjustCorner(n,r),e=this.adjustCorner(n,e),goog.positioning.positionAtAnchor(this.element,r,t,e,null,o,this.getLastResortOverflow(),i,this.overflowConstraint_))}},goog.positioning.AnchoredViewportPosition.prototype.adjustCorner=function(t,e){return t&goog.positioning.OverflowStatus.FAILED_HORIZONTAL&&(e=goog.positioning.flipCornerHorizontal(e)),t&goog.positioning.OverflowStatus.FAILED_VERTICAL&&(e=goog.positioning.flipCornerVertical(e)),e},goog.ui.Popup=function(t,e){this.popupCorner_=goog.positioning.Corner.TOP_START,this.position_=e||void 0,goog.ui.PopupBase.call(this,t)},goog.inherits(goog.ui.Popup,goog.ui.PopupBase),goog.ui.Popup.Corner=goog.positioning.Corner,goog.ui.Popup.Overflow=goog.positioning.Overflow,goog.ui.Popup.prototype.getPinnedCorner=function(){return this.popupCorner_},goog.ui.Popup.prototype.setPinnedCorner=function(t){this.popupCorner_=t,this.isVisible()&&this.reposition()},goog.ui.Popup.prototype.getPosition=function(){return this.position_||null},goog.ui.Popup.prototype.setPosition=function(t){this.position_=t||void 0,this.isVisible()&&this.reposition()},goog.ui.Popup.prototype.getMargin=function(){return this.margin_||null},goog.ui.Popup.prototype.setMargin=function(t,e,o,i){this.margin_=null==t||t instanceof goog.math.Box?t:new goog.math.Box(t,e,o,i),this.isVisible()&&this.reposition()},goog.ui.Popup.prototype.reposition=function(){if(this.position_){var t=!this.isVisible()&&this.getType()!=goog.ui.PopupBase.Type.MOVE_OFFSCREEN,e=this.getElement();t&&(e.style.visibility="hidden",goog.style.showElement(e,!0)),this.position_.reposition(e,this.popupCorner_,this.margin_),t&&goog.style.showElement(e,!1)}},goog.ui.Popup.AnchoredPosition=goog.positioning.AnchoredPosition,goog.ui.Popup.AnchoredViewPortPosition=goog.positioning.AnchoredViewportPosition,goog.ui.Popup.AbsolutePosition=goog.positioning.AbsolutePosition,goog.ui.Popup.ViewPortPosition=goog.positioning.ViewportPosition,goog.ui.Popup.ClientPosition=goog.positioning.ClientPosition,goog.ui.Popup.ViewPortClientPosition=goog.positioning.ViewportClientPosition,goog.ui.Tooltip=function(t,e,o){this.dom_=o||(t?goog.dom.getDomHelper(goog.dom.getElement(t)):goog.dom.getDomHelper()),goog.ui.Popup.call(this,this.dom_.createDom("div",{style:"position:absolute;display:none;"})),this.cursorPosition=new goog.math.Coordinate(1,1),this.elements_=new goog.structs.Set,t&&this.attach(t),null!=e&&this.setText(e)},goog.inherits(goog.ui.Tooltip,goog.ui.Popup),goog.ui.Tooltip.activeInstances_=[],goog.ui.Tooltip.prototype.activeEl_=null,goog.ui.Tooltip.prototype.className="goog-tooltip",goog.ui.Tooltip.prototype.showDelayMs_=500,goog.ui.Tooltip.prototype.hideDelayMs_=0,goog.ui.Tooltip.State={INACTIVE:0,WAITING_TO_SHOW:1,SHOWING:2,WAITING_TO_HIDE:3,UPDATING:4},goog.ui.Tooltip.Activation={CURSOR:0,FOCUS:1},goog.ui.Tooltip.prototype.getDomHelper=function(){return this.dom_},goog.ui.Tooltip.prototype.getChildTooltip=function(){return this.childTooltip_},goog.ui.Tooltip.prototype.attach=function(t){t=goog.dom.getElement(t),this.elements_.add(t),goog.events.listen(t,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this),goog.events.listen(t,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this),goog.events.listen(t,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this),goog.events.listen(t,goog.events.EventType.FOCUS,this.handleFocus,!1,this),goog.events.listen(t,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)},goog.ui.Tooltip.prototype.detach=function(t){if(t)t=goog.dom.getElement(t),this.detachElement_(t),this.elements_.remove(t);else{for(var e=this.elements_.getValues(),o=0;t=e[o];o++)this.detachElement_(t);this.elements_.clear()}},goog.ui.Tooltip.prototype.detachElement_=function(t){goog.events.unlisten(t,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this),goog.events.unlisten(t,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this),goog.events.unlisten(t,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this),goog.events.unlisten(t,goog.events.EventType.FOCUS,this.handleFocus,!1,this),goog.events.unlisten(t,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)},goog.ui.Tooltip.prototype.setShowDelayMs=function(t){this.showDelayMs_=t},goog.ui.Tooltip.prototype.getShowDelayMs=function(){return this.showDelayMs_},goog.ui.Tooltip.prototype.setHideDelayMs=function(t){this.hideDelayMs_=t},goog.ui.Tooltip.prototype.getHideDelayMs=function(){return this.hideDelayMs_},goog.ui.Tooltip.prototype.setText=function(t){goog.dom.setTextContent(this.getElement(),t)},goog.ui.Tooltip.prototype.setHtml=function(t){this.getElement().innerHTML=t},goog.ui.Tooltip.prototype.setElement=function(t){var e=this.getElement();e&&goog.dom.removeNode(e),goog.ui.Tooltip.superClass_.setElement.call(this,t),t&&(e=this.dom_.getDocument().body).insertBefore(t,e.lastChild)},goog.ui.Tooltip.prototype.getText=function(){return goog.dom.getTextContent(this.getElement())},goog.ui.Tooltip.prototype.getHtml=function(){return this.getElement().innerHTML},goog.ui.Tooltip.prototype.getState=function(){return this.showTimer?this.isVisible()?goog.ui.Tooltip.State.UPDATING:goog.ui.Tooltip.State.WAITING_TO_SHOW:this.hideTimer?goog.ui.Tooltip.State.WAITING_TO_HIDE:this.isVisible()?goog.ui.Tooltip.State.SHOWING:goog.ui.Tooltip.State.INACTIVE},goog.ui.Tooltip.prototype.setRequireInteraction=function(t){this.requireInteraction_=t},goog.ui.Tooltip.prototype.isCoordinateInTooltip=function(t){if(!this.isVisible())return!1;var e=goog.style.getPageOffset(this.getElement()),o=goog.style.getSize(this.getElement());return e.x<=t.x&&t.x<=e.x+o.width&&e.y<=t.y&&t.y<=e.y+o.height},goog.ui.Tooltip.prototype.onBeforeShow=function(){if(!goog.ui.PopupBase.prototype.onBeforeShow.call(this))return!1;if(this.anchor)for(var t,e=0;t=goog.ui.Tooltip.activeInstances_[e];e++)goog.dom.contains(t.getElement(),this.anchor)||t.setVisible(!1);return goog.array.insert(goog.ui.Tooltip.activeInstances_,this),t=this.getElement(),t.className=this.className,this.clearHideTimer(),goog.events.listen(t,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this),goog.events.listen(t,goog.events.EventType.MOUSEOUT,this.handleTooltipMouseOut,!1,this),this.clearShowTimer(),!0},goog.ui.Tooltip.prototype.onHide_=function(){goog.array.remove(goog.ui.Tooltip.activeInstances_,this);for(var t,e=this.getElement(),o=0;t=goog.ui.Tooltip.activeInstances_[o];o++)t.anchor&&goog.dom.contains(e,t.anchor)&&t.setVisible(!1);this.parentTooltip_&&this.parentTooltip_.startHideTimer(),goog.events.unlisten(e,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this),goog.events.unlisten(e,goog.events.EventType.MOUSEOUT,this.handleTooltipMouseOut,!1,this),this.anchor=void 0,this.getState()==goog.ui.Tooltip.State.INACTIVE&&(this.seenInteraction_=!1),goog.ui.PopupBase.prototype.onHide_.call(this)},goog.ui.Tooltip.prototype.maybeShow=function(t,e){this.anchor==t&&this.elements_.contains(this.anchor)&&(this.seenInteraction_||!this.requireInteraction_?(this.setVisible(!1),this.isVisible()||this.positionAndShow_(t,e)):this.anchor=void 0),this.showTimer=void 0},goog.ui.Tooltip.prototype.getElements=function(){return this.elements_},goog.ui.Tooltip.prototype.getActiveElement=function(){return this.activeEl_},goog.ui.Tooltip.prototype.setActiveElement=function(t){this.activeEl_=t},goog.ui.Tooltip.prototype.showForElement=function(t,e){this.attach(t),this.activeEl_=t,this.positionAndShow_(t,e)},goog.ui.Tooltip.prototype.positionAndShow_=function(t,e){this.anchor=t,this.setPosition(e||this.getPositioningStrategy(goog.ui.Tooltip.Activation.CURSOR)),this.setVisible(!0)},goog.ui.Tooltip.prototype.maybeHide=function(t){this.hideTimer=void 0,t==this.anchor&&(null==this.activeEl_||this.activeEl_!=this.getElement()&&!this.elements_.contains(this.activeEl_))&&!this.hasActiveChild()&&this.setVisible(!1)},goog.ui.Tooltip.prototype.hasActiveChild=function(){return!(!this.childTooltip_||!this.childTooltip_.activeEl_)},goog.ui.Tooltip.prototype.saveCursorPosition_=function(t){var e=this.dom_.getDocumentScroll();this.cursorPosition.x=t.clientX+e.x,this.cursorPosition.y=t.clientY+e.y},goog.ui.Tooltip.prototype.handleMouseOver=function(t){var e=this.getAnchorFromElement(t.target);this.activeEl_=e,this.clearHideTimer(),e!=this.anchor&&(this.anchor=e,this.startShowTimer(e),this.checkForParentTooltip_(),this.saveCursorPosition_(t))},goog.ui.Tooltip.prototype.getAnchorFromElement=function(t){try{for(;t&&!this.elements_.contains(t);)t=t.parentNode;return t}catch(e){return null}},goog.ui.Tooltip.prototype.handleMouseMove=function(t){this.saveCursorPosition_(t),this.seenInteraction_=!0},goog.ui.Tooltip.prototype.handleFocus=function(t){if(this.activeEl_=t=this.getAnchorFromElement(t.target),this.seenInteraction_=!0,this.anchor!=t){this.anchor=t;var e=this.getPositioningStrategy(goog.ui.Tooltip.Activation.FOCUS);this.clearHideTimer(),this.startShowTimer(t,e),this.checkForParentTooltip_()}},goog.ui.Tooltip.prototype.getPositioningStrategy=function(t){return t==goog.ui.Tooltip.Activation.CURSOR?(t=this.cursorPosition.clone(),new goog.ui.Tooltip.CursorTooltipPosition(t)):new goog.ui.Tooltip.ElementTooltipPosition(this.activeEl_)},goog.ui.Tooltip.prototype.checkForParentTooltip_=function(){if(this.anchor)for(var t,e=0;t=goog.ui.Tooltip.activeInstances_[e];e++)goog.dom.contains(t.getElement(),this.anchor)&&(t.childTooltip_=this,this.parentTooltip_=t)},goog.ui.Tooltip.prototype.handleMouseOutAndBlur=function(t){var e=this.getAnchorFromElement(t.target);e!=this.getAnchorFromElement(t.relatedTarget)&&(e==this.activeEl_&&(this.activeEl_=null),this.clearShowTimer(),this.seenInteraction_=!1,!this.isVisible()||t.relatedTarget&&goog.dom.contains(this.getElement(),t.relatedTarget)?this.anchor=void 0:this.startHideTimer())},goog.ui.Tooltip.prototype.handleTooltipMouseOver=function(t){t=this.getElement(),this.activeEl_!=t&&(this.clearHideTimer(),this.activeEl_=t)},goog.ui.Tooltip.prototype.handleTooltipMouseOut=function(t){var e=this.getElement();this.activeEl_!=e||t.relatedTarget&&goog.dom.contains(e,t.relatedTarget)||(this.activeEl_=null,this.startHideTimer())},goog.ui.Tooltip.prototype.startShowTimer=function(t,e){this.showTimer||(this.showTimer=goog.Timer.callOnce(goog.bind(this.maybeShow,this,t,e),this.showDelayMs_))},goog.ui.Tooltip.prototype.clearShowTimer=function(){this.showTimer&&(goog.Timer.clear(this.showTimer),this.showTimer=void 0)},goog.ui.Tooltip.prototype.startHideTimer=function(){this.getState()==goog.ui.Tooltip.State.SHOWING&&(this.hideTimer=goog.Timer.callOnce(goog.bind(this.maybeHide,this,this.anchor),this.getHideDelayMs()))},goog.ui.Tooltip.prototype.clearHideTimer=function(){this.hideTimer&&(goog.Timer.clear(this.hideTimer),this.hideTimer=void 0)},goog.ui.Tooltip.prototype.disposeInternal=function(){this.setVisible(!1),this.clearShowTimer(),this.detach(),this.getElement()&&goog.dom.removeNode(this.getElement()),this.activeEl_=null,delete this.dom_,goog.ui.Tooltip.superClass_.disposeInternal.call(this)},goog.ui.Tooltip.CursorTooltipPosition=function(t,e){goog.positioning.ViewportPosition.call(this,t,e)},goog.inherits(goog.ui.Tooltip.CursorTooltipPosition,goog.positioning.ViewportPosition),goog.ui.Tooltip.CursorTooltipPosition.prototype.reposition=function(t,e,o){e=goog.style.getClientViewportElement(t),e=goog.style.getVisibleRectForElement(e),o=o?new goog.math.Box(o.top+10,o.right,o.bottom,o.left+10):new goog.math.Box(10,0,0,10),goog.positioning.positionAtCoordinate(this.coordinate,t,goog.positioning.Corner.TOP_START,o,e,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtCoordinate(this.coordinate,t,goog.positioning.Corner.TOP_START,o,e,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)},goog.ui.Tooltip.ElementTooltipPosition=function(t){goog.positioning.AnchoredPosition.call(this,t,goog.positioning.Corner.BOTTOM_RIGHT)},goog.inherits(goog.ui.Tooltip.ElementTooltipPosition,goog.positioning.AnchoredPosition),goog.ui.Tooltip.ElementTooltipPosition.prototype.reposition=function(t,e,o){var i=new goog.math.Coordinate(10,0);goog.positioning.positionAtAnchor(this.element,this.corner,t,e,i,o,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtAnchor(this.element,goog.positioning.Corner.TOP_RIGHT,t,goog.positioning.Corner.BOTTOM_LEFT,i,o,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)},goog.events.KeyNames={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:"semicolon",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",186:"semicolon",187:"equals",189:"dash",188:",",190:".",191:"/",192:"~",219:"open-square-bracket",220:"\\",221:"close-square-bracket",222:"single-quote",224:"win"},goog.ui.KeyboardShortcutHandler=function(t){goog.events.EventTarget.call(this),this.shortcuts_={},this.lastKeys_={strokes:[],time:0},this.globalKeys_=goog.object.createSet(goog.ui.KeyboardShortcutHandler.DEFAULT_GLOBAL_KEYS_),this.textInputs_=goog.object.createSet(goog.ui.KeyboardShortcutHandler.DEFAULT_TEXT_INPUTS_),this.alwaysPreventDefault_=!0,this.allShortcutsAreGlobal_=this.alwaysStopPropagation_=!1,this.modifierShortcutsAreGlobal_=!0,this.initializeKeyListener(t)},goog.inherits(goog.ui.KeyboardShortcutHandler,goog.events.EventTarget),goog.ui.KeyboardShortcutHandler.MAX_KEY_SEQUENCE_DELAY=1500,goog.ui.KeyboardShortcutHandler.Modifiers={NONE:0,SHIFT:1,CTRL:2,ALT:4,META:8},
goog.ui.KeyboardShortcutHandler.DEFAULT_GLOBAL_KEYS_=[goog.events.KeyCodes.ESC,goog.events.KeyCodes.F1,goog.events.KeyCodes.F2,goog.events.KeyCodes.F3,goog.events.KeyCodes.F4,goog.events.KeyCodes.F5,goog.events.KeyCodes.F6,goog.events.KeyCodes.F7,goog.events.KeyCodes.F8,goog.events.KeyCodes.F9,goog.events.KeyCodes.F10,goog.events.KeyCodes.F11,goog.events.KeyCodes.F12,goog.events.KeyCodes.PAUSE],goog.ui.KeyboardShortcutHandler.DEFAULT_TEXT_INPUTS_="color date datetime datetime-local email month number password search tel text time url week".split(" "),goog.ui.KeyboardShortcutHandler.EventType={SHORTCUT_TRIGGERED:"shortcut",SHORTCUT_PREFIX:"shortcut_"},goog.ui.KeyboardShortcutHandler.getKeyCode=function(t){if(!goog.ui.KeyboardShortcutHandler.nameToKeyCodeCache_){var e,o={};for(e in goog.events.KeyNames)o[goog.events.KeyNames[e]]=e;goog.ui.KeyboardShortcutHandler.nameToKeyCodeCache_=o}return goog.ui.KeyboardShortcutHandler.nameToKeyCodeCache_[t]},goog.ui.KeyboardShortcutHandler.prototype.setAlwaysPreventDefault=function(t){this.alwaysPreventDefault_=t},goog.ui.KeyboardShortcutHandler.prototype.getAlwaysPreventDefault=function(){return this.alwaysPreventDefault_},goog.ui.KeyboardShortcutHandler.prototype.setAlwaysStopPropagation=function(t){this.alwaysStopPropagation_=t},goog.ui.KeyboardShortcutHandler.prototype.getAlwaysStopPropagation=function(){return this.alwaysStopPropagation_},goog.ui.KeyboardShortcutHandler.prototype.setAllShortcutsAreGlobal=function(t){this.allShortcutsAreGlobal_=t},goog.ui.KeyboardShortcutHandler.prototype.getAllShortcutsAreGlobal=function(){return this.allShortcutsAreGlobal_},goog.ui.KeyboardShortcutHandler.prototype.setModifierShortcutsAreGlobal=function(t){this.modifierShortcutsAreGlobal_=t},goog.ui.KeyboardShortcutHandler.prototype.getModifierShortcutsAreGlobal=function(){return this.modifierShortcutsAreGlobal_},goog.ui.KeyboardShortcutHandler.prototype.registerShortcut=function(t){goog.ui.KeyboardShortcutHandler.setShortcut_(this.shortcuts_,this.interpretStrokes_(1,arguments),t)},goog.ui.KeyboardShortcutHandler.prototype.unregisterShortcut=function(){goog.ui.KeyboardShortcutHandler.setShortcut_(this.shortcuts_,this.interpretStrokes_(0,arguments),null)},goog.ui.KeyboardShortcutHandler.prototype.isShortcutRegistered=function(){return this.checkShortcut_(this.interpretStrokes_(0,arguments))},goog.ui.KeyboardShortcutHandler.prototype.interpretStrokes_=function(t,e){var o;if(goog.isString(e[t]))o=goog.ui.KeyboardShortcutHandler.parseStringShortcut(e[t]);else{var i=e,n=t;for(goog.isArray(e[t])&&(i=e[t],n=0),o=[];n<i.length;n+=2)o.push({keyCode:i[n],modifiers:i[n+1]})}return o},goog.ui.KeyboardShortcutHandler.prototype.unregisterAll=function(){this.shortcuts_={}},goog.ui.KeyboardShortcutHandler.prototype.setGlobalKeys=function(t){this.globalKeys_=goog.object.createSet(t)},goog.ui.KeyboardShortcutHandler.prototype.getGlobalKeys=function(){return goog.object.getKeys(this.globalKeys_)},goog.ui.KeyboardShortcutHandler.prototype.disposeInternal=function(){goog.ui.KeyboardShortcutHandler.superClass_.disposeInternal.call(this),this.unregisterAll(),this.clearKeyListener()},goog.ui.KeyboardShortcutHandler.prototype.getEventType=function(t){return goog.ui.KeyboardShortcutHandler.EventType.SHORTCUT_PREFIX+t},goog.ui.KeyboardShortcutHandler.parseStringShortcut=function(t){t=(t=t.replace(/[ +]*\+[ +]*/g,"+").replace(/[ ]+/g," ").toLowerCase()).split(" ");for(var e,o=[],i=0;e=t[i];i++){e=e.split("+");for(var n,r,g=goog.ui.KeyboardShortcutHandler.Modifiers.NONE,s=0;r=e[s];s++){switch(r){case"shift":g|=goog.ui.KeyboardShortcutHandler.Modifiers.SHIFT;continue;case"ctrl":g|=goog.ui.KeyboardShortcutHandler.Modifiers.CTRL;continue;case"alt":g|=goog.ui.KeyboardShortcutHandler.Modifiers.ALT;continue;case"meta":g|=goog.ui.KeyboardShortcutHandler.Modifiers.META;continue}n=goog.ui.KeyboardShortcutHandler.getKeyCode(r);break}o.push({keyCode:n,modifiers:g})}return o},goog.ui.KeyboardShortcutHandler.prototype.initializeKeyListener=function(t){this.keyTarget_=t,goog.events.listen(this.keyTarget_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,!1,this),goog.userAgent.MAC&&goog.userAgent.GECKO&&goog.userAgent.isVersion("1.8")&&goog.events.listen(this.keyTarget_,goog.events.EventType.KEYUP,this.handleMacGeckoKeyUp_,!1,this),goog.userAgent.WINDOWS&&!goog.userAgent.GECKO&&(goog.events.listen(this.keyTarget_,goog.events.EventType.KEYPRESS,this.handleWindowsKeyPress_,!1,this),goog.events.listen(this.keyTarget_,goog.events.EventType.KEYUP,this.handleWindowsKeyUp_,!1,this))},goog.ui.KeyboardShortcutHandler.prototype.handleMacGeckoKeyUp_=function(t){if(t.keyCode==goog.events.KeyCodes.MAC_FF_META)this.metaKeyRecentlyReleased_=!0,goog.Timer.callOnce(function(){this.metaKeyRecentlyReleased_=!1},400,this);else{var e=t.metaKey||this.metaKeyRecentlyReleased_;t.keyCode!=goog.events.KeyCodes.C&&t.keyCode!=goog.events.KeyCodes.X&&t.keyCode!=goog.events.KeyCodes.V||!e||(t.metaKey=e,this.handleKeyDown_(t))}},goog.ui.KeyboardShortcutHandler.prototype.isPossiblePrintableKey_=function(t){return goog.userAgent.WINDOWS&&!goog.userAgent.GECKO&&t.ctrlKey&&t.altKey&&!t.shiftKey},goog.ui.KeyboardShortcutHandler.prototype.handleWindowsKeyPress_=function(t){32<t.keyCode&&this.isPossiblePrintableKey_(t)&&(this.isPrintableKey_=!0)},goog.ui.KeyboardShortcutHandler.prototype.handleWindowsKeyUp_=function(t){!this.isPrintableKey_&&this.isPossiblePrintableKey_(t)&&this.handleKeyDown_(t)},goog.ui.KeyboardShortcutHandler.prototype.clearKeyListener=function(){goog.events.unlisten(this.keyTarget_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,!1,this),goog.userAgent.MAC&&goog.userAgent.GECKO&&goog.userAgent.isVersion("1.8")&&goog.events.unlisten(this.keyTarget_,goog.events.EventType.KEYUP,this.handleMacGeckoKeyUp_,!1,this),goog.userAgent.WINDOWS&&!goog.userAgent.GECKO&&(goog.events.unlisten(this.keyTarget_,goog.events.EventType.KEYPRESS,this.handleWindowsKeyPress_,!1,this),goog.events.unlisten(this.keyTarget_,goog.events.EventType.KEYUP,this.handleWindowsKeyUp_,!1,this)),this.keyTarget_=null},goog.ui.KeyboardShortcutHandler.setShortcut_=function(t,e,o){var i=e.shift(),n=t[i=goog.ui.KeyboardShortcutHandler.makeKey_(i.keyCode,i.modifiers)];if(n&&o&&(0==e.length||goog.isString(n)))throw Error("Keyboard shortcut conflicts with existing shortcut");e.length?(n||(n=t[i]={}),goog.ui.KeyboardShortcutHandler.setShortcut_(n,e,o)):t[i]=o},goog.ui.KeyboardShortcutHandler.prototype.getShortcut_=function(t,e,o){return e=e||0,(o=(o||this.shortcuts_)[t[e]])&&!goog.isString(o)&&1<t.length-e?this.getShortcut_(t,e+1,o):o},goog.ui.KeyboardShortcutHandler.prototype.checkShortcut_=function(t){for(var e=this.shortcuts_;0<t.length&&e;){var o=t.shift();e=e[o=goog.ui.KeyboardShortcutHandler.makeKey_(o.keyCode,o.modifiers)];if(goog.isString(e))return!0}return!1},goog.ui.KeyboardShortcutHandler.makeKey_=function(t,e){return 255&t|e<<8},goog.ui.KeyboardShortcutHandler.prototype.handleKeyDown_=function(t){if(this.isValidShortcut_(t))if("keydown"==t.type&&this.isPossiblePrintableKey_(t))this.isPrintableKey_=!1;else{var e,o,i=goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(t.keyCode):t.keyCode,n=(i=goog.ui.KeyboardShortcutHandler.makeKey_(i,(t.shiftKey?goog.ui.KeyboardShortcutHandler.Modifiers.SHIFT:0)|(t.ctrlKey?goog.ui.KeyboardShortcutHandler.Modifiers.CTRL:0)|(t.altKey?goog.ui.KeyboardShortcutHandler.Modifiers.ALT:0)|(t.metaKey?goog.ui.KeyboardShortcutHandler.Modifiers.META:0)),goog.now());this.lastKeys_.strokes.length&&n-this.lastKeys_.time<=goog.ui.KeyboardShortcutHandler.MAX_KEY_SEQUENCE_DELAY?e=this.getShortcut_(this.lastKeys_.strokes):this.lastKeys_.strokes.length=0,(e=e?e[i]:this.shortcuts_[i])||(e=this.shortcuts_[i],this.lastKeys_.strokes=[]),e&&goog.isString(e)?o=e:e?(this.lastKeys_.strokes.push(i),this.lastKeys_.time=n,goog.userAgent.GECKO&&t.preventDefault()):this.lastKeys_.strokes.length=0,o&&(this.alwaysPreventDefault_&&t.preventDefault(),this.alwaysStopPropagation_&&t.stopPropagation(),e=goog.ui.KeyboardShortcutHandler.EventType,i=t.target,n=new goog.ui.KeyboardShortcutEvent(e.SHORTCUT_TRIGGERED,o,i),n=this.dispatchEvent(n),o=new goog.ui.KeyboardShortcutEvent(e.SHORTCUT_PREFIX+o,o,i),(n&=this.dispatchEvent(o))||t.preventDefault(),this.lastKeys_.strokes.length=0)}},goog.ui.KeyboardShortcutHandler.prototype.isValidShortcut_=function(t){var e=t.keyCode;if(e==goog.events.KeyCodes.SHIFT||e==goog.events.KeyCodes.CTRL||e==goog.events.KeyCodes.ALT)return!1;var o=t.target,i="TEXTAREA"==o.tagName||"INPUT"==o.tagName||"BUTTON"==o.tagName||"SELECT"==o.tagName,n=!i&&(o.isContentEditable||o.ownerDocument&&"on"==o.ownerDocument.designMode);return!((i||n)&&!this.globalKeys_[e]&&!this.allShortcutsAreGlobal_)||!n&&(!(!this.modifierShortcutsAreGlobal_||!(t.altKey||t.ctrlKey||t.metaKey))||("INPUT"==o.tagName&&this.textInputs_[o.type]?e==goog.events.KeyCodes.ENTER:("INPUT"==o.tagName||"BUTTON"==o.tagName)&&e!=goog.events.KeyCodes.SPACE))},goog.ui.KeyboardShortcutEvent=function(t,e,o){goog.events.Event.call(this,t,o),this.identifier=e},goog.inherits(goog.ui.KeyboardShortcutEvent,goog.events.Event),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_CAMINO=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_CAMINO||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.init_=function(){goog.userAgent.product.detectedFirefox_=!1,goog.userAgent.product.detectedCamino_=!1,goog.userAgent.product.detectedIphone_=!1,goog.userAgent.product.detectedIpad_=!1,goog.userAgent.product.detectedAndroid_=!1,goog.userAgent.product.detectedChrome_=!1,goog.userAgent.product.detectedSafari_=!1;var t=goog.userAgent.getUserAgentString();t&&(-1!=t.indexOf("Firefox")?goog.userAgent.product.detectedFirefox_=!0:-1!=t.indexOf("Camino")?goog.userAgent.product.detectedCamino_=!0:-1!=t.indexOf("iPhone")||-1!=t.indexOf("iPod")?goog.userAgent.product.detectedIphone_=!0:-1!=t.indexOf("iPad")?goog.userAgent.product.detectedIpad_=!0:-1!=t.indexOf("Android")?goog.userAgent.product.detectedAndroid_=!0:-1!=t.indexOf("Chrome")?goog.userAgent.product.detectedChrome_=!0:-1!=t.indexOf("Safari")&&(goog.userAgent.product.detectedSafari_=!0))},goog.userAgent.product.PRODUCT_KNOWN_||goog.userAgent.product.init_(),goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.userAgent.product.detectedFirefox_,goog.userAgent.product.CAMINO=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CAMINO:goog.userAgent.product.detectedCamino_,goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.detectedIphone_,goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.userAgent.product.detectedIpad_,goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.userAgent.product.detectedAndroid_,goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.userAgent.product.detectedChrome_,goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.detectedSafari_,goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer),goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator",goog.ui.MenuSeparatorRenderer.prototype.createDom=function(t){return t.getDomHelper().createDom("div",this.getCssClass())},goog.ui.MenuSeparatorRenderer.prototype.decorate=function(t,e){if(e.id&&t.setId(e.id),"HR"==e.tagName){var o=e;e=this.createDom(t),goog.dom.insertSiblingBefore(e,o),goog.dom.removeNode(o)}else goog.dom.classes.add(e,this.getCssClass());return e},goog.ui.MenuSeparatorRenderer.prototype.setContent=function(){},goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS},goog.ui.Separator=function(t,e){goog.ui.Control.call(this,null,t||goog.ui.MenuSeparatorRenderer.getInstance(),e),this.setSupportedState(goog.ui.Component.State.DISABLED,!1),this.setSupportedState(goog.ui.Component.State.HOVER,!1),this.setSupportedState(goog.ui.Component.State.ACTIVE,!1),this.setSupportedState(goog.ui.Component.State.FOCUSED,!1),this.setStateInternal(goog.ui.Component.State.DISABLED)},goog.inherits(goog.ui.Separator,goog.ui.Control),goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);var t=this.getElement();goog.asserts.assert(t,"The DOM element for the separator cannot be null."),goog.a11y.aria.setRole(t,"separator")},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator}),goog.ui.ContainerRenderer=function(){},goog.addSingletonGetter(goog.ui.ContainerRenderer),goog.ui.ContainerRenderer.getCustomRenderer=function(t,e){var o=new t;return o.getCssClass=function(){return e},o},goog.ui.ContainerRenderer.CSS_CLASS="goog-container",goog.ui.ContainerRenderer.prototype.getAriaRole=function(){},goog.ui.ContainerRenderer.prototype.enableTabIndex=function(t,e){t&&(t.tabIndex=e?0:-1)},goog.ui.ContainerRenderer.prototype.createDom=function(t){return t.getDomHelper().createDom("div",this.getClassNames(t).join(" "))},goog.ui.ContainerRenderer.prototype.getContentElement=function(t){return t},goog.ui.ContainerRenderer.prototype.canDecorate=function(t){return"DIV"==t.tagName},goog.ui.ContainerRenderer.prototype.decorate=function(t,e){e.id&&t.setId(e.id);var o=this.getCssClass(),i=!1,n=goog.dom.classes.get(e);return n&&goog.array.forEach(n,function(e){e==o?i=!0:e&&this.setStateFromClassName(t,e,o)},this),i||goog.dom.classes.add(e,o),this.decorateChildren(t,this.getContentElement(e)),e},goog.ui.ContainerRenderer.prototype.setStateFromClassName=function(t,e,o){e==o+"-disabled"?t.setEnabled(!1):e==o+"-horizontal"?t.setOrientation(goog.ui.Container.Orientation.HORIZONTAL):e==o+"-vertical"&&t.setOrientation(goog.ui.Container.Orientation.VERTICAL)},goog.ui.ContainerRenderer.prototype.decorateChildren=function(t,e,o){if(e){o=o||e.firstChild;for(var i;o&&o.parentNode==e;){if(i=o.nextSibling,o.nodeType==goog.dom.NodeType.ELEMENT){var n=this.getDecoratorForChild(o);n&&(n.setElementInternal(o),t.isEnabled()||n.setEnabled(!1),t.addChild(n),n.decorate(o))}else(!o.nodeValue||""==goog.string.trim(o.nodeValue))&&e.removeChild(o);o=i}}},goog.ui.ContainerRenderer.prototype.getDecoratorForChild=function(t){return goog.ui.registry.getDecorator(t)},goog.ui.ContainerRenderer.prototype.initializeDom=function(t){t=t.getElement(),goog.asserts.assert(t,"The container DOM element cannot be null."),goog.style.setUnselectable(t,!0,goog.userAgent.GECKO),goog.userAgent.IE&&(t.hideFocus=!0);var e=this.getAriaRole();e&&goog.a11y.aria.setRole(t,e)},goog.ui.ContainerRenderer.prototype.getKeyEventTarget=function(t){return t.getElement()},goog.ui.ContainerRenderer.prototype.getCssClass=function(){return goog.ui.ContainerRenderer.CSS_CLASS},goog.ui.ContainerRenderer.prototype.getClassNames=function(t){var e=this.getCssClass(),o=[e,(o=t.getOrientation()==goog.ui.Container.Orientation.HORIZONTAL)?e+"-horizontal":e+"-vertical"];return t.isEnabled()||o.push(e+"-disabled"),o},goog.ui.ContainerRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.VERTICAL},goog.ui.MenuRenderer=function(){goog.ui.ContainerRenderer.call(this)},goog.inherits(goog.ui.MenuRenderer,goog.ui.ContainerRenderer),goog.addSingletonGetter(goog.ui.MenuRenderer),goog.ui.MenuRenderer.CSS_CLASS="goog-menu",goog.ui.MenuRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU},goog.ui.MenuRenderer.prototype.canDecorate=function(t){return"UL"==t.tagName||goog.ui.MenuRenderer.superClass_.canDecorate.call(this,t)},goog.ui.MenuRenderer.prototype.getDecoratorForChild=function(t){return"HR"==t.tagName?new goog.ui.Separator:goog.ui.MenuRenderer.superClass_.getDecoratorForChild.call(this,t)},goog.ui.MenuRenderer.prototype.containsElement=function(t,e){return goog.dom.contains(t.getElement(),e)},goog.ui.MenuRenderer.prototype.getCssClass=function(){return goog.ui.MenuRenderer.CSS_CLASS},goog.ui.MenuRenderer.prototype.initializeDom=function(t){goog.ui.MenuRenderer.superClass_.initializeDom.call(this,t),t=t.getElement(),goog.asserts.assert(t,"The menu DOM element cannot be null."),goog.a11y.aria.setState(t,goog.a11y.aria.State.HASPOPUP,"true")},goog.ui.MenuSeparator=function(t){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),t)},goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator),goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator}),goog.dom.classlist={},goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1,goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_=goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||"undefined"!=typeof DOMTokenList,goog.dom.classlist.get=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(t){return t.classList}:function(t){return t=t.className,goog.isString(t)&&t.match(/\S+/g)||[]},goog.dom.classlist.set=function(t,e){t.className=e},goog.dom.classlist.contains=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(t,e){return goog.asserts.assert(!!t.classList),t.classList.contains(e)}:function(t,e){return goog.array.contains(goog.dom.classlist.get(t),e)},goog.dom.classlist.add=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(t,e){t.classList.add(e)}:function(t,e){goog.dom.classlist.contains(t,e)||(t.className+=0<t.className.length?" "+e:e)},goog.dom.classlist.addAll=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(t,e){goog.array.forEach(e,function(e){goog.dom.classlist.add(t,e)})}:function(t,e){var o={};goog.array.forEach(goog.dom.classlist.get(t),function(t){o[t]=!0}),goog.array.forEach(e,function(t){o[t]=!0}),t.className="";for(var i in o)t.className+=0<t.className.length?" "+i:i},goog.dom.classlist.remove=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(t,e){t.classList.remove(e)}:function(t,e){goog.dom.classlist.contains(t,e)&&(t.className=goog.array.filter(goog.dom.classlist.get(t),function(t){return t!=e}).join(" "))},goog.dom.classlist.removeAll=goog.dom.classlist.NATIVE_DOM_TOKEN_LIST_?function(t,e){goog.array.forEach(e,function(e){goog.dom.classlist.remove(t,e)})}:function(t,e){t.className=goog.array.filter(goog.dom.classlist.get(t),function(t){return!goog.array.contains(e,t)}).join(" ")},goog.dom.classlist.enable=function(t,e,o){o?goog.dom.classlist.add(t,e):goog.dom.classlist.remove(t,e)},goog.dom.classlist.swap=function(t,e,o){return!!goog.dom.classlist.contains(t,e)&&(goog.dom.classlist.remove(t,e),goog.dom.classlist.add(t,o),!0)},goog.dom.classlist.toggle=function(t,e){var o=!goog.dom.classlist.contains(t,e);return goog.dom.classlist.enable(t,e,o),o},goog.dom.classlist.addRemove=function(t,e,o){goog.dom.classlist.remove(t,e),goog.dom.classlist.add(t,o)},goog.ui.MenuItemRenderer=function(){goog.ui.ControlRenderer.call(this),this.classNameCache_=[]},goog.inherits(goog.ui.MenuItemRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuItemRenderer),goog.ui.MenuItemRenderer.CSS_CLASS="goog-menuitem",goog.ui.MenuItemRenderer.CompositeCssClassIndex_={HOVER:0,CHECKBOX:1,CONTENT:2},goog.ui.MenuItemRenderer.prototype.getCompositeCssClass_=function(t){var e=this.classNameCache_[t];if(!e){switch(t){case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER:e=this.getStructuralCssClass()+"-highlight";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX:e=this.getStructuralCssClass()+"-checkbox";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT:e=this.getStructuralCssClass()+"-content"}this.classNameCache_[t]=e}return e},goog.ui.MenuItemRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU_ITEM},goog.ui.MenuItemRenderer.prototype.createDom=function(t){var e=t.getDomHelper().createDom("div",this.getClassNames(t).join(" "),this.createContent(t.getContent(),t.getDomHelper()));return this.setEnableCheckBoxStructure(t,e,t.isSupportedState(goog.ui.Component.State.SELECTED)||t.isSupportedState(goog.ui.Component.State.CHECKED)),this.setAriaStates(t,e),e},goog.ui.MenuItemRenderer.prototype.getContentElement=function(t){return t&&t.firstChild},goog.ui.MenuItemRenderer.prototype.decorate=function(t,e){return this.hasContentStructure(e)||e.appendChild(this.createContent(e.childNodes,t.getDomHelper())),goog.dom.classlist.contains(e,"goog-option")&&(t.setCheckable(!0),this.setCheckable(t,e,!0)),goog.ui.MenuItemRenderer.superClass_.decorate.call(this,t,e)},goog.ui.MenuItemRenderer.prototype.setContent=function(t,e){var o=this.getContentElement(t),i=this.hasCheckBoxStructure(t)?o.firstChild:null;goog.ui.MenuItemRenderer.superClass_.setContent.call(this,t,e),i&&!this.hasCheckBoxStructure(t)&&o.insertBefore(i,o.firstChild||null)},goog.ui.MenuItemRenderer.prototype.hasContentStructure=function(t){t=goog.dom.getFirstElementChild(t);var e=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return!!t&&goog.dom.classlist.contains(t,e)},goog.ui.MenuItemRenderer.prototype.createContent=function(t,e){var o=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return e.createDom("div",o,t)},goog.ui.MenuItemRenderer.prototype.setSelectable=function(t,e,o){e&&(goog.a11y.aria.setRole(e,o?goog.a11y.aria.Role.MENU_ITEM_RADIO:this.getAriaRole()),this.setEnableCheckBoxStructure(t,e,o))},goog.ui.MenuItemRenderer.prototype.setCheckable=function(t,e,o){e&&(goog.a11y.aria.setRole(e,o?goog.a11y.aria.Role.MENU_ITEM_CHECKBOX:this.getAriaRole()),this.setEnableCheckBoxStructure(t,e,o))},goog.ui.MenuItemRenderer.prototype.hasCheckBoxStructure=function(t){if(t=this.getContentElement(t)){t=goog.dom.getFirstElementChild(t);var e=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX);return!!t&&goog.dom.classlist.contains(t,e)}return!1},goog.ui.MenuItemRenderer.prototype.setEnableCheckBoxStructure=function(t,e,o){o!=this.hasCheckBoxStructure(e)&&(goog.dom.classlist.enable(e,"goog-option",o),e=this.getContentElement(e),o?(o=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX),e.insertBefore(t.getDomHelper().createDom("div",o),e.firstChild||null)):e.removeChild(e.firstChild))},goog.ui.MenuItemRenderer.prototype.getClassForState=function(t){switch(t){case goog.ui.Component.State.HOVER:return this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);case goog.ui.Component.State.CHECKED:case goog.ui.Component.State.SELECTED:return"goog-option-selected";default:return goog.ui.MenuItemRenderer.superClass_.getClassForState.call(this,t)}},goog.ui.MenuItemRenderer.prototype.getStateFromClass=function(t){var e=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);switch(t){case"goog-option-selected":return goog.ui.Component.State.CHECKED;case e:return goog.ui.Component.State.HOVER;default:return goog.ui.MenuItemRenderer.superClass_.getStateFromClass.call(this,t)}},goog.ui.MenuItemRenderer.prototype.getCssClass=function(){return goog.ui.MenuItemRenderer.CSS_CLASS},goog.ui.MenuItem=function(t,e,o,i){goog.ui.Control.call(this,t,i||goog.ui.MenuItemRenderer.getInstance(),o),this.setValue(e)},goog.inherits(goog.ui.MenuItem,goog.ui.Control),goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_="goog-menuitem-mnemonic-separator",goog.ui.MenuItem.ACCELERATOR_CLASS_="goog-menuitem-accel",goog.ui.MenuItem.prototype.getValue=function(){var t=this.getModel();return null!=t?t:this.getCaption()},goog.ui.MenuItem.prototype.setValue=function(t){this.setModel(t)},goog.ui.MenuItem.prototype.setSelectable=function(t){this.setSupportedState(goog.ui.Component.State.SELECTED,t),this.isChecked()&&!t&&this.setChecked(!1);var e=this.getElement();e&&this.getRenderer().setSelectable(this,e,t)},goog.ui.MenuItem.prototype.setCheckable=function(t){this.setSupportedState(goog.ui.Component.State.CHECKED,t);var e=this.getElement();e&&this.getRenderer().setCheckable(this,e,t)},goog.ui.MenuItem.prototype.getCaption=function(){var t=this.getContent();if(goog.isArray(t)){var e=goog.ui.MenuItem.ACCELERATOR_CLASS_,o=goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_;t=goog.array.map(t,function(t){var i=goog.dom.classes.get(t);return goog.array.contains(i,e)||goog.array.contains(i,o)?"":goog.dom.getRawTextContent(t)}).join("");return goog.string.collapseBreakingSpaces(t)}return goog.ui.MenuItem.superClass_.getCaption.call(this)},goog.ui.MenuItem.prototype.handleMouseUp=function(t){var e=this.getParent();if(e){var o=e.openingCoords;if(e.openingCoords=null,o&&goog.isNumber(t.clientX)&&(e=new goog.math.Coordinate(t.clientX,t.clientY),goog.math.Coordinate.equals(o,e)))return}goog.ui.MenuItem.superClass_.handleMouseUp.call(this,t)},goog.ui.MenuItem.prototype.handleKeyEventInternal=function(t){return!(t.keyCode!=this.getMnemonic()||!this.performActionInternal(t))||goog.ui.MenuItem.superClass_.handleKeyEventInternal.call(this,t)},goog.ui.MenuItem.prototype.setMnemonic=function(t){this.mnemonicKey_=t},goog.ui.MenuItem.prototype.getMnemonic=function(){return this.mnemonicKey_},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS,function(){return new goog.ui.MenuItem(null)}),goog.ui.Container=function(t,e,o){goog.ui.Component.call(this,o),this.renderer_=e||goog.ui.ContainerRenderer.getInstance(),this.orientation_=t||this.renderer_.getDefaultOrientation()},goog.inherits(goog.ui.Container,goog.ui.Component),goog.ui.Container.EventType={AFTER_SHOW:"aftershow",AFTER_HIDE:"afterhide"},goog.ui.Container.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"},goog.ui.Container.prototype.keyEventTarget_=null,goog.ui.Container.prototype.keyHandler_=null,goog.ui.Container.prototype.renderer_=null,goog.ui.Container.prototype.orientation_=null,goog.ui.Container.prototype.visible_=!0,goog.ui.Container.prototype.enabled_=!0,goog.ui.Container.prototype.focusable_=!0,goog.ui.Container.prototype.highlightedIndex_=-1,goog.ui.Container.prototype.openItem_=null,goog.ui.Container.prototype.mouseButtonPressed_=!1,goog.ui.Container.prototype.allowFocusableChildren_=!1,goog.ui.Container.prototype.openFollowsHighlight_=!0,goog.ui.Container.prototype.childElementIdMap_=null,goog.ui.Container.prototype.getKeyEventTarget=function(){return this.keyEventTarget_||this.renderer_.getKeyEventTarget(this)},goog.ui.Container.prototype.setKeyEventTarget=function(t){if(!this.focusable_)throw Error("Can't set key event target for container that doesn't support keyboard focus!");var e=this.getKeyEventTarget(),o=this.isInDocument();this.keyEventTarget_=t;var i=this.getKeyEventTarget();o&&(this.keyEventTarget_=e,this.enableFocusHandling_(!1),this.keyEventTarget_=t,this.getKeyHandler().attach(i),this.enableFocusHandling_(!0))},goog.ui.Container.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler(this.getKeyEventTarget()))},goog.ui.Container.prototype.getRenderer=function(){return this.renderer_},goog.ui.Container.prototype.setRenderer=function(t){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.renderer_=t},goog.ui.Container.prototype.createDom=function(){this.setElementInternal(this.renderer_.createDom(this))},goog.ui.Container.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())},goog.ui.Container.prototype.canDecorate=function(t){return this.renderer_.canDecorate(t)},goog.ui.Container.prototype.decorateInternal=function(t){this.setElementInternal(this.renderer_.decorate(this,t)),"none"==t.style.display&&(this.visible_=!1)},goog.ui.Container.prototype.enterDocument=function(){goog.ui.Container.superClass_.enterDocument.call(this),this.forEachChild(function(t){t.isInDocument()&&this.registerChildId_(t)},this);var t=this.getElement();this.renderer_.initializeDom(this),this.setVisible(this.visible_,!0),this.getHandler().listen(this,goog.ui.Component.EventType.ENTER,this.handleEnterItem).listen(this,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem).listen(this,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem).listen(this,goog.ui.Component.EventType.OPEN,this.handleOpenItem).listen(this,goog.ui.Component.EventType.CLOSE,this.handleCloseItem).listen(t,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(goog.dom.getOwnerDocument(t),goog.events.EventType.MOUSEUP,this.handleDocumentMouseUp).listen(t,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.MOUSEUP,goog.events.EventType.MOUSEOVER,goog.events.EventType.MOUSEOUT,goog.events.EventType.CONTEXTMENU],this.handleChildMouseEvents),this.isFocusable()&&this.enableFocusHandling_(!0)},goog.ui.Container.prototype.enableFocusHandling_=function(t){var e=this.getHandler(),o=this.getKeyEventTarget();t?e.listen(o,goog.events.EventType.FOCUS,this.handleFocus).listen(o,goog.events.EventType.BLUR,this.handleBlur).listen(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent):e.unlisten(o,goog.events.EventType.FOCUS,this.handleFocus).unlisten(o,goog.events.EventType.BLUR,this.handleBlur).unlisten(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent)},goog.ui.Container.prototype.exitDocument=function(){this.setHighlightedIndex(-1),this.openItem_&&this.openItem_.setOpen(!1),this.mouseButtonPressed_=!1,goog.ui.Container.superClass_.exitDocument.call(this)},goog.ui.Container.prototype.disposeInternal=function(){goog.ui.Container.superClass_.disposeInternal.call(this),this.keyHandler_&&(this.keyHandler_.dispose(),this.keyHandler_=null),this.renderer_=this.openItem_=this.childElementIdMap_=this.keyEventTarget_=null},goog.ui.Container.prototype.handleEnterItem=function(){return!0},goog.ui.Container.prototype.handleHighlightItem=function(t){var e=this.indexOfChild(t.target);if(-1<e&&e!=this.highlightedIndex_){var o=this.getHighlighted();o&&o.setHighlighted(!1),this.highlightedIndex_=e,o=this.getHighlighted(),this.isMouseButtonPressed()&&o.setActive(!0),this.openFollowsHighlight_&&this.openItem_&&o!=this.openItem_&&(o.isSupportedState(goog.ui.Component.State.OPENED)?o.setOpen(!0):this.openItem_.setOpen(!1))}e=this.getElement(),goog.asserts.assert(e,"The DOM element for the container cannot be null."),null!=t.target.getElement()&&goog.a11y.aria.setState(e,goog.a11y.aria.State.ACTIVEDESCENDANT,t.target.getElement().id)},goog.ui.Container.prototype.handleUnHighlightItem=function(t){t.target==this.getHighlighted()&&(this.highlightedIndex_=-1),t=this.getElement(),goog.asserts.assert(t,"The DOM element for the container cannot be null."),goog.a11y.aria.setState(t,goog.a11y.aria.State.ACTIVEDESCENDANT,"")},goog.ui.Container.prototype.handleOpenItem=function(t){(t=t.target)&&t!=this.openItem_&&t.getParent()==this&&(this.openItem_&&this.openItem_.setOpen(!1),this.openItem_=t)},goog.ui.Container.prototype.handleCloseItem=function(t){t.target==this.openItem_&&(this.openItem_=null)},goog.ui.Container.prototype.handleMouseDown=function(t){this.enabled_&&this.setMouseButtonPressed(!0);var e=this.getKeyEventTarget();e&&goog.dom.isFocusableTabIndex(e)?e.focus():t.preventDefault()},goog.ui.Container.prototype.handleDocumentMouseUp=function(){this.setMouseButtonPressed(!1)},goog.ui.Container.prototype.handleChildMouseEvents=function(t){var e=this.getOwnerControl(t.target);if(e)switch(t.type){case goog.events.EventType.MOUSEDOWN:e.handleMouseDown(t);break;case goog.events.EventType.MOUSEUP:e.handleMouseUp(t);break;case goog.events.EventType.MOUSEOVER:e.handleMouseOver(t);break;case goog.events.EventType.MOUSEOUT:e.handleMouseOut(t);break;case goog.events.EventType.CONTEXTMENU:e.handleContextMenu(t)}},goog.ui.Container.prototype.getOwnerControl=function(t){if(this.childElementIdMap_)for(var e=this.getElement();t&&t!==e;){var o=t.id;if(o in this.childElementIdMap_)return this.childElementIdMap_[o];t=t.parentNode}return null},goog.ui.Container.prototype.handleFocus=function(){},goog.ui.Container.prototype.handleBlur=function(){this.setHighlightedIndex(-1),
this.setMouseButtonPressed(!1),this.openItem_&&this.openItem_.setOpen(!1)},goog.ui.Container.prototype.handleKeyEvent=function(t){return!(!this.isEnabled()||!this.isVisible()||0==this.getChildCount()&&!this.keyEventTarget_||!this.handleKeyEventInternal(t))&&(t.preventDefault(),t.stopPropagation(),!0)},goog.ui.Container.prototype.handleKeyEventInternal=function(t){var e=this.getHighlighted();if(e&&"function"==typeof e.handleKeyEvent&&e.handleKeyEvent(t)||this.openItem_&&this.openItem_!=e&&"function"==typeof this.openItem_.handleKeyEvent&&this.openItem_.handleKeyEvent(t))return!0;if(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)return!1;switch(t.keyCode){case goog.events.KeyCodes.ESC:if(!this.isFocusable())return!1;this.getKeyEventTarget().blur();break;case goog.events.KeyCodes.HOME:this.highlightFirst();break;case goog.events.KeyCodes.END:this.highlightLast();break;case goog.events.KeyCodes.UP:if(this.orientation_!=goog.ui.Container.Orientation.VERTICAL)return!1;this.highlightPrevious();break;case goog.events.KeyCodes.LEFT:if(this.orientation_!=goog.ui.Container.Orientation.HORIZONTAL)return!1;this.isRightToLeft()?this.highlightNext():this.highlightPrevious();break;case goog.events.KeyCodes.DOWN:if(this.orientation_!=goog.ui.Container.Orientation.VERTICAL)return!1;this.highlightNext();break;case goog.events.KeyCodes.RIGHT:if(this.orientation_!=goog.ui.Container.Orientation.HORIZONTAL)return!1;this.isRightToLeft()?this.highlightPrevious():this.highlightNext();break;default:return!1}return!0},goog.ui.Container.prototype.registerChildId_=function(t){var e=(e=t.getElement()).id||(e.id=t.getId());this.childElementIdMap_||(this.childElementIdMap_={}),this.childElementIdMap_[e]=t},goog.ui.Container.prototype.addChild=function(t,e){goog.asserts.assertInstanceof(t,goog.ui.Control,"The child of a container must be a control"),goog.ui.Container.superClass_.addChild.call(this,t,e)},goog.ui.Container.prototype.addChildAt=function(t,e,o){t.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0),t.setDispatchTransitionEvents(goog.ui.Component.State.OPENED,!0),(this.isFocusable()||!this.isFocusableChildrenAllowed())&&t.setSupportedState(goog.ui.Component.State.FOCUSED,!1),t.setHandleMouseEvents(!1),goog.ui.Container.superClass_.addChildAt.call(this,t,e,o),t.isInDocument()&&this.isInDocument()&&this.registerChildId_(t),e<=this.highlightedIndex_&&this.highlightedIndex_++},goog.ui.Container.prototype.removeChild=function(t,e){if(t=goog.isString(t)?this.getChild(t):t){var o=this.indexOfChild(t);-1!=o&&(o==this.highlightedIndex_?t.setHighlighted(!1):o<this.highlightedIndex_&&this.highlightedIndex_--),(o=t.getElement())&&o.id&&this.childElementIdMap_&&goog.object.remove(this.childElementIdMap_,o.id)}return(t=goog.ui.Container.superClass_.removeChild.call(this,t,e)).setHandleMouseEvents(!0),t},goog.ui.Container.prototype.getOrientation=function(){return this.orientation_},goog.ui.Container.prototype.setOrientation=function(t){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.orientation_=t},goog.ui.Container.prototype.isVisible=function(){return this.visible_},goog.ui.Container.prototype.setVisible=function(t,e){if(e||this.visible_!=t&&this.dispatchEvent(t?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){this.visible_=t;var o=this.getElement();return o&&(goog.style.showElement(o,t),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),this.enabled_&&this.visible_),e||this.dispatchEvent(this.visible_?goog.ui.Container.EventType.AFTER_SHOW:goog.ui.Container.EventType.AFTER_HIDE)),!0}return!1},goog.ui.Container.prototype.isEnabled=function(){return this.enabled_},goog.ui.Container.prototype.setEnabled=function(t){this.enabled_!=t&&this.dispatchEvent(t?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(t?(this.enabled_=!0,this.forEachChild(function(t){t.wasDisabled?delete t.wasDisabled:t.setEnabled(!0)})):(this.forEachChild(function(t){t.isEnabled()?t.setEnabled(!1):t.wasDisabled=!0}),this.enabled_=!1,this.setMouseButtonPressed(!1)),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),t&&this.visible_))},goog.ui.Container.prototype.isFocusable=function(){return this.focusable_},goog.ui.Container.prototype.setFocusable=function(t){t!=this.focusable_&&this.isInDocument()&&this.enableFocusHandling_(t),this.focusable_=t,this.enabled_&&this.visible_&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),t)},goog.ui.Container.prototype.isFocusableChildrenAllowed=function(){return this.allowFocusableChildren_},goog.ui.Container.prototype.setFocusableChildrenAllowed=function(t){this.allowFocusableChildren_=t},goog.ui.Container.prototype.isOpenFollowsHighlight=function(){return this.openFollowsHighlight_},goog.ui.Container.prototype.setOpenFollowsHighlight=function(t){this.openFollowsHighlight_=t},goog.ui.Container.prototype.getHighlightedIndex=function(){return this.highlightedIndex_},goog.ui.Container.prototype.setHighlightedIndex=function(t){(t=this.getChildAt(t))?t.setHighlighted(!0):-1<this.highlightedIndex_&&this.getHighlighted().setHighlighted(!1)},goog.ui.Container.prototype.setHighlighted=function(t){this.setHighlightedIndex(this.indexOfChild(t))},goog.ui.Container.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)},goog.ui.Container.prototype.highlightFirst=function(){this.highlightHelper(function(t,e){return(t+1)%e},this.getChildCount()-1)},goog.ui.Container.prototype.highlightLast=function(){this.highlightHelper(function(t,e){return 0>--t?e-1:t},0)},goog.ui.Container.prototype.highlightNext=function(){this.highlightHelper(function(t,e){return(t+1)%e},this.highlightedIndex_)},goog.ui.Container.prototype.highlightPrevious=function(){this.highlightHelper(function(t,e){return 0>--t?e-1:t},this.highlightedIndex_)},goog.ui.Container.prototype.highlightHelper=function(t,e){for(var o=0>e?this.indexOfChild(this.openItem_):e,i=this.getChildCount(),n=(o=t.call(this,o,i),0);n<=i;){var r=this.getChildAt(o);if(r&&this.canHighlightItem(r))return this.setHighlightedIndexFromKeyEvent(o),!0;n++,o=t.call(this,o,i)}return!1},goog.ui.Container.prototype.canHighlightItem=function(t){return t.isVisible()&&t.isEnabled()&&t.isSupportedState(goog.ui.Component.State.HOVER)},goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent=function(t){this.setHighlightedIndex(t)},goog.ui.Container.prototype.getOpenItem=function(){return this.openItem_},goog.ui.Container.prototype.isMouseButtonPressed=function(){return this.mouseButtonPressed_},goog.ui.Container.prototype.setMouseButtonPressed=function(t){this.mouseButtonPressed_=t},goog.ui.MenuHeaderRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.MenuHeaderRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuHeaderRenderer),goog.ui.MenuHeaderRenderer.CSS_CLASS="goog-menuheader",goog.ui.MenuHeaderRenderer.prototype.getCssClass=function(){return goog.ui.MenuHeaderRenderer.CSS_CLASS},goog.ui.MenuHeader=function(t,e,o){goog.ui.Control.call(this,t,o||goog.ui.MenuHeaderRenderer.getInstance(),e),this.setSupportedState(goog.ui.Component.State.DISABLED,!1),this.setSupportedState(goog.ui.Component.State.HOVER,!1),this.setSupportedState(goog.ui.Component.State.ACTIVE,!1),this.setSupportedState(goog.ui.Component.State.FOCUSED,!1),this.setStateInternal(goog.ui.Component.State.DISABLED)},goog.inherits(goog.ui.MenuHeader,goog.ui.Control),goog.ui.registry.setDecoratorByClassName(goog.ui.MenuHeaderRenderer.CSS_CLASS,function(){return new goog.ui.MenuHeader(null)}),goog.ui.Menu=function(t,e){goog.ui.Container.call(this,goog.ui.Container.Orientation.VERTICAL,e||goog.ui.MenuRenderer.getInstance(),t),this.setFocusable(!1)},goog.inherits(goog.ui.Menu,goog.ui.Container),goog.ui.Menu.EventType={BEFORE_SHOW:goog.ui.Component.EventType.BEFORE_SHOW,SHOW:goog.ui.Component.EventType.SHOW,BEFORE_HIDE:goog.ui.Component.EventType.HIDE,HIDE:goog.ui.Component.EventType.HIDE},goog.ui.Menu.CSS_CLASS=goog.ui.MenuRenderer.CSS_CLASS,goog.ui.Menu.prototype.allowAutoFocus_=!0,goog.ui.Menu.prototype.allowHighlightDisabled_=!1,goog.ui.Menu.prototype.getCssClass=function(){return this.getRenderer().getCssClass()},goog.ui.Menu.prototype.containsElement=function(t){if(this.getRenderer().containsElement(this,t))return!0;for(var e=0,o=this.getChildCount();e<o;e++){var i=this.getChildAt(e);if("function"==typeof i.containsElement&&i.containsElement(t))return!0}return!1},goog.ui.Menu.prototype.addItem=function(t){this.addChild(t,!0)},goog.ui.Menu.prototype.addItemAt=function(t,e){this.addChildAt(t,e,!0)},goog.ui.Menu.prototype.removeItem=function(t){(t=this.removeChild(t,!0))&&t.dispose()},goog.ui.Menu.prototype.removeItemAt=function(t){(t=this.removeChildAt(t,!0))&&t.dispose()},goog.ui.Menu.prototype.getItemAt=function(t){return this.getChildAt(t)},goog.ui.Menu.prototype.getItemCount=function(){return this.getChildCount()},goog.ui.Menu.prototype.getItems=function(){var t=[];return this.forEachChild(function(e){t.push(e)}),t},goog.ui.Menu.prototype.setPosition=function(t,e){var o=this.isVisible();o||goog.style.showElement(this.getElement(),!0),goog.style.setPageOffset(this.getElement(),t,e),o||goog.style.showElement(this.getElement(),!1)},goog.ui.Menu.prototype.getPosition=function(){return this.isVisible()?goog.style.getPageOffset(this.getElement()):null},goog.ui.Menu.prototype.setAllowAutoFocus=function(t){(this.allowAutoFocus_=t)&&this.setFocusable(!0)},goog.ui.Menu.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_},goog.ui.Menu.prototype.setAllowHighlightDisabled=function(t){this.allowHighlightDisabled_=t},goog.ui.Menu.prototype.getAllowHighlightDisabled=function(){return this.allowHighlightDisabled_},goog.ui.Menu.prototype.setVisible=function(t,e,o){return(e=goog.ui.Menu.superClass_.setVisible.call(this,t,e))&&t&&this.isInDocument()&&this.allowAutoFocus_&&this.getKeyEventTarget().focus(),t&&o&&goog.isNumber(o.clientX)?this.openingCoords=new goog.math.Coordinate(o.clientX,o.clientY):this.openingCoords=null,e},goog.ui.Menu.prototype.handleEnterItem=function(t){return this.allowAutoFocus_&&this.getKeyEventTarget().focus(),goog.ui.Menu.superClass_.handleEnterItem.call(this,t)},goog.ui.Menu.prototype.highlightNextPrefix=function(t){var e=RegExp("^"+goog.string.regExpEscape(t),"i");return this.highlightHelper(function(t,o){var i=0>t?0:t,n=!1;do{++t==o&&(t=0,n=!0);var r=this.getChildAt(t).getCaption();if(r&&r.match(e))return t}while(!n||t!=i);return this.getHighlightedIndex()},this.getHighlightedIndex())},goog.ui.Menu.prototype.canHighlightItem=function(t){return(this.allowHighlightDisabled_||t.isEnabled())&&t.isVisible()&&t.isSupportedState(goog.ui.Component.State.HOVER)},goog.ui.Menu.prototype.decorateInternal=function(t){this.decorateContent(t),goog.ui.Menu.superClass_.decorateInternal.call(this,t)},goog.ui.Menu.prototype.handleKeyEventInternal=function(t){var e=goog.ui.Menu.superClass_.handleKeyEventInternal.call(this,t);return e||this.forEachChild(function(o){!e&&o.getMnemonic&&o.getMnemonic()==t.keyCode&&(this.isEnabled()&&this.setHighlighted(o),e=o.handleKeyEvent(t))},this),e},goog.ui.Menu.prototype.setHighlightedIndex=function(t){goog.ui.Menu.superClass_.setHighlightedIndex.call(this,t),(t=this.getChildAt(t))&&goog.style.scrollIntoContainerView(t.getElement(),this.getElement())},goog.ui.Menu.prototype.decorateContent=function(t){for(var e=this.getRenderer(),o=(t=this.getDomHelper().getElementsByTagNameAndClass("div",e.getCssClass()+"-content",t)).length,i=0;i<o;i++)e.decorateChildren(this,t[i])},goog.positioning.MenuAnchoredPosition=function(t,e,o,i){goog.positioning.AnchoredViewportPosition.call(this,t,e,o||i),(o||i)&&this.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN|(i?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN))},goog.inherits(goog.positioning.MenuAnchoredPosition,goog.positioning.AnchoredViewportPosition),goog.ui.INLINE_BLOCK_CLASSNAME="goog-inline-block",goog.ui.CustomButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)},goog.inherits(goog.ui.CustomButtonRenderer,goog.ui.ButtonRenderer),goog.addSingletonGetter(goog.ui.CustomButtonRenderer),goog.ui.CustomButtonRenderer.CSS_CLASS="goog-custom-button",goog.ui.CustomButtonRenderer.prototype.createDom=function(t){var e=this.getClassNames(t);e={"class":goog.ui.INLINE_BLOCK_CLASSNAME+" "+e.join(" "),title:t.getTooltip()||""},e=t.getDomHelper().createDom("div",e,this.createButton(t.getContent(),t.getDomHelper()));return this.setAriaStates(t,e),e},goog.ui.CustomButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON},goog.ui.CustomButtonRenderer.prototype.getContentElement=function(t){return t&&t.firstChild.firstChild},goog.ui.CustomButtonRenderer.prototype.createButton=function(t,e){return e.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+this.getCssClass()+"-outer-box",e.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+this.getCssClass()+"-inner-box",t))},goog.ui.CustomButtonRenderer.prototype.canDecorate=function(t){return"DIV"==t.tagName},goog.ui.CustomButtonRenderer.prototype.hasBoxStructure=function(t,e){var o=t.getDomHelper().getFirstElementChild(e),i=this.getCssClass()+"-outer-box";return!!(o&&goog.dom.classes.has(o,i)&&(o=t.getDomHelper().getFirstElementChild(o),i=this.getCssClass()+"-inner-box",o&&goog.dom.classes.has(o,i)))},goog.ui.CustomButtonRenderer.prototype.decorate=function(t,e){return goog.ui.CustomButtonRenderer.trimTextNodes_(e,!0),goog.ui.CustomButtonRenderer.trimTextNodes_(e,!1),this.hasBoxStructure(t,e)||e.appendChild(this.createButton(e.childNodes,t.getDomHelper())),goog.dom.classes.add(e,goog.ui.INLINE_BLOCK_CLASSNAME,this.getCssClass()),goog.ui.CustomButtonRenderer.superClass_.decorate.call(this,t,e)},goog.ui.CustomButtonRenderer.prototype.getCssClass=function(){return goog.ui.CustomButtonRenderer.CSS_CLASS},goog.ui.CustomButtonRenderer.trimTextNodes_=function(t,e){if(t)for(var o,i=e?t.firstChild:t.lastChild;i&&i.parentNode==t&&(o=e?i.nextSibling:i.previousSibling,i.nodeType==goog.dom.NodeType.TEXT);){var n=i.nodeValue;if(""!=goog.string.trim(n)){i.nodeValue=e?goog.string.trimLeft(n):goog.string.trimRight(n);break}t.removeChild(i),i=o}},goog.ui.MenuButtonRenderer=function(){goog.ui.CustomButtonRenderer.call(this)},goog.inherits(goog.ui.MenuButtonRenderer,goog.ui.CustomButtonRenderer),goog.addSingletonGetter(goog.ui.MenuButtonRenderer),goog.ui.MenuButtonRenderer.CSS_CLASS="goog-menu-button",goog.ui.MenuButtonRenderer.WRAPPER_PROP_="__goog_wrapper_div",goog.userAgent.GECKO&&(goog.ui.MenuButtonRenderer.prototype.setContent=function(t,e){var o=goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,t&&t.firstChild);o&&goog.dom.replaceNode(this.createCaption(e,goog.dom.getDomHelper(t)),o)}),goog.ui.MenuButtonRenderer.prototype.getContentElement=function(t){return t=goog.ui.MenuButtonRenderer.superClass_.getContentElement.call(this,t&&t.firstChild),goog.userAgent.GECKO&&t&&t[goog.ui.MenuButtonRenderer.WRAPPER_PROP_]&&(t=t.firstChild),t},goog.ui.MenuButtonRenderer.prototype.decorate=function(t,e){var o=goog.dom.getElementsByTagNameAndClass("*",goog.ui.MenuRenderer.CSS_CLASS,e)[0];if(o){goog.style.showElement(o,!1),goog.dom.appendChild(goog.dom.getOwnerDocument(o).body,o);var i=new goog.ui.Menu;i.decorate(o),t.setMenu(i)}return goog.ui.MenuButtonRenderer.superClass_.decorate.call(this,t,e)},goog.ui.MenuButtonRenderer.prototype.createButton=function(t,e){return goog.ui.MenuButtonRenderer.superClass_.createButton.call(this,[this.createCaption(t,e),this.createDropdown(e)],e)},goog.ui.MenuButtonRenderer.prototype.createCaption=function(t,e){return goog.ui.MenuButtonRenderer.wrapCaption(t,this.getCssClass(),e)},goog.ui.MenuButtonRenderer.wrapCaption=function(t,e,o){return o.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+e+"-caption",t)},goog.ui.MenuButtonRenderer.prototype.createDropdown=function(t){return t.createDom("div",goog.ui.INLINE_BLOCK_CLASSNAME+" "+this.getCssClass()+"-dropdown","\xa0")},goog.ui.MenuButtonRenderer.prototype.getCssClass=function(){return goog.ui.MenuButtonRenderer.CSS_CLASS},goog.ui.MenuButton=function(t,e,o,i){goog.ui.Button.call(this,t,o||goog.ui.MenuButtonRenderer.getInstance(),i),this.setSupportedState(goog.ui.Component.State.OPENED,!0),this.menuPosition_=new goog.positioning.MenuAnchoredPosition(null,goog.positioning.Corner.BOTTOM_START),e&&this.setMenu(e),this.menuMargin_=null,this.timer_=new goog.Timer(500),(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD)&&!goog.userAgent.isVersion("533.17.9")&&this.setFocusablePopupMenu(!0)},goog.inherits(goog.ui.MenuButton,goog.ui.Button),goog.ui.MenuButton.prototype.isFocusablePopupMenu_=!1,goog.ui.MenuButton.prototype.renderMenuAsSibling_=!1,goog.ui.MenuButton.prototype.enterDocument=function(){goog.ui.MenuButton.superClass_.enterDocument.call(this),this.menu_&&this.attachMenuEventListeners_(this.menu_,!0);var t=this.getElement();goog.asserts.assert(t,"The menu button DOM element cannot be null."),goog.a11y.aria.setState(t,goog.a11y.aria.State.HASPOPUP,"true")},goog.ui.MenuButton.prototype.exitDocument=function(){if(goog.ui.MenuButton.superClass_.exitDocument.call(this),this.menu_){this.setOpen(!1),this.menu_.exitDocument(),this.attachMenuEventListeners_(this.menu_,!1);var t=this.menu_.getElement();t&&goog.dom.removeNode(t)}},goog.ui.MenuButton.prototype.disposeInternal=function(){goog.ui.MenuButton.superClass_.disposeInternal.call(this),this.menu_&&(this.menu_.dispose(),delete this.menu_),delete this.positionElement_,this.timer_.dispose()},goog.ui.MenuButton.prototype.handleMouseDown=function(t){goog.ui.MenuButton.superClass_.handleMouseDown.call(this,t),this.isActive()&&(this.setOpen(!this.isOpen(),t),this.menu_&&this.menu_.setMouseButtonPressed(this.isOpen()))},goog.ui.MenuButton.prototype.handleMouseUp=function(t){goog.ui.MenuButton.superClass_.handleMouseUp.call(this,t),this.menu_&&!this.isActive()&&this.menu_.setMouseButtonPressed(!1)},goog.ui.MenuButton.prototype.performActionInternal=function(){return this.setActive(!1),!0},goog.ui.MenuButton.prototype.handleDocumentMouseDown=function(t){this.menu_&&this.menu_.isVisible()&&!this.containsElement(t.target)&&this.setOpen(!1)},goog.ui.MenuButton.prototype.containsElement=function(t){return t&&goog.dom.contains(this.getElement(),t)||this.menu_&&this.menu_.containsElement(t)||!1},goog.ui.MenuButton.prototype.handleKeyEventInternal=function(t){if(t.keyCode==goog.events.KeyCodes.SPACE){if(t.preventDefault(),t.type!=goog.events.EventType.KEYUP)return!0}else if(t.type!=goog.events.KeyHandler.EventType.KEY)return!1;if(this.menu_&&this.menu_.isVisible()){var e=this.menu_.handleKeyEvent(t);return t.keyCode==goog.events.KeyCodes.ESC?(this.setOpen(!1),!0):e}return(t.keyCode==goog.events.KeyCodes.DOWN||t.keyCode==goog.events.KeyCodes.UP||t.keyCode==goog.events.KeyCodes.SPACE||t.keyCode==goog.events.KeyCodes.ENTER)&&(this.setOpen(!0),!0)},goog.ui.MenuButton.prototype.handleMenuAction=function(){this.setOpen(!1)},goog.ui.MenuButton.prototype.handleMenuBlur=function(){this.isActive()||this.setOpen(!1)},goog.ui.MenuButton.prototype.handleBlur=function(t){this.isFocusablePopupMenu()||this.setOpen(!1),goog.ui.MenuButton.superClass_.handleBlur.call(this,t)},goog.ui.MenuButton.prototype.getMenu=function(){return this.menu_||this.setMenu(new goog.ui.Menu(this.getDomHelper())),this.menu_||null},goog.ui.MenuButton.prototype.setMenu=function(t){var e=this.menu_;return t!=e&&(e&&(this.setOpen(!1),this.isInDocument()&&this.attachMenuEventListeners_(e,!1),delete this.menu_),t&&(this.menu_=t,t.setParent(this),t.setVisible(!1),t.setAllowAutoFocus(this.isFocusablePopupMenu()),this.isInDocument()&&this.attachMenuEventListeners_(t,!0))),e},goog.ui.MenuButton.prototype.setMenuPosition=function(t){t&&(this.menuPosition_=t,this.positionElement_=t.element)},goog.ui.MenuButton.prototype.setPositionElement=function(t){this.positionElement_=t,this.positionMenu()},goog.ui.MenuButton.prototype.setMenuMargin=function(t){this.menuMargin_=t},goog.ui.MenuButton.prototype.addItem=function(t){this.getMenu().addChild(t,!0)},goog.ui.MenuButton.prototype.addItemAt=function(t,e){this.getMenu().addChildAt(t,e,!0)},goog.ui.MenuButton.prototype.removeItem=function(t){(t=this.getMenu().removeChild(t,!0))&&t.dispose()},goog.ui.MenuButton.prototype.removeItemAt=function(t){(t=this.getMenu().removeChildAt(t,!0))&&t.dispose()},goog.ui.MenuButton.prototype.getItemAt=function(t){return this.menu_?this.menu_.getChildAt(t):null},goog.ui.MenuButton.prototype.getItemCount=function(){return this.menu_?this.menu_.getChildCount():0},goog.ui.MenuButton.prototype.setVisible=function(t,e){var o=goog.ui.MenuButton.superClass_.setVisible.call(this,t,e);return o&&!this.isVisible()&&this.setOpen(!1),o},goog.ui.MenuButton.prototype.setEnabled=function(t){goog.ui.MenuButton.superClass_.setEnabled.call(this,t),this.isEnabled()||this.setOpen(!1)},goog.ui.MenuButton.prototype.isAlignMenuToStart=function(){var t=this.menuPosition_.corner;return t==goog.positioning.Corner.BOTTOM_START||t==goog.positioning.Corner.TOP_START},goog.ui.MenuButton.prototype.setAlignMenuToStart=function(t){this.menuPosition_.corner=t?goog.positioning.Corner.BOTTOM_START:goog.positioning.Corner.BOTTOM_END},goog.ui.MenuButton.prototype.setScrollOnOverflow=function(t){this.menuPosition_.setLastResortOverflow&&this.menuPosition_.setLastResortOverflow(goog.positioning.Overflow.ADJUST_X|(t?goog.positioning.Overflow.RESIZE_HEIGHT:goog.positioning.Overflow.ADJUST_Y))},goog.ui.MenuButton.prototype.isScrollOnOverflow=function(){return this.menuPosition_.getLastResortOverflow&&!!(this.menuPosition_.getLastResortOverflow()&goog.positioning.Overflow.RESIZE_HEIGHT)},goog.ui.MenuButton.prototype.isFocusablePopupMenu=function(){return this.isFocusablePopupMenu_},goog.ui.MenuButton.prototype.setFocusablePopupMenu=function(t){this.isFocusablePopupMenu_=t},goog.ui.MenuButton.prototype.setRenderMenuAsSibling=function(t){this.renderMenuAsSibling_=t},goog.ui.MenuButton.prototype.showMenu=function(){this.setOpen(!0)},goog.ui.MenuButton.prototype.hideMenu=function(){this.setOpen(!1)},goog.ui.MenuButton.prototype.setOpen=function(t,e){if(goog.ui.MenuButton.superClass_.setOpen.call(this,t),this.menu_&&this.hasState(goog.ui.Component.State.OPENED)==t){if(t)this.menu_.isInDocument()||(this.renderMenuAsSibling_?this.menu_.render(this.getElement().parentNode):this.menu_.render()),this.viewportBox_=goog.style.getVisibleRectForElement(this.getElement()),this.buttonRect_=goog.style.getBounds(this.getElement()),this.positionMenu(),this.menu_.setHighlightedIndex(-1);else{this.setActive(!1),this.menu_.setMouseButtonPressed(!1);var o=this.getElement();o&&goog.a11y.aria.setState(o,goog.a11y.aria.State.ACTIVEDESCENDANT,""),goog.isDefAndNotNull(this.originalSize_)&&(this.originalSize_=void 0,(o=this.menu_.getElement())&&goog.style.setSize(o,"",""))}this.menu_.setVisible(t,!1,e),this.isDisposed()||this.attachPopupListeners_(t)}},goog.ui.MenuButton.prototype.invalidateMenuSize=function(){this.originalSize_=void 0},goog.ui.MenuButton.prototype.positionMenu=function(){if(this.menu_.isInDocument()){var t=this.positionElement_||this.getElement(),e=this.menuPosition_;this.menuPosition_.element=t,t=this.menu_.getElement(),this.menu_.isVisible()||(t.style.visibility="hidden",goog.style.showElement(t,!0)),!this.originalSize_&&this.isScrollOnOverflow()&&(this.originalSize_=goog.style.getSize(t));var o=goog.positioning.flipCornerVertical(e.corner);e.reposition(t,o,this.menuMargin_,this.originalSize_),this.menu_.isVisible()||(goog.style.showElement(t,!1),t.style.visibility="visible")}},goog.ui.MenuButton.prototype.onTick_=function(t){t=goog.style.getBounds(this.getElement());var e=goog.style.getVisibleRectForElement(this.getElement());goog.math.Rect.equals(this.buttonRect_,t)&&goog.math.Box.equals(this.viewportBox_,e)||(this.buttonRect_=t,this.viewportBox_=e,this.positionMenu())},goog.ui.MenuButton.prototype.attachMenuEventListeners_=function(t,e){var o=this.getHandler(),i=e?o.listen:o.unlisten;i.call(o,t,goog.ui.Component.EventType.ACTION,this.handleMenuAction),i.call(o,t,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem),i.call(o,t,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem)},goog.ui.MenuButton.prototype.handleHighlightItem=function(t){var e=this.getElement();goog.asserts.assert(e,"The menu button DOM element cannot be null."),null!=t.target.getElement()&&goog.a11y.aria.setState(e,goog.a11y.aria.State.ACTIVEDESCENDANT,t.target.getElement().id)},goog.ui.MenuButton.prototype.handleUnHighlightItem=function(t){this.menu_.getHighlighted()||(t=this.getElement(),goog.asserts.assert(t,"The menu button DOM element cannot be null."),goog.a11y.aria.setState(t,goog.a11y.aria.State.ACTIVEDESCENDANT,""))},goog.ui.MenuButton.prototype.attachPopupListeners_=function(t){var e=this.getHandler(),o=t?e.listen:e.unlisten;o.call(e,this.getDomHelper().getDocument(),goog.events.EventType.MOUSEDOWN,this.handleDocumentMouseDown,!0),this.isFocusablePopupMenu()&&o.call(e,this.menu_,goog.ui.Component.EventType.BLUR,this.handleMenuBlur),o.call(e,this.timer_,goog.Timer.TICK,this.onTick_),t?this.timer_.start():this.timer_.stop()},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.MenuButton(null)}),goog.color={},goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},goog.color.parse=function(t){var e={};t=String(t);var o=goog.color.prependHashIfNecessaryHelper(t);if(goog.color.isValidHexColor_(o))return e.hex=goog.color.normalizeHex(o),e.type="hex",e;if((o=goog.color.isValidRgbColor_(t)).length)return e.hex=goog.color.rgbArrayToHex(o),e.type="rgb",e;if(goog.color.names&&(o=goog.color.names[t.toLowerCase()]))return e.hex=o,e.type="named",e;throw Error(t+" is not a valid color string")},goog.color.isValidColor=function(t){var e=goog.color.prependHashIfNecessaryHelper(t);return!(!goog.color.isValidHexColor_(e)&&!(goog.color.isValidRgbColor_(t).length||goog.color.names&&goog.color.names[t.toLowerCase()]))},goog.color.parseRgb=function(t){var e=goog.color.isValidRgbColor_(t);if(!e.length)throw Error(t+" is not a valid RGB color");return e},goog.color.hexToRgbStyle=function(t){return goog.color.rgbStyle_(goog.color.hexToRgb(t))},goog.color.hexTripletRe_=/#(.)(.)(.)/,goog.color.normalizeHex=function(t){if(!goog.color.isValidHexColor_(t))throw Error("'"+t+"' is not a valid hex color");return 4==t.length&&(t=t.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3")),t.toLowerCase()},goog.color.hexToRgb=function(t){t=goog.color.normalizeHex(t);var e=parseInt(t.substr(1,2),16),o=parseInt(t.substr(3,2),16);return t=parseInt(t.substr(5,2),16),[e,o,t]},goog.color.rgbToHex=function(t,e,o){if(t=Number(t),e=Number(e),o=Number(o),isNaN(t)||0>t||255<t||isNaN(e)||0>e||255<e||isNaN(o)||0>o||255<o)throw Error('"('+t+","+e+","+o+'") is not a valid RGB color');return t=goog.color.prependZeroIfNecessaryHelper(t.toString(16)),e=goog.color.prependZeroIfNecessaryHelper(e.toString(16)),o=goog.color.prependZeroIfNecessaryHelper(o.toString(16)),"#"+t+e+o},goog.color.rgbArrayToHex=function(t){return goog.color.rgbToHex(t[0],t[1],t[2])},goog.color.rgbToHsl=function(t,e,o){t/=255,e/=255,o/=255;var i=Math.max(t,e,o),n=Math.min(t,e,o),r=0,g=0,s=.5*(i+n);return i!=n&&(i==t?r=60*(e-o)/(i-n):i==e?r=60*(o-t)/(i-n)+120:i==o&&(r=60*(t-e)/(i-n)+240),g=0<s&&.5>=s?(i-n)/(2*s):(i-n)/(2-2*s)),[Math.round(r+360)%360,g,s]},goog.color.rgbArrayToHsl=function(t){return goog.color.rgbToHsl(t[0],t[1],t[2])},goog.color.hueToRgb_=function(t,e,o){return 0>o?o+=1:1<o&&(o-=1),1>6*o?t+6*(e-t)*o:1>2*o?e:2>3*o?t+6*(e-t)*(2/3-o):t},goog.color.hslToRgb=function(t,e,o){var i=0,n=0,r=0;if(t/=360,0==e)i=n=r=255*o;else{var g=r=0;g=.5>o?o*(1+e):o+e-e*o,r=2*o-g,i=255*goog.color.hueToRgb_(r,g,t+1/3),n=255*goog.color.hueToRgb_(r,g,t),r=255*goog.color.hueToRgb_(r,g,t-1/3)}return[Math.round(i),Math.round(n),Math.round(r)]},goog.color.hslArrayToRgb=function(t){return goog.color.hslToRgb(t[0],t[1],t[2])},goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i,goog.color.isValidHexColor_=function(t){return goog.color.validHexColorRe_.test(t)},goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/,goog.color.isNormalizedHexColor_=function(t){return goog.color.normalizedHexColorRe_.test(t)},goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,goog.color.isValidRgbColor_=function(t){if(o=t.match(goog.color.rgbColorRe_)){t=Number(o[1]);var e=Number(o[2]),o=Number(o[3]);if(0<=t&&255>=t&&0<=e&&255>=e&&0<=o&&255>=o)return[t,e,o]}return[]},goog.color.prependZeroIfNecessaryHelper=function(t){return 1==t.length?"0"+t:t},goog.color.prependHashIfNecessaryHelper=function(t){return"#"==t.charAt(0)?t:"#"+t},goog.color.rgbStyle_=function(t){return"rgb("+t.join(",")+")"},goog.color.hsvToRgb=function(t,e,o){var i=0,n=0,r=0;if(0==e)r=n=i=o;else{var g=Math.floor(t/60),s=t/60-g;t=o*(1-e);var a=o*(1-e*s);switch(e=o*(1-e*(1-s)),g){case 1:i=a,n=o,r=t;break;case 2:i=t,n=o,r=e;break;case 3:i=t,n=a,r=o;break;case 4:i=e,n=t,r=o;break;case 5:i=o,n=t,r=a;break;case 6:case 0:i=o,n=e,r=t}}return[Math.floor(i),Math.floor(n),Math.floor(r)]},goog.color.rgbToHsv=function(t,e,o){var i=Math.max(Math.max(t,e),o);if((r=Math.min(Math.min(t,e),o))==i)r=t=0;else{var n=i-r,r=n/i;0>(t=60*(t==i?(e-o)/n:e==i?2+(o-t)/n:4+(t-e)/n))&&(t+=360),360<t&&(t-=360)}return[t,r,i]},goog.color.rgbArrayToHsv=function(t){return goog.color.rgbToHsv(t[0],t[1],t[2])},goog.color.hsvArrayToRgb=function(t){return goog.color.hsvToRgb(t[0],t[1],t[2])},goog.color.hexToHsl=function(t){return t=goog.color.hexToRgb(t),goog.color.rgbToHsl(t[0],t[1],t[2])},goog.color.hslToHex=function(t,e,o){return goog.color.rgbArrayToHex(goog.color.hslToRgb(t,e,o))},goog.color.hslArrayToHex=function(t){
return goog.color.rgbArrayToHex(goog.color.hslToRgb(t[0],t[1],t[2]))},goog.color.hexToHsv=function(t){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(t))},goog.color.hsvToHex=function(t,e,o){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(t,e,o))},goog.color.hsvArrayToHex=function(t){return goog.color.hsvToHex(t[0],t[1],t[2])},goog.color.hslDistance=function(t,e){var o,i;return o=.5>=t[2]?t[1]*t[2]:t[1]*(1-t[2]),i=.5>=e[2]?e[1]*e[2]:e[1]*(1-e[2]),(t[2]-e[2])*(t[2]-e[2])+o*o+i*i-2*o*i*Math.cos(2*(t[0]/360-e[0]/360)*Math.PI)},goog.color.blend=function(t,e,o){return o=goog.math.clamp(o,0,1),[Math.round(o*t[0]+(1-o)*e[0]),Math.round(o*t[1]+(1-o)*e[1]),Math.round(o*t[2]+(1-o)*e[2])]},goog.color.darken=function(t,e){return goog.color.blend([0,0,0],t,e)},goog.color.lighten=function(t,e){return goog.color.blend([255,255,255],t,e)},goog.color.highContrast=function(t,e){for(var o=[],i=0;i<e.length;i++)o.push({color:e[i],diff:goog.color.yiqBrightnessDiff_(e[i],t)+goog.color.colorDiff_(e[i],t)});return o.sort(function(t,e){return e.diff-t.diff}),o[0].color},goog.color.yiqBrightness_=function(t){return Math.round((299*t[0]+587*t[1]+114*t[2])/1e3)},goog.color.yiqBrightnessDiff_=function(t,e){return Math.abs(goog.color.yiqBrightness_(t)-goog.color.yiqBrightness_(e))},goog.color.colorDiff_=function(t,e){return Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])+Math.abs(t[2]-e[2])},goog.ui.ColorMenuButtonRenderer=function(){goog.ui.MenuButtonRenderer.call(this)},goog.inherits(goog.ui.ColorMenuButtonRenderer,goog.ui.MenuButtonRenderer),goog.addSingletonGetter(goog.ui.ColorMenuButtonRenderer),goog.ui.ColorMenuButtonRenderer.CSS_CLASS="goog-color-menu-button",goog.ui.ColorMenuButtonRenderer.prototype.createCaption=function(t,e){return goog.ui.ColorMenuButtonRenderer.superClass_.createCaption.call(this,goog.ui.ColorMenuButtonRenderer.wrapCaption(t,e),e)},goog.ui.ColorMenuButtonRenderer.wrapCaption=function(t,e){return e.createDom("div",goog.ui.ColorMenuButtonRenderer.CSS_CLASS+"-indicator",t)},goog.ui.ColorMenuButtonRenderer.prototype.setValue=function(t,e){t&&goog.ui.ColorMenuButtonRenderer.setCaptionValue(this.getContentElement(t),e)},goog.ui.ColorMenuButtonRenderer.setCaptionValue=function(t,e){if(t&&t.firstChild){var o;o=e&&goog.color.isValidColor(e)?goog.color.parse(e).hex:null,t.firstChild.style.borderBottomColor=o||(goog.userAgent.IE?"":"transparent")}},goog.ui.ColorMenuButtonRenderer.prototype.initializeDom=function(t){this.setValue(t.getElement(),t.getValue()),goog.dom.classes.add(t.getElement(),goog.ui.ColorMenuButtonRenderer.CSS_CLASS),goog.ui.ColorMenuButtonRenderer.superClass_.initializeDom.call(this,t)},goog.ui.SelectionModel=function(t){goog.events.EventTarget.call(this),this.items_=[],this.addItems(t)},goog.inherits(goog.ui.SelectionModel,goog.events.EventTarget),goog.ui.SelectionModel.prototype.selectedItem_=null,goog.ui.SelectionModel.prototype.selectionHandler_=null,goog.ui.SelectionModel.prototype.getSelectionHandler=function(){return this.selectionHandler_},goog.ui.SelectionModel.prototype.setSelectionHandler=function(t){this.selectionHandler_=t},goog.ui.SelectionModel.prototype.getItemCount=function(){return this.items_.length},goog.ui.SelectionModel.prototype.indexOfItem=function(t){return t?goog.array.indexOf(this.items_,t):-1},goog.ui.SelectionModel.prototype.getFirst=function(){return this.items_[0]},goog.ui.SelectionModel.prototype.getLast=function(){return this.items_[this.items_.length-1]},goog.ui.SelectionModel.prototype.getItemAt=function(t){return this.items_[t]||null},goog.ui.SelectionModel.prototype.addItems=function(t){t&&(goog.array.forEach(t,function(t){this.selectItem_(t,!1)},this),goog.array.extend(this.items_,t))},goog.ui.SelectionModel.prototype.addItem=function(t){this.addItemAt(t,this.getItemCount())},goog.ui.SelectionModel.prototype.addItemAt=function(t,e){t&&(this.selectItem_(t,!1),goog.array.insertAt(this.items_,t,e))},goog.ui.SelectionModel.prototype.removeItem=function(t){t&&goog.array.remove(this.items_,t)&&t==this.selectedItem_&&(this.selectedItem_=null,this.dispatchEvent(goog.events.EventType.SELECT))},goog.ui.SelectionModel.prototype.removeItemAt=function(t){this.removeItem(this.getItemAt(t))},goog.ui.SelectionModel.prototype.getSelectedItem=function(){return this.selectedItem_},goog.ui.SelectionModel.prototype.getItems=function(){return goog.array.clone(this.items_)},goog.ui.SelectionModel.prototype.setSelectedItem=function(t){t!=this.selectedItem_&&(this.selectItem_(this.selectedItem_,!1),this.selectedItem_=t,this.selectItem_(t,!0)),this.dispatchEvent(goog.events.EventType.SELECT)},goog.ui.SelectionModel.prototype.getSelectedIndex=function(){return this.indexOfItem(this.selectedItem_)},goog.ui.SelectionModel.prototype.setSelectedIndex=function(t){this.setSelectedItem(this.getItemAt(t))},goog.ui.SelectionModel.prototype.clear=function(){goog.array.clear(this.items_),this.selectedItem_=null},goog.ui.SelectionModel.prototype.disposeInternal=function(){goog.ui.SelectionModel.superClass_.disposeInternal.call(this),delete this.items_,this.selectedItem_=null},goog.ui.SelectionModel.prototype.selectItem_=function(t,e){t&&("function"==typeof this.selectionHandler_?this.selectionHandler_(t,e):"function"==typeof t.setSelected&&t.setSelected(e))},goog.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1},goog.dom.TagIterator=function(t,e,o,i,n){this.reversed=!!e,t&&this.setPosition(t,i),this.depth=void 0!=n?n:this.tagType||0,this.reversed&&(this.depth*=-1),this.constrained=!o},goog.inherits(goog.dom.TagIterator,goog.iter.Iterator),goog.dom.TagIterator.prototype.node=null,goog.dom.TagIterator.prototype.tagType=goog.dom.TagWalkType.OTHER,goog.dom.TagIterator.prototype.started_=!1,goog.dom.TagIterator.prototype.setPosition=function(t,e,o){(this.node=t)&&(goog.isNumber(e)?this.tagType=e:this.tagType=this.node.nodeType!=goog.dom.NodeType.ELEMENT?goog.dom.TagWalkType.OTHER:this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG),goog.isNumber(o)&&(this.depth=o)},goog.dom.TagIterator.prototype.copyFrom=function(t){this.node=t.node,this.tagType=t.tagType,this.depth=t.depth,this.reversed=t.reversed,this.constrained=t.constrained},goog.dom.TagIterator.prototype.clone=function(){return new goog.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)},goog.dom.TagIterator.prototype.skipTag=function(){var t=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;this.tagType==t&&(this.tagType=-1*t,this.depth+=this.tagType*(this.reversed?-1:1))},goog.dom.TagIterator.prototype.restartTag=function(){var t=this.reversed?goog.dom.TagWalkType.START_TAG:goog.dom.TagWalkType.END_TAG;this.tagType==t&&(this.tagType=-1*t,this.depth+=this.tagType*(this.reversed?-1:1))},goog.dom.TagIterator.prototype.next=function(){var t;if(this.started_){if(!this.node||this.constrained&&0==this.depth)throw goog.iter.StopIteration;t=this.node;var e=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;if(this.tagType==e){var o=this.reversed?t.lastChild:t.firstChild;o?this.setPosition(o):this.setPosition(t,-1*e)}else(o=this.reversed?t.previousSibling:t.nextSibling)?this.setPosition(o):this.setPosition(t.parentNode,-1*e);this.depth+=this.tagType*(this.reversed?-1:1)}else this.started_=!0;if(t=this.node,!this.node)throw goog.iter.StopIteration;return t},goog.dom.TagIterator.prototype.isStarted=function(){return this.started_},goog.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==goog.dom.TagWalkType.START_TAG},goog.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==goog.dom.TagWalkType.END_TAG},goog.dom.TagIterator.prototype.isNonElement=function(){return this.tagType==goog.dom.TagWalkType.OTHER},goog.dom.TagIterator.prototype.equals=function(t){return t.node==this.node&&(!this.node||t.tagType==this.tagType)},goog.dom.TagIterator.prototype.splice=function(){var t=this.node;this.restartTag(),this.reversed=!this.reversed,goog.dom.TagIterator.prototype.next.call(this),this.reversed=!this.reversed;for(var e=goog.isArrayLike(arguments[0])?arguments[0]:arguments,o=e.length-1;0<=o;o--)goog.dom.insertSiblingAfter(e[o],t);goog.dom.removeNode(t)},goog.dom.NodeIterator=function(t,e,o,i){goog.dom.TagIterator.call(this,t,e,o,null,i)},goog.inherits(goog.dom.NodeIterator,goog.dom.TagIterator),goog.dom.NodeIterator.prototype.next=function(){do{goog.dom.NodeIterator.superClass_.next.call(this)}while(this.isEndTag());return this.node},goog.ui.PaletteRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.PaletteRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.PaletteRenderer),goog.ui.PaletteRenderer.cellId_=0,goog.ui.PaletteRenderer.CSS_CLASS="goog-palette",goog.ui.PaletteRenderer.prototype.createDom=function(t){var e=this.getClassNames(t);return t.getDomHelper().createDom("div",e?e.join(" "):null,this.createGrid(t.getContent(),t.getSize(),t.getDomHelper()))},goog.ui.PaletteRenderer.prototype.createGrid=function(t,e,o){for(var i=[],n=0,r=0;n<e.height;n++){for(var g=[],s=0;s<e.width;s++){var a=t&&t[r++];g.push(this.createCell(a,o))}i.push(this.createRow(g,o))}return this.createTable(i,o)},goog.ui.PaletteRenderer.prototype.createTable=function(t,e){var o=e.createDom("table",this.getCssClass()+"-table",e.createDom("tbody",this.getCssClass()+"-body",t));return o.cellSpacing=0,o.cellPadding=0,goog.a11y.aria.setRole(o,"grid"),o},goog.ui.PaletteRenderer.prototype.createRow=function(t,e){var o=e.createDom("tr",this.getCssClass()+"-row",t);return goog.a11y.aria.setRole(o,"row"),o},goog.ui.PaletteRenderer.prototype.createCell=function(t,e){var o=e.createDom("td",{"class":this.getCssClass()+"-cell",id:this.getCssClass()+"-cell-"+goog.ui.PaletteRenderer.cellId_++},t);return goog.a11y.aria.setRole(o,"gridcell"),!goog.dom.getTextContent(o)&&!goog.a11y.aria.getLabel(o)&&goog.a11y.aria.setLabel(o,this.findAriaLabelForCell_(o)),o},goog.ui.PaletteRenderer.prototype.findAriaLabelForCell_=function(t){t=new goog.dom.NodeIterator(t);for(var e,o="";!o&&(e=goog.iter.nextOrValue(t,null));)e.nodeType==goog.dom.NodeType.ELEMENT&&(o=goog.a11y.aria.getLabel(e)||e.title);return o},goog.ui.PaletteRenderer.prototype.canDecorate=function(){return!1},goog.ui.PaletteRenderer.prototype.decorate=function(){return null},goog.ui.PaletteRenderer.prototype.setContent=function(t,e){if(t){var o=goog.dom.getElementsByTagNameAndClass("tbody",this.getCssClass()+"-body",t)[0];if(o){var i=0;if(goog.array.forEach(o.rows,function(t){goog.array.forEach(t.cells,function(t){if(goog.dom.removeChildren(t),e){var o=e[i++];o&&goog.dom.appendChild(t,o)}})}),i<e.length){for(var n=[],r=goog.dom.getDomHelper(t),g=o.rows[0].cells.length;i<e.length;){var s=e[i++];n.push(this.createCell(s,r)),n.length==g&&(s=this.createRow(n,r),goog.dom.appendChild(o,s),n.length=0)}if(0<n.length){for(;n.length<g;)n.push(this.createCell("",r));s=this.createRow(n,r),goog.dom.appendChild(o,s)}}}goog.style.setUnselectable(t,!0,goog.userAgent.GECKO)}},goog.ui.PaletteRenderer.prototype.getContainingItem=function(t,e){for(var o=t.getElement();e&&e.nodeType==goog.dom.NodeType.ELEMENT&&e!=o;){if("TD"==e.tagName&&goog.dom.classes.has(e,this.getCssClass()+"-cell"))return e.firstChild;e=e.parentNode}return null},goog.ui.PaletteRenderer.prototype.highlightCell=function(t,e,o){e&&(e=this.getCellForItem(e),goog.dom.classes.enable(e,this.getCssClass()+"-cell-hover",o),t=t.getElement().firstChild,goog.a11y.aria.setState(t,"activedescendent",e.id))},goog.ui.PaletteRenderer.prototype.getCellForItem=function(t){return t?t.parentNode:null},goog.ui.PaletteRenderer.prototype.selectCell=function(t,e,o){e&&goog.dom.classes.enable(e.parentNode,this.getCssClass()+"-cell-selected",o)},goog.ui.PaletteRenderer.prototype.getCssClass=function(){return goog.ui.PaletteRenderer.CSS_CLASS},goog.ui.Palette=function(t,e,o){goog.ui.Control.call(this,t,e||goog.ui.PaletteRenderer.getInstance(),o),this.setAutoStates(goog.ui.Component.State.CHECKED|goog.ui.Component.State.SELECTED|goog.ui.Component.State.OPENED,!1),this.currentCellControl_=new goog.ui.Palette.CurrentCell_,this.currentCellControl_.setParentEventTarget(this)},goog.inherits(goog.ui.Palette,goog.ui.Control),goog.ui.Palette.EventType={AFTER_HIGHLIGHT:goog.events.getUniqueId("afterhighlight")},goog.ui.Palette.prototype.size_=null,goog.ui.Palette.prototype.highlightedIndex_=-1,goog.ui.Palette.prototype.selectionModel_=null,goog.ui.Palette.prototype.disposeInternal=function(){goog.ui.Palette.superClass_.disposeInternal.call(this),this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null),this.size_=null,this.currentCellControl_.dispose()},goog.ui.Palette.prototype.setContentInternal=function(t){goog.ui.Palette.superClass_.setContentInternal.call(this,t),this.adjustSize_(),this.selectionModel_?(this.selectionModel_.clear(),this.selectionModel_.addItems(t)):(this.selectionModel_=new goog.ui.SelectionModel(t),this.selectionModel_.setSelectionHandler(goog.bind(this.selectItem_,this)),this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange)),this.highlightedIndex_=-1},goog.ui.Palette.prototype.getCaption=function(){return""},goog.ui.Palette.prototype.setCaption=function(){},goog.ui.Palette.prototype.handleMouseOver=function(t){goog.ui.Palette.superClass_.handleMouseOver.call(this,t);var e=this.getRenderer().getContainingItem(this,t.target);(!e||!t.relatedTarget||!goog.dom.contains(e,t.relatedTarget))&&e!=this.getHighlightedItem()&&this.setHighlightedItem(e)},goog.ui.Palette.prototype.handleMouseOut=function(t){goog.ui.Palette.superClass_.handleMouseOut.call(this,t);var e=this.getRenderer().getContainingItem(this,t.target);(!e||!t.relatedTarget||!goog.dom.contains(e,t.relatedTarget))&&e==this.getHighlightedItem()&&this.setHighlightedItem(null)},goog.ui.Palette.prototype.handleMouseDown=function(t){goog.ui.Palette.superClass_.handleMouseDown.call(this,t),this.isActive()&&(t=this.getRenderer().getContainingItem(this,t.target))!=this.getHighlightedItem()&&this.setHighlightedItem(t)},goog.ui.Palette.prototype.performActionInternal=function(t){var e=this.getHighlightedItem();return!!e&&(this.setSelectedItem(e),goog.ui.Palette.superClass_.performActionInternal.call(this,t))},goog.ui.Palette.prototype.handleKeyEvent=function(t){var e=(e=this.getContent())?e.length:0,o=this.size_.width;if(0==e||!this.isEnabled())return!1;if(t.keyCode==goog.events.KeyCodes.ENTER||t.keyCode==goog.events.KeyCodes.SPACE)return this.performActionInternal(t);if(t.keyCode==goog.events.KeyCodes.HOME)return this.setHighlightedIndex(0),!0;if(t.keyCode==goog.events.KeyCodes.END)return this.setHighlightedIndex(e-1),!0;var i=0>this.highlightedIndex_?this.getSelectedIndex():this.highlightedIndex_;switch(t.keyCode){case goog.events.KeyCodes.LEFT:if(-1==i&&(i=e),0<i)return this.setHighlightedIndex(i-1),t.preventDefault(),!0;break;case goog.events.KeyCodes.RIGHT:if(i<e-1)return this.setHighlightedIndex(i+1),t.preventDefault(),!0;break;case goog.events.KeyCodes.UP:if(-1==i&&(i=e+o-1),i>=o)return this.setHighlightedIndex(i-o),t.preventDefault(),!0;break;case goog.events.KeyCodes.DOWN:if(-1==i&&(i=-o),i<e-o)return this.setHighlightedIndex(i+o),t.preventDefault(),!0}return!1},goog.ui.Palette.prototype.handleSelectionChange=function(){},goog.ui.Palette.prototype.getSize=function(){return this.size_},goog.ui.Palette.prototype.setSize=function(t,e){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.size_=goog.isNumber(t)?new goog.math.Size(t,e):t,this.adjustSize_()},goog.ui.Palette.prototype.getHighlightedIndex=function(){return this.highlightedIndex_},goog.ui.Palette.prototype.getHighlightedItem=function(){var t=this.getContent();return t&&t[this.highlightedIndex_]},goog.ui.Palette.prototype.getHighlightedCellElement_=function(){return this.getRenderer().getCellForItem(this.getHighlightedItem())},goog.ui.Palette.prototype.setHighlightedIndex=function(t){t!=this.highlightedIndex_&&(this.highlightIndex_(this.highlightedIndex_,!1),this.highlightedIndex_=t,this.highlightIndex_(t,!0),this.dispatchEvent(goog.ui.Palette.EventType.AFTER_HIGHLIGHT))},goog.ui.Palette.prototype.setHighlightedItem=function(t){var e=this.getContent();this.setHighlightedIndex(e?goog.array.indexOf(e,t):-1)},goog.ui.Palette.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1},goog.ui.Palette.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null},goog.ui.Palette.prototype.setSelectedIndex=function(t){this.selectionModel_&&this.selectionModel_.setSelectedIndex(t)},goog.ui.Palette.prototype.setSelectedItem=function(t){this.selectionModel_&&this.selectionModel_.setSelectedItem(t)},goog.ui.Palette.prototype.highlightIndex_=function(t,e){if(this.getElement()){var o=this.getContent();if(o&&0<=t&&t<o.length){var i=this.getHighlightedCellElement_();this.currentCellControl_.getElement()!=i&&this.currentCellControl_.setElementInternal(i),this.currentCellControl_.tryHighlight(e)&&this.getRenderer().highlightCell(this,o[t],e)}}},goog.ui.Palette.prototype.selectItem_=function(t,e){this.getElement()&&this.getRenderer().selectCell(this,t,e)},goog.ui.Palette.prototype.adjustSize_=function(){var t=this.getContent();t?this.size_&&this.size_.width?(t=Math.ceil(t.length/this.size_.width),(!goog.isNumber(this.size_.height)||this.size_.height<t)&&(this.size_.height=t)):(t=Math.ceil(Math.sqrt(t.length)),this.size_=new goog.math.Size(t,t)):this.size_=new goog.math.Size(0,0)},goog.ui.Palette.CurrentCell_=function(){goog.ui.Control.call(this,null),this.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0)},goog.inherits(goog.ui.Palette.CurrentCell_,goog.ui.Control),goog.ui.Palette.CurrentCell_.prototype.tryHighlight=function(t){return this.setHighlighted(t),this.isHighlighted()==t},goog.ui.ColorPalette=function(t,e,o){this.colors_=t||[],goog.ui.Palette.call(this,null,e||goog.ui.PaletteRenderer.getInstance(),o),this.setColors(this.colors_)},goog.inherits(goog.ui.ColorPalette,goog.ui.Palette),goog.ui.ColorPalette.prototype.normalizedColors_=null,goog.ui.ColorPalette.prototype.getColors=function(){return this.colors_},goog.ui.ColorPalette.prototype.setColors=function(t){this.colors_=t,this.normalizedColors_=null,this.setContent(this.createColorNodes())},goog.ui.ColorPalette.prototype.getSelectedColor=function(){var t=this.getSelectedItem();return t?(t=goog.style.getStyle(t,"background-color"),goog.ui.ColorPalette.parseColor_(t)):null},goog.ui.ColorPalette.prototype.setSelectedColor=function(t){t=goog.ui.ColorPalette.parseColor_(t),this.normalizedColors_||(this.normalizedColors_=goog.array.map(this.colors_,function(t){return goog.ui.ColorPalette.parseColor_(t)})),this.setSelectedIndex(t?goog.array.indexOf(this.normalizedColors_,t):-1)},goog.ui.ColorPalette.prototype.createColorNodes=function(){return goog.array.map(this.colors_,function(t){var e=this.getDomHelper().createDom("div",{"class":this.getRenderer().getCssClass()+"-colorswatch",style:"background-color:"+t});return e.title="#"==t.charAt(0)?"RGB ("+goog.color.hexToRgb(t).join(", ")+")":t,e},this)},goog.ui.ColorPalette.parseColor_=function(t){if(t)try{return goog.color.parse(t).hex}catch(e){}return null},goog.ui.ColorMenuButton=function(t,e,o,i){goog.ui.MenuButton.call(this,t,e,o||goog.ui.ColorMenuButtonRenderer.getInstance(),i)},goog.inherits(goog.ui.ColorMenuButton,goog.ui.MenuButton),goog.ui.ColorMenuButton.PALETTES={GRAYSCALE:"#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),SOLID:"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),PASTEL:"#f4cccc #fce5cd #fff2cc #d9ead3 #d0e0e3 #cfe2f3 #d9d2e9 #ead1dc #ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd #e06666 #f6b26b #ffd966 #93c47d #76a5af #6fa8dc #8e7cc3 #c27ba0 #cc0000 #e69138 #f1c232 #6aa84f #45818e #3d85c6 #674ea7 #a64d79 #990000 #b45f06 #bf9000 #38761d #134f5c #0b5394 #351c75 #741b47 #660000 #783f04 #7f6000 #274e13 #0c343d #073763 #20124d #4c1130".split(" ")},goog.ui.ColorMenuButton.NO_COLOR="none",goog.ui.ColorMenuButton.newColorMenu=function(t,e){var o=new goog.ui.Menu(e);return t&&goog.array.forEach(t,function(t){o.addChild(t,!0)}),goog.object.forEach(goog.ui.ColorMenuButton.PALETTES,function(t){(t=new goog.ui.ColorPalette(t,null,e)).setSize(8),o.addChild(t,!0)}),o},goog.ui.ColorMenuButton.prototype.getSelectedColor=function(){return this.getValue()},goog.ui.ColorMenuButton.prototype.setSelectedColor=function(t){this.setValue(t)},goog.ui.ColorMenuButton.prototype.setValue=function(t){for(var e,o=0;e=this.getItemAt(o);o++)"function"==typeof e.setSelectedColor&&e.setSelectedColor(t);goog.ui.ColorMenuButton.superClass_.setValue.call(this,t)},goog.ui.ColorMenuButton.prototype.handleMenuAction=function(t){"function"==typeof t.target.getSelectedColor?this.setValue(t.target.getSelectedColor()):t.target.getValue()==goog.ui.ColorMenuButton.NO_COLOR&&this.setValue(null),goog.ui.ColorMenuButton.superClass_.handleMenuAction.call(this,t),t.stopPropagation(),this.dispatchEvent(goog.ui.Component.EventType.ACTION)},goog.ui.ColorMenuButton.prototype.setOpen=function(t,e){t&&0==this.getItemCount()&&(this.setMenu(goog.ui.ColorMenuButton.newColorMenu(null,this.getDomHelper())),this.setValue(this.getValue())),goog.ui.ColorMenuButton.superClass_.setOpen.call(this,t,e)},goog.ui.registry.setDecoratorByClassName(goog.ui.ColorMenuButtonRenderer.CSS_CLASS,function(){return new goog.ui.ColorMenuButton(null)}),goog.events.MouseWheelHandler=function(t,e){goog.events.EventTarget.call(this),this.element_=t;var o=goog.dom.isElement(this.element_)?this.element_:this.element_?this.element_.body:null;this.isRtl_=!!o&&goog.style.isRightToLeft(o),this.listenKey_=goog.events.listen(this.element_,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",this,e)},goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget),goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"},goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(t){this.maxDeltaX_=t},goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(t){this.maxDeltaY_=t},goog.events.MouseWheelHandler.prototype.handleEvent=function(t){var e=0,o=0,i=0;"mousewheel"==(t=t.getBrowserEvent()).type?(o=1,(goog.userAgent.IE||goog.userAgent.WEBKIT&&(goog.userAgent.WINDOWS||goog.userAgent.isVersion("532.0")))&&(o=40),i=goog.events.MouseWheelHandler.smartScale_(-t.wheelDelta,o),goog.isDef(t.wheelDeltaX)?(e=goog.events.MouseWheelHandler.smartScale_(-t.wheelDeltaX,o),o=goog.events.MouseWheelHandler.smartScale_(-t.wheelDeltaY,o)):o=i):(100<(i=t.detail)?i=3:-100>i&&(i=-3),goog.isDef(t.axis)&&t.axis===t.HORIZONTAL_AXIS?e=i:o=i),goog.isNumber(this.maxDeltaX_)&&(e=goog.math.clamp(e,-this.maxDeltaX_,this.maxDeltaX_)),goog.isNumber(this.maxDeltaY_)&&(o=goog.math.clamp(o,-this.maxDeltaY_,this.maxDeltaY_)),this.isRtl_&&(e=-e),e=new goog.events.MouseWheelEvent(i,t,e,o),this.dispatchEvent(e)},goog.events.MouseWheelHandler.smartScale_=function(t,e){return goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&0!=t%e?t:t/e},goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.listenKey_),this.listenKey_=null},goog.events.MouseWheelEvent=function(t,e,o,i){goog.events.BrowserEvent.call(this,e),this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.detail=t,this.deltaX=o,this.deltaY=i},goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent),goog.dom.ViewportSizeMonitor=function(t){goog.events.EventTarget.call(this),this.window_=t||window,this.listenerKey_=goog.events.listen(this.window_,goog.events.EventType.RESIZE,this.handleResize_,!1,this),this.size_=goog.dom.getViewportSize(this.window_),this.isPollingRequired_()&&(this.windowSizePollInterval_=window.setInterval(goog.bind(this.checkForSizeChange_,this),goog.dom.ViewportSizeMonitor.WINDOW_SIZE_POLL_RATE))},goog.inherits(goog.dom.ViewportSizeMonitor,goog.events.EventTarget),goog.dom.ViewportSizeMonitor.getInstanceForWindow=function(t){t=t||window;var e=goog.getUid(t);return goog.dom.ViewportSizeMonitor.windowInstanceMap_[e]=goog.dom.ViewportSizeMonitor.windowInstanceMap_[e]||new goog.dom.ViewportSizeMonitor(t)},goog.dom.ViewportSizeMonitor.removeInstanceForWindow=function(t){t=goog.getUid(t||window),goog.dispose(goog.dom.ViewportSizeMonitor.windowInstanceMap_[t]),delete goog.dom.ViewportSizeMonitor.windowInstanceMap_[t]},goog.dom.ViewportSizeMonitor.windowInstanceMap_={},goog.dom.ViewportSizeMonitor.WINDOW_SIZE_POLL_RATE=500,goog.dom.ViewportSizeMonitor.prototype.listenerKey_=null,goog.dom.ViewportSizeMonitor.prototype.window_=null,goog.dom.ViewportSizeMonitor.prototype.size_=null,goog.dom.ViewportSizeMonitor.prototype.windowSizePollInterval_=null,goog.dom.ViewportSizeMonitor.prototype.isPollingRequired_=function(){return goog.userAgent.WEBKIT&&goog.userAgent.WINDOWS||goog.userAgent.OPERA&&this.window_.self!=this.window_.top},goog.dom.ViewportSizeMonitor.prototype.getSize=function(){return this.size_?this.size_.clone():null},goog.dom.ViewportSizeMonitor.prototype.disposeInternal=function(){goog.dom.ViewportSizeMonitor.superClass_.disposeInternal.call(this),this.listenerKey_&&(goog.events.unlistenByKey(this.listenerKey_),this.listenerKey_=null),this.windowSizePollInterval_&&(window.clearInterval(this.windowSizePollInterval_),this.windowSizePollInterval_=null),this.size_=this.window_=null},goog.dom.ViewportSizeMonitor.prototype.handleResize_=function(){this.checkForSizeChange_()},goog.dom.ViewportSizeMonitor.prototype.checkForSizeChange_=function(){var t=goog.dom.getViewportSize(this.window_);goog.math.Size.equals(t,this.size_)||(this.size_=t,this.dispatchEvent(goog.events.EventType.RESIZE))},goog.ui.CustomColorPalette=function(t,e,o){goog.ui.ColorPalette.call(this,t,e,o),this.setSupportedState(goog.ui.Component.State.OPENED,!0)},goog.inherits(goog.ui.CustomColorPalette,goog.ui.ColorPalette),goog.ui.CustomColorPalette.prototype.createColorNodes=function(){var t=goog.getMsg("Add a color"),e=goog.ui.CustomColorPalette.superClass_.createColorNodes.call(this);return e.push(goog.dom.createDom("div",{"class":"goog-palette-customcolor",title:t},"+")),e},goog.ui.CustomColorPalette.prototype.performActionInternal=function(t){if(t=this.getHighlightedItem()){if(!goog.dom.classes.has(t,"goog-palette-customcolor"))return this.setSelectedItem(t),this.dispatchEvent(goog.ui.Component.EventType.ACTION);this.promptForCustomColor()}return!1},goog.ui.CustomColorPalette.prototype.promptForCustomColor=function(){var t=goog.getMsg("Input custom color, i.e. pink, #F00, #D015FF or rgb(100, 50, 25)"),e=null;if(this.setOpen(!0),this.isOpen()&&(e=window.prompt(t,"#FFFFFF"),this.setOpen(!1)),e){var o;try{o=goog.color.parse(e).hex}catch(i){return o=goog.getMsg('ERROR: "{$color}" is not a valid color.',{color:e}),void alert(o)}(t=this.getColors()).push(o),this.setColors(t),this.setSelectedColor(o),this.dispatchEvent(goog.ui.Component.EventType.ACTION)}},goog.graphics.AffineTransform=function(t,e,o,i,n,r){if(6==arguments.length)this.setTransform(t,e,o,i,n,r);else{if(0!=arguments.length)throw Error("Insufficient matrix parameters");this.m00_=this.m11_=1,this.m10_=this.m01_=this.m02_=this.m12_=0}},goog.graphics.AffineTransform.prototype.isIdentity=function(){return 1==this.m00_&&0==this.m10_&&0==this.m01_&&1==this.m11_&&0==this.m02_&&0==this.m12_},goog.graphics.AffineTransform.prototype.clone=function(){return new goog.graphics.AffineTransform(this.m00_,this.m10_,this.m01_,this.m11_,this.m02_,this.m12_)},goog.graphics.AffineTransform.prototype.setTransform=function(t,e,o,i,n,r){if(!(goog.isNumber(t)&&goog.isNumber(e)&&goog.isNumber(o)&&goog.isNumber(i)&&goog.isNumber(n)&&goog.isNumber(r)))throw Error("Invalid transform parameters");return this.m00_=t,this.m10_=e,this.m01_=o,this.m11_=i,this.m02_=n,this.m12_=r,this},goog.graphics.AffineTransform.prototype.copyFrom=function(t){return this.m00_=t.m00_,this.m10_=t.m10_,this.m01_=t.m01_,this.m11_=t.m11_,this.m02_=t.m02_,this.m12_=t.m12_,this},goog.graphics.AffineTransform.prototype.scale=function(t,e){return this.m00_*=t,this.m10_*=t,this.m01_*=e,this.m11_*=e,this},goog.graphics.AffineTransform.prototype.preScale=function(t,e){return this.m00_*=t,this.m01_*=t,this.m02_*=t,this.m10_*=e,this.m11_*=e,this.m12_*=e,this},goog.graphics.AffineTransform.prototype.translate=function(t,e){return this.m02_+=t*this.m00_+e*this.m01_,this.m12_+=t*this.m10_+e*this.m11_,this},goog.graphics.AffineTransform.prototype.preTranslate=function(t,e){return this.m02_+=t,this.m12_+=e,this},goog.graphics.AffineTransform.prototype.rotate=function(t,e,o){return this.concatenate(goog.graphics.AffineTransform.getRotateInstance(t,e,o))},goog.graphics.AffineTransform.prototype.preRotate=function(t,e,o){return this.preConcatenate(goog.graphics.AffineTransform.getRotateInstance(t,e,o))},goog.graphics.AffineTransform.prototype.shear=function(t,e){var o=this.m00_,i=this.m10_;return this.m00_+=e*this.m01_,this.m10_+=e*this.m11_,this.m01_+=t*o,this.m11_+=t*i,this},goog.graphics.AffineTransform.prototype.preShear=function(t,e){var o=this.m00_,i=this.m01_,n=this.m02_;return this.m00_+=t*this.m10_,this.m01_+=t*this.m11_,this.m02_+=t*this.m12_,this.m10_+=e*o,this.m11_+=e*i,this.m12_+=e*n,this},goog.graphics.AffineTransform.prototype.toString=function(){return"matrix("+[this.m00_,this.m10_,this.m01_,this.m11_,this.m02_,this.m12_].join()+")"},goog.graphics.AffineTransform.prototype.getScaleX=function(){return this.m00_},goog.graphics.AffineTransform.prototype.getScaleY=function(){return this.m11_},goog.graphics.AffineTransform.prototype.getTranslateX=function(){return this.m02_},goog.graphics.AffineTransform.prototype.getTranslateY=function(){return this.m12_},goog.graphics.AffineTransform.prototype.getShearX=function(){return this.m01_},goog.graphics.AffineTransform.prototype.getShearY=function(){return this.m10_},goog.graphics.AffineTransform.prototype.concatenate=function(t){var e=this.m00_,o=this.m01_;return this.m00_=t.m00_*e+t.m10_*o,this.m01_=t.m01_*e+t.m11_*o,this.m02_+=t.m02_*e+t.m12_*o,e=this.m10_,o=this.m11_,this.m10_=t.m00_*e+t.m10_*o,this.m11_=t.m01_*e+t.m11_*o,this.m12_+=t.m02_*e+t.m12_*o,this},goog.graphics.AffineTransform.prototype.preConcatenate=function(t){var e=this.m00_,o=this.m10_;return this.m00_=t.m00_*e+t.m01_*o,this.m10_=t.m10_*e+t.m11_*o,e=this.m01_,o=this.m11_,this.m01_=t.m00_*e+t.m01_*o,this.m11_=t.m10_*e+t.m11_*o,e=this.m02_,o=this.m12_,this.m02_=t.m00_*e+t.m01_*o+t.m02_,this.m12_=t.m10_*e+t.m11_*o+t.m12_,this},goog.graphics.AffineTransform.prototype.transform=function(t,e,o,i,n){var r=e;for(e+=2*n;r<e;){n=t[r++];var g=t[r++];o[i++]=n*this.m00_+g*this.m01_+this.m02_,o[i++]=n*this.m10_+g*this.m11_+this.m12_}},goog.graphics.AffineTransform.prototype.getDeterminant=function(){return this.m00_*this.m11_-this.m01_*this.m10_},goog.graphics.AffineTransform.prototype.isInvertible=function(){var t=this.getDeterminant();return goog.math.isFiniteNumber(t)&&goog.math.isFiniteNumber(this.m02_)&&goog.math.isFiniteNumber(this.m12_)&&0!=t},goog.graphics.AffineTransform.prototype.createInverse=function(){var t=this.getDeterminant();return new goog.graphics.AffineTransform(this.m11_/t,-this.m10_/t,-this.m01_/t,this.m00_/t,(this.m01_*this.m12_-this.m11_*this.m02_)/t,(this.m10_*this.m02_-this.m00_*this.m12_)/t)},goog.graphics.AffineTransform.getScaleInstance=function(t,e){return(new goog.graphics.AffineTransform).setToScale(t,e)},goog.graphics.AffineTransform.getTranslateInstance=function(t,e){return(new goog.graphics.AffineTransform).setToTranslation(t,e)},goog.graphics.AffineTransform.getShearInstance=function(t,e){return(new goog.graphics.AffineTransform).setToShear(t,e)},goog.graphics.AffineTransform.getRotateInstance=function(t,e,o){return(new goog.graphics.AffineTransform).setToRotation(t,e,o)},goog.graphics.AffineTransform.prototype.setToScale=function(t,e){return this.setTransform(t,0,0,e,0,0)},goog.graphics.AffineTransform.prototype.setToTranslation=function(t,e){return this.setTransform(1,0,0,1,t,e)},goog.graphics.AffineTransform.prototype.setToShear=function(t,e){return this.setTransform(1,e,t,1,0,0)},goog.graphics.AffineTransform.prototype.setToRotation=function(t,e,o){var i=Math.cos(t);return t=Math.sin(t),this.setTransform(i,t,-t,i,e-e*i+o*t,o-e*t-o*i)},goog.graphics.AffineTransform.prototype.equals=function(t){return this==t||!!t&&(this.m00_==t.m00_&&this.m01_==t.m01_&&this.m02_==t.m02_&&this.m10_==t.m10_&&this.m11_==t.m11_&&this.m12_==t.m12_)},goog.graphics.Element=function(t,e){goog.events.EventTarget.call(this),this.element_=t,this.graphics_=e,this.customEvent_=!1},goog.inherits(goog.graphics.Element,goog.events.EventTarget),
goog.graphics.Element.prototype.graphics_=null,goog.graphics.Element.prototype.element_=null,goog.graphics.Element.prototype.transform_=null,goog.graphics.Element.prototype.getElement=function(){return this.element_},goog.graphics.Element.prototype.getGraphics=function(){return this.graphics_},goog.graphics.Element.prototype.setTransformation=function(t,e,o,i,n){this.transform_=goog.graphics.AffineTransform.getRotateInstance(goog.math.toRadians(o),i,n).translate(t,e),this.getGraphics().setElementTransform(this,t,e,o,i,n)},goog.graphics.Element.prototype.getTransform=function(){return this.transform_?this.transform_.clone():new goog.graphics.AffineTransform},goog.graphics.Element.prototype.addEventListener=function(t,e,o,i){goog.events.listen(this.element_,t,e,o,i)},goog.graphics.Element.prototype.removeEventListener=function(t,e,o,i){goog.events.unlisten(this.element_,t,e,o,i)},goog.graphics.Element.prototype.disposeInternal=function(){goog.graphics.Element.superClass_.disposeInternal.call(this),goog.events.removeAll(this.element_)},goog.graphics.StrokeAndFillElement=function(t,e,o,i){goog.graphics.Element.call(this,t,e),this.setStroke(o),this.setFill(i)},goog.inherits(goog.graphics.StrokeAndFillElement,goog.graphics.Element),goog.graphics.StrokeAndFillElement.prototype.fill=null,goog.graphics.StrokeAndFillElement.prototype.stroke_=null,goog.graphics.StrokeAndFillElement.prototype.setFill=function(t){this.fill=t,this.getGraphics().setElementFill(this,t)},goog.graphics.StrokeAndFillElement.prototype.getFill=function(){return this.fill},goog.graphics.StrokeAndFillElement.prototype.setStroke=function(t){this.stroke_=t,this.getGraphics().setElementStroke(this,t)},goog.graphics.StrokeAndFillElement.prototype.getStroke=function(){return this.stroke_},goog.graphics.StrokeAndFillElement.prototype.reapplyStroke=function(){this.stroke_&&this.setStroke(this.stroke_)},goog.graphics.RectElement=function(t,e,o,i){goog.graphics.StrokeAndFillElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.RectElement,goog.graphics.StrokeAndFillElement),goog.graphics.PathElement=function(t,e,o,i){goog.graphics.StrokeAndFillElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.PathElement,goog.graphics.StrokeAndFillElement),goog.graphics.GroupElement=function(t,e){goog.graphics.Element.call(this,t,e)},goog.inherits(goog.graphics.GroupElement,goog.graphics.Element),goog.graphics.TextElement=function(t,e,o,i){goog.graphics.StrokeAndFillElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.TextElement,goog.graphics.StrokeAndFillElement),goog.graphics.EllipseElement=function(t,e,o,i){goog.graphics.StrokeAndFillElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.EllipseElement,goog.graphics.StrokeAndFillElement),goog.graphics.ImageElement=function(t,e){goog.graphics.Element.call(this,t,e)},goog.inherits(goog.graphics.ImageElement,goog.graphics.Element),goog.graphics.SvgGroupElement=function(t,e){goog.graphics.GroupElement.call(this,t,e)},goog.inherits(goog.graphics.SvgGroupElement,goog.graphics.GroupElement),goog.graphics.SvgGroupElement.prototype.clear=function(){goog.dom.removeChildren(this.getElement())},goog.graphics.SvgGroupElement.prototype.setSize=function(t,e){this.getGraphics().setElementAttributes(this.getElement(),{width:t,height:e})},goog.graphics.SvgEllipseElement=function(t,e,o,i){goog.graphics.EllipseElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.SvgEllipseElement,goog.graphics.EllipseElement),goog.graphics.SvgEllipseElement.prototype.setCenter=function(t,e){this.getGraphics().setElementAttributes(this.getElement(),{cx:t,cy:e})},goog.graphics.SvgEllipseElement.prototype.setRadius=function(t,e){this.getGraphics().setElementAttributes(this.getElement(),{rx:t,ry:e})},goog.graphics.SvgRectElement=function(t,e,o,i){goog.graphics.RectElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.SvgRectElement,goog.graphics.RectElement),goog.graphics.SvgRectElement.prototype.setPosition=function(t,e){this.getGraphics().setElementAttributes(this.getElement(),{x:t,y:e})},goog.graphics.SvgRectElement.prototype.setSize=function(t,e){this.getGraphics().setElementAttributes(this.getElement(),{width:t,height:e})},goog.graphics.SvgPathElement=function(t,e,o,i){goog.graphics.PathElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.SvgPathElement,goog.graphics.PathElement),goog.graphics.SvgPathElement.prototype.setPath=function(t){this.getGraphics().setElementAttributes(this.getElement(),{d:goog.graphics.SvgGraphics.getSvgPath(t)})};goog.graphics.SvgTextElement=function(t,e,o,i){goog.graphics.TextElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.SvgTextElement,goog.graphics.TextElement),goog.graphics.SvgTextElement.prototype.setText=function(t){this.getElement().firstChild.data=t},goog.graphics.SvgImageElement=function(t,e){goog.graphics.ImageElement.call(this,t,e)},goog.inherits(goog.graphics.SvgImageElement,goog.graphics.ImageElement),goog.graphics.SvgImageElement.prototype.setPosition=function(t,e){this.getGraphics().setElementAttributes(this.getElement(),{x:t,y:e})},goog.graphics.SvgImageElement.prototype.setSize=function(t,e){this.getGraphics().setElementAttributes(this.getElement(),{width:t,height:e})},goog.graphics.SvgImageElement.prototype.setSource=function(t){this.getGraphics().setElementAttributes(this.getElement(),{"xlink:href":t})},goog.graphics.Fill=function(){},goog.graphics.SolidFill=function(t,e){this.color_=t,this.opacity_=null==e?1:e},goog.inherits(goog.graphics.SolidFill,goog.graphics.Fill),goog.graphics.SolidFill.prototype.getColor=function(){return this.color_},goog.graphics.SolidFill.prototype.getOpacity=function(){return this.opacity_},goog.graphics.LinearGradient=function(t,e,o,i,n,r,g,s){this.x1_=t,this.y1_=e,this.x2_=o,this.y2_=i,this.color1_=n,this.color2_=r,goog.asserts.assert(goog.isNumber(g)==goog.isNumber(s),"Both or neither of opt_opacity1 and opt_opacity2 have to be set."),this.opacity1_=goog.isDef(g)?g:null,this.opacity2_=goog.isDef(s)?s:null},goog.inherits(goog.graphics.LinearGradient,goog.graphics.Fill),goog.graphics.LinearGradient.prototype.getX1=function(){return this.x1_},goog.graphics.LinearGradient.prototype.getY1=function(){return this.y1_},goog.graphics.LinearGradient.prototype.getX2=function(){return this.x2_},goog.graphics.LinearGradient.prototype.getY2=function(){return this.y2_},goog.graphics.LinearGradient.prototype.getColor1=function(){return this.color1_},goog.graphics.LinearGradient.prototype.getColor2=function(){return this.color2_},goog.graphics.LinearGradient.prototype.getOpacity1=function(){return this.opacity1_},goog.graphics.LinearGradient.prototype.getOpacity2=function(){return this.opacity2_},goog.graphics.Stroke=function(t,e){this.width_=t,this.color_=e},goog.graphics.Stroke.prototype.getWidth=function(){return this.width_},goog.graphics.Stroke.prototype.getColor=function(){return this.color_},goog.graphics.Path=function(){this.segments_=[],this.count_=[],this.arguments_=[]},goog.graphics.Path.prototype.closePoint_=null,goog.graphics.Path.prototype.currentPoint_=null,goog.graphics.Path.prototype.simple_=!0,goog.graphics.Path.Segment={MOVETO:0,LINETO:1,CURVETO:2,ARCTO:3,CLOSE:4},goog.graphics.Path.segmentArgCounts_=function(){var t=[];return t[goog.graphics.Path.Segment.MOVETO]=2,t[goog.graphics.Path.Segment.LINETO]=2,t[goog.graphics.Path.Segment.CURVETO]=6,t[goog.graphics.Path.Segment.ARCTO]=6,t[goog.graphics.Path.Segment.CLOSE]=0,t}(),goog.graphics.Path.getSegmentCount=function(t){return goog.graphics.Path.segmentArgCounts_[t]},goog.graphics.Path.prototype.appendPath=function(t){return t.currentPoint_&&(Array.prototype.push.apply(this.segments_,t.segments_),Array.prototype.push.apply(this.count_,t.count_),Array.prototype.push.apply(this.arguments_,t.arguments_),this.currentPoint_=t.currentPoint_.concat(),this.closePoint_=t.closePoint_.concat(),this.simple_=this.simple_&&t.simple_),this},goog.graphics.Path.prototype.clear=function(){return this.segments_.length=0,this.count_.length=0,this.arguments_.length=0,delete this.closePoint_,delete this.currentPoint_,delete this.simple_,this},goog.graphics.Path.prototype.moveTo=function(t,e){return goog.array.peek(this.segments_)==goog.graphics.Path.Segment.MOVETO?this.arguments_.length-=2:(this.segments_.push(goog.graphics.Path.Segment.MOVETO),this.count_.push(1)),this.arguments_.push(t,e),this.currentPoint_=this.closePoint_=[t,e],this},goog.graphics.Path.prototype.lineTo=function(){var t=goog.array.peek(this.segments_);if(null==t)throw Error("Path cannot start with lineTo");for(t!=goog.graphics.Path.Segment.LINETO&&(this.segments_.push(goog.graphics.Path.Segment.LINETO),this.count_.push(0)),t=0;t<arguments.length;t+=2){var e=arguments[t],o=arguments[t+1];this.arguments_.push(e,o)}return this.count_[this.count_.length-1]+=t/2,this.currentPoint_=[e,o],this},goog.graphics.Path.prototype.curveTo=function(){var t=goog.array.peek(this.segments_);if(null==t)throw Error("Path cannot start with curve");for(t!=goog.graphics.Path.Segment.CURVETO&&(this.segments_.push(goog.graphics.Path.Segment.CURVETO),this.count_.push(0)),t=0;t<arguments.length;t+=6){var e=arguments[t+4],o=arguments[t+5];this.arguments_.push(arguments[t],arguments[t+1],arguments[t+2],arguments[t+3],e,o)}return this.count_[this.count_.length-1]+=t/6,this.currentPoint_=[e,o],this},goog.graphics.Path.prototype.close=function(){var t=goog.array.peek(this.segments_);if(null==t)throw Error("Path cannot start with close");return t!=goog.graphics.Path.Segment.CLOSE&&(this.segments_.push(goog.graphics.Path.Segment.CLOSE),this.count_.push(1),this.currentPoint_=this.closePoint_),this},goog.graphics.Path.prototype.arc=function(t,e,o,i,n,r,g){return t+=goog.math.angleDx(n,o),e+=goog.math.angleDy(n,i),g?(!this.currentPoint_||t!=this.currentPoint_[0]||e!=this.currentPoint_[1])&&this.lineTo(t,e):this.moveTo(t,e),this.arcTo(o,i,n,r)},goog.graphics.Path.prototype.arcTo=function(t,e,o,i){var n=this.currentPoint_[0]-goog.math.angleDx(o,t),r=this.currentPoint_[1]-goog.math.angleDy(o,e);n+=goog.math.angleDx(o+i,t),r+=goog.math.angleDy(o+i,e);return this.segments_.push(goog.graphics.Path.Segment.ARCTO),this.count_.push(1),this.arguments_.push(t,e,o,i,n,r),this.simple_=!1,this.currentPoint_=[n,r],this},goog.graphics.Path.prototype.arcToAsCurves=function(t,e,o,i){var n=this.currentPoint_[0]-goog.math.angleDx(o,t),r=this.currentPoint_[1]-goog.math.angleDy(o,e),g=goog.math.toRadians(i);g/=i=Math.ceil(Math.abs(g)/Math.PI*2),o=goog.math.toRadians(o);for(var s=0;s<i;s++){var a=Math.cos(o),l=Math.sin(o),h=4/3*Math.sin(g/2)/(1+Math.cos(g/2)),u=n+(a-h*l)*t,c=r+(l+h*a)*e;o+=g,a=Math.cos(o),l=Math.sin(o),this.curveTo(u,c,n+(a+h*l)*t,r+(l-h*a)*e,n+a*t,r+l*e)}return this},goog.graphics.Path.prototype.forEachSegment=function(t){for(var e=this.arguments_,o=0,i=0,n=this.segments_.length;i<n;i++){var r=this.segments_[i],g=goog.graphics.Path.segmentArgCounts_[r]*this.count_[i];t(r,e.slice(o,o+g)),o+=g}},goog.graphics.Path.prototype.getCurrentPoint=function(){return this.currentPoint_&&this.currentPoint_.concat()},goog.graphics.Path.prototype.clone=function(){var t=new this.constructor;return t.segments_=this.segments_.concat(),t.count_=this.count_.concat(),t.arguments_=this.arguments_.concat(),t.closePoint_=this.closePoint_&&this.closePoint_.concat(),t.currentPoint_=this.currentPoint_&&this.currentPoint_.concat(),t.simple_=this.simple_,t},goog.graphics.Path.prototype.isSimple=function(){return this.simple_},goog.graphics.Path.simplifySegmentMap_=function(){var t={};return t[goog.graphics.Path.Segment.MOVETO]=goog.graphics.Path.prototype.moveTo,t[goog.graphics.Path.Segment.LINETO]=goog.graphics.Path.prototype.lineTo,t[goog.graphics.Path.Segment.CLOSE]=goog.graphics.Path.prototype.close,t[goog.graphics.Path.Segment.CURVETO]=goog.graphics.Path.prototype.curveTo,t[goog.graphics.Path.Segment.ARCTO]=goog.graphics.Path.prototype.arcToAsCurves,t}(),goog.graphics.Path.createSimplifiedPath=function(t){if(t.isSimple())return t.clone();var e=new goog.graphics.Path;return t.forEachSegment(function(t,o){goog.graphics.Path.simplifySegmentMap_[t].apply(e,o)}),e},goog.graphics.Path.prototype.createTransformedPath=function(t){var e=goog.graphics.Path.createSimplifiedPath(this);return e.transform(t),e},goog.graphics.Path.prototype.transform=function(t){if(!this.isSimple())throw Error("Non-simple path");return t.transform(this.arguments_,0,this.arguments_,0,this.arguments_.length/2),this.closePoint_&&t.transform(this.closePoint_,0,this.closePoint_,0,1),this.currentPoint_&&this.closePoint_!=this.currentPoint_&&t.transform(this.currentPoint_,0,this.currentPoint_,0,1),this},goog.graphics.Path.prototype.isEmpty=function(){return 0==this.segments_.length},goog.graphics.AbstractGraphics=function(t,e,o,i,n){goog.ui.Component.call(this,n),this.width=t,this.height=e,this.coordWidth=o||null,this.coordHeight=i||null},goog.inherits(goog.graphics.AbstractGraphics,goog.ui.Component),goog.graphics.AbstractGraphics.prototype.canvasElement=null,goog.graphics.AbstractGraphics.prototype.coordLeft=0,goog.graphics.AbstractGraphics.prototype.coordTop=0,goog.graphics.AbstractGraphics.prototype.getCanvasElement=function(){return this.canvasElement},goog.graphics.AbstractGraphics.prototype.setCoordSize=function(t,e){this.coordWidth=t,this.coordHeight=e},goog.graphics.AbstractGraphics.prototype.getCoordSize=function(){return this.coordWidth?new goog.math.Size(this.coordWidth,this.coordHeight):this.getPixelSize()},goog.graphics.AbstractGraphics.prototype.getCoordOrigin=function(){return new goog.math.Coordinate(this.coordLeft,this.coordTop)},goog.graphics.AbstractGraphics.prototype.getSize=function(){return this.getPixelSize()},goog.graphics.AbstractGraphics.prototype.getPixelSize=function(){return this.isInDocument()?goog.style.getSize(this.getElement()):goog.isNumber(this.width)&&goog.isNumber(this.height)?new goog.math.Size(this.width,this.height):null},goog.graphics.AbstractGraphics.prototype.getPixelScaleX=function(){var t=this.getPixelSize();return t?t.width/this.getCoordSize().width:0},goog.graphics.AbstractGraphics.prototype.getPixelScaleY=function(){var t=this.getPixelSize();return t?t.height/this.getCoordSize().height:0},goog.graphics.AbstractGraphics.prototype.removeElement=function(t){goog.dom.removeNode(t.getElement())},goog.graphics.AbstractGraphics.prototype.drawCircle=function(t,e,o,i,n,r){return this.drawEllipse(t,e,o,o,i,n,r)},goog.graphics.AbstractGraphics.prototype.drawText=function(t,e,o,i,n,r,g,s,a,l,h){var u=s.size/2;return o="bottom"==g?o+n-u:"center"==g?o+n/2:o+u,this.drawTextOnLine(t,e,o,e+i,o,r,s,a,l,h)},goog.graphics.AbstractGraphics.prototype.createPath=function(){return new goog.graphics.Path},goog.graphics.AbstractGraphics.prototype.isDomClonable=function(){return!1},goog.graphics.AbstractGraphics.prototype.suspend=function(){},goog.graphics.AbstractGraphics.prototype.resume=function(){},goog.graphics.SvgGraphics=function(t,e,o,i,n){goog.graphics.AbstractGraphics.call(this,t,e,o,i,n),this.defs_={},this.useManualViewbox_=goog.userAgent.WEBKIT&&!goog.userAgent.isVersion(526),this.handler_=new goog.events.EventHandler(this)},goog.inherits(goog.graphics.SvgGraphics,goog.graphics.AbstractGraphics),goog.graphics.SvgGraphics.SVG_NS_="http://www.w3.org/2000/svg",goog.graphics.SvgGraphics.DEF_ID_PREFIX_="_svgdef_",goog.graphics.SvgGraphics.nextDefId_=0,goog.graphics.SvgGraphics.prototype.createSvgElement_=function(t,e){var o=this.dom_.getDocument().createElementNS(goog.graphics.SvgGraphics.SVG_NS_,t);return e&&this.setElementAttributes(o,e),o},goog.graphics.SvgGraphics.prototype.setElementAttributes=function(t,e){for(var o in e)t.setAttribute(o,e[o])},goog.graphics.SvgGraphics.prototype.append_=function(t,e){(e||this.canvasElement).getElement().appendChild(t.getElement())},goog.graphics.SvgGraphics.prototype.setElementFill=function(t,e){var o=t.getElement();if(e instanceof goog.graphics.SolidFill)o.setAttribute("fill",e.getColor()),o.setAttribute("fill-opacity",e.getOpacity());else if(e instanceof goog.graphics.LinearGradient){var i="lg-"+e.getX1()+"-"+e.getY1()+"-"+e.getX2()+"-"+e.getY2()+"-"+e.getColor1()+"-"+e.getColor2();if(!(n=this.getDef(i))){var n=this.createSvgElement_("linearGradient",{x1:e.getX1(),y1:e.getY1(),x2:e.getX2(),y2:e.getY2(),gradientUnits:"userSpaceOnUse"}),r="stop-color:"+e.getColor1();goog.isNumber(e.getOpacity1())&&(r+=";stop-opacity:"+e.getOpacity1()),r=this.createSvgElement_("stop",{offset:"0%",style:r}),n.appendChild(r),r="stop-color:"+e.getColor2(),goog.isNumber(e.getOpacity2())&&(r+=";stop-opacity:"+e.getOpacity2()),r=this.createSvgElement_("stop",{offset:"100%",style:r}),n.appendChild(r),n=this.addDef(i,n)}o.setAttribute("fill","url(#"+n+")")}else o.setAttribute("fill","none")},goog.graphics.SvgGraphics.prototype.setElementStroke=function(t,e){var o=t.getElement();if(e){o.setAttribute("stroke",e.getColor());var i=e.getWidth();goog.isString(i)&&-1!=i.indexOf("px")?o.setAttribute("stroke-width",parseFloat(i)/this.getPixelScaleX()):o.setAttribute("stroke-width",i)}else o.setAttribute("stroke","none")},goog.graphics.SvgGraphics.prototype.setElementTransform=function(t,e,o,i,n,r){t.getElement().setAttribute("transform","translate("+e+","+o+") rotate("+i+" "+n+" "+r+")")},goog.graphics.SvgGraphics.prototype.createDom=function(){var t=this.createSvgElement_("svg",{width:this.width,height:this.height,overflow:"hidden"}),e=this.createSvgElement_("g");this.defsElement_=this.createSvgElement_("defs"),this.canvasElement=new goog.graphics.SvgGroupElement(e,this),t.appendChild(this.defsElement_),t.appendChild(e),this.setElementInternal(t),this.setViewBox_()},goog.graphics.SvgGraphics.prototype.setCoordOrigin=function(t,e){this.coordLeft=t,this.coordTop=e,this.setViewBox_()},goog.graphics.SvgGraphics.prototype.setCoordSize=function(){goog.graphics.SvgGraphics.superClass_.setCoordSize.apply(this,arguments),this.setViewBox_()},goog.graphics.SvgGraphics.prototype.getViewBox_=function(){return this.coordLeft+" "+this.coordTop+" "+(this.coordWidth?this.coordWidth+" "+this.coordHeight:"")},goog.graphics.SvgGraphics.prototype.setViewBox_=function(){(this.coordWidth||this.coordLeft||this.coordTop)&&(this.getElement().setAttribute("preserveAspectRatio","none"),this.useManualViewbox_?this.updateManualViewBox_():this.getElement().setAttribute("viewBox",this.getViewBox_()))},goog.graphics.SvgGraphics.prototype.updateManualViewBox_=function(){if(this.isInDocument()&&(this.coordWidth||this.coordLeft||!this.coordTop)){if(0==(i=this.getPixelSize()).width)this.getElement().style.visibility="hidden";else{this.getElement().style.visibility="";var t=-this.coordLeft,e=-this.coordTop,o=i.width/this.coordWidth,i=i.height/this.coordHeight;this.canvasElement.getElement().setAttribute("transform","scale("+o+" "+i+") translate("+t+" "+e+")")}}},goog.graphics.SvgGraphics.prototype.setSize=function(t,e){goog.style.setSize(this.getElement(),t,e)},goog.graphics.SvgGraphics.prototype.getPixelSize=function(){if(!goog.userAgent.GECKO)return this.isInDocument()?goog.style.getSize(this.getElement()):goog.graphics.SvgGraphics.superClass_.getPixelSize.call(this);var t=this.width,e=this.height,o=goog.isString(t)&&-1!=t.indexOf("%"),i=goog.isString(e)&&-1!=e.indexOf("%");if(!this.isInDocument()&&(o||i))return null;var n,r;return o&&(n=this.getElement().parentNode,r=goog.style.getSize(n),t=parseFloat(t)*r.width/100),i&&(n=n||this.getElement().parentNode,r=r||goog.style.getSize(n),e=parseFloat(e)*r.height/100),new goog.math.Size(t,e)},goog.graphics.SvgGraphics.prototype.clear=function(){this.canvasElement.clear(),goog.dom.removeChildren(this.defsElement_),this.defs_={}},goog.graphics.SvgGraphics.prototype.drawEllipse=function(t,e,o,i,n,r,g){return t=this.createSvgElement_("ellipse",{cx:t,cy:e,rx:o,ry:i}),n=new goog.graphics.SvgEllipseElement(t,this,n,r),this.append_(n,g),n},goog.graphics.SvgGraphics.prototype.drawRect=function(t,e,o,i,n,r,g){return t=this.createSvgElement_("rect",{x:t,y:e,width:o,height:i}),n=new goog.graphics.SvgRectElement(t,this,n,r),this.append_(n,g),n},goog.graphics.SvgGraphics.prototype.drawImage=function(t,e,o,i,n,r){return(t=this.createSvgElement_("image",{x:t,y:e,width:o,height:i,"image-rendering":"optimizeQuality",preserveAspectRatio:"none"})).setAttributeNS("http://www.w3.org/1999/xlink","href",n),n=new goog.graphics.SvgImageElement(t,this),this.append_(n,r),n},goog.graphics.SvgGraphics.prototype.drawTextOnLine=function(t,e,o,i,n,r,g,s,a,l){var h=Math.round(goog.math.angle(e,o,i,n));i-=e,n-=o,n=Math.round(Math.sqrt(i*i+n*n));var u=g.size;i={"font-family":g.family,"font-size":u};var c=Math.round(.85*u);u=Math.round(o-u/2+c),c=e;return"center"==r?(c+=Math.round(n/2),i["text-anchor"]="middle"):"right"==r&&(c+=n,i["text-anchor"]="end"),i.x=c,i.y=u,g.bold&&(i["font-weight"]="bold"),g.italic&&(i["font-style"]="italic"),0!=h&&(i.transform="rotate("+h+" "+e+" "+o+")"),(e=this.createSvgElement_("text",i)).appendChild(this.dom_.getDocument().createTextNode(t)),null==s&&goog.userAgent.GECKO&&goog.userAgent.MAC&&(t="black",a instanceof goog.graphics.SolidFill&&(t=a.getColor()),s=new goog.graphics.Stroke(1,t)),a=new goog.graphics.SvgTextElement(e,this,s,a),this.append_(a,l),a},goog.graphics.SvgGraphics.prototype.drawPath=function(t,e,o,i){return t=this.createSvgElement_("path",{d:goog.graphics.SvgGraphics.getSvgPath(t)}),e=new goog.graphics.SvgPathElement(t,this,e,o),this.append_(e,i),e},goog.graphics.SvgGraphics.getSvgPath=function(t){var e=[];return t.forEachSegment(function(t,o){switch(t){case goog.graphics.Path.Segment.MOVETO:e.push("M"),Array.prototype.push.apply(e,o);break;case goog.graphics.Path.Segment.LINETO:e.push("L"),Array.prototype.push.apply(e,o);break;case goog.graphics.Path.Segment.CURVETO:e.push("C"),Array.prototype.push.apply(e,o);break;case goog.graphics.Path.Segment.ARCTO:var i=o[3];e.push("A",o[0],o[1],0,180<Math.abs(i)?1:0,0<i?1:0,o[4],o[5]);break;case goog.graphics.Path.Segment.CLOSE:e.push("Z")}}),e.join(" ")},goog.graphics.SvgGraphics.prototype.createGroup=function(t){var e=this.createSvgElement_("g");return(t||this.canvasElement).getElement().appendChild(e),new goog.graphics.SvgGroupElement(e,this)},goog.graphics.SvgGraphics.prototype.getTextWidth=function(){},goog.graphics.SvgGraphics.prototype.addDef=function(t,e){if(t in this.defs_)return this.defs_[t];var o=goog.graphics.SvgGraphics.DEF_ID_PREFIX_+goog.graphics.SvgGraphics.nextDefId_++;return e.setAttribute("id",o),this.defs_[t]=o,this.defsElement_.appendChild(e),o},goog.graphics.SvgGraphics.prototype.getDef=function(t){return t in this.defs_?this.defs_[t]:null},goog.graphics.SvgGraphics.prototype.removeDef=function(t){var e=this.getDef(t);e&&(e=this.dom_.getElement(e),this.defsElement_.removeChild(e),delete this.defs_[t])},goog.graphics.SvgGraphics.prototype.enterDocument=function(){var t=this.getPixelSize();if(goog.graphics.SvgGraphics.superClass_.enterDocument.call(this),t||this.dispatchEvent(goog.events.EventType.RESIZE),this.useManualViewbox_){t=this.width;var e=this.height;"string"==typeof t&&-1!=t.indexOf("%")&&"string"==typeof e&&-1!=e.indexOf("%")&&this.handler_.listen(goog.graphics.SvgGraphics.getResizeCheckTimer_(),goog.Timer.TICK,this.updateManualViewBox_),this.updateManualViewBox_()}},goog.graphics.SvgGraphics.prototype.exitDocument=function(){goog.graphics.SvgGraphics.superClass_.exitDocument.call(this),this.useManualViewbox_&&this.handler_.unlisten(goog.graphics.SvgGraphics.getResizeCheckTimer_(),goog.Timer.TICK,this.updateManualViewBox_)},goog.graphics.SvgGraphics.prototype.disposeInternal=function(){delete this.defs_,delete this.defsElement_,delete this.canvasElement,goog.graphics.SvgGraphics.superClass_.disposeInternal.call(this)},goog.graphics.SvgGraphics.getResizeCheckTimer_=function(){return goog.graphics.SvgGraphics.resizeCheckTimer_||(goog.graphics.SvgGraphics.resizeCheckTimer_=new goog.Timer(400),goog.graphics.SvgGraphics.resizeCheckTimer_.start()),goog.graphics.SvgGraphics.resizeCheckTimer_},goog.graphics.SvgGraphics.prototype.isDomClonable=function(){return!0},goog.graphics.vmlGetElement_=function(){return this.element_=this.getGraphics().getVmlElement(this.id_)||this.element_},goog.graphics.VmlGroupElement=function(t,e){this.id_=t.id,goog.graphics.GroupElement.call(this,t,e)},goog.inherits(goog.graphics.VmlGroupElement,goog.graphics.GroupElement),goog.graphics.VmlGroupElement.prototype.getElement=goog.graphics.vmlGetElement_,goog.graphics.VmlGroupElement.prototype.clear=function(){goog.dom.removeChildren(this.getElement())},goog.graphics.VmlGroupElement.prototype.isRootElement_=function(){return this.getGraphics().getCanvasElement()==this},goog.graphics.VmlGroupElement.prototype.setSize=function(t,e){var o=this.getElement(),i=o.style;i.width=goog.graphics.VmlGraphics.toSizePx(t),i.height=goog.graphics.VmlGraphics.toSizePx(e),o.coordsize=goog.graphics.VmlGraphics.toSizeCoord(t)+" "+goog.graphics.VmlGraphics.toSizeCoord(e),this.isRootElement_()||(o.coordorigin="0 0")},goog.graphics.VmlEllipseElement=function(t,e,o,i,n,r,g,s){this.id_=t.id,goog.graphics.EllipseElement.call(this,t,e,g,s),this.cx=o,this.cy=i,this.rx=n,this.ry=r},goog.inherits(goog.graphics.VmlEllipseElement,goog.graphics.EllipseElement),goog.graphics.VmlEllipseElement.prototype.getElement=goog.graphics.vmlGetElement_,goog.graphics.VmlEllipseElement.prototype.setCenter=function(t,e){this.cx=t,this.cy=e,goog.graphics.VmlGraphics.setPositionAndSize(this.getElement(),t-this.rx,e-this.ry,2*this.rx,2*this.ry)},goog.graphics.VmlEllipseElement.prototype.setRadius=function(t,e){this.rx=t,this.ry=e,goog.graphics.VmlGraphics.setPositionAndSize(this.getElement(),this.cx-t,this.cy-e,2*t,2*e)},goog.graphics.VmlRectElement=function(t,e,o,i){this.id_=t.id,goog.graphics.RectElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.VmlRectElement,goog.graphics.RectElement),goog.graphics.VmlRectElement.prototype.getElement=goog.graphics.vmlGetElement_,goog.graphics.VmlRectElement.prototype.setPosition=function(t,e){var o=this.getElement().style;o.left=goog.graphics.VmlGraphics.toPosPx(t),o.top=goog.graphics.VmlGraphics.toPosPx(e)},goog.graphics.VmlRectElement.prototype.setSize=function(t,e){var o=this.getElement().style;o.width=goog.graphics.VmlGraphics.toSizePx(t),o.height=goog.graphics.VmlGraphics.toSizePx(e)},goog.graphics.VmlPathElement=function(t,e,o,i){this.id_=t.id,goog.graphics.PathElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.VmlPathElement,goog.graphics.PathElement),goog.graphics.VmlPathElement.prototype.getElement=goog.graphics.vmlGetElement_,goog.graphics.VmlPathElement.prototype.setPath=function(t){goog.graphics.VmlGraphics.setAttribute(this.getElement(),"path",goog.graphics.VmlGraphics.getVmlPath(t))},goog.graphics.VmlTextElement=function(t,e,o,i){this.id_=t.id,goog.graphics.TextElement.call(this,t,e,o,i)},goog.inherits(goog.graphics.VmlTextElement,goog.graphics.TextElement),goog.graphics.VmlTextElement.prototype.getElement=goog.graphics.vmlGetElement_,goog.graphics.VmlTextElement.prototype.setText=function(t){goog.graphics.VmlGraphics.setAttribute(this.getElement().childNodes[1],"string",t)},goog.graphics.VmlImageElement=function(t,e){this.id_=t.id,goog.graphics.ImageElement.call(this,t,e)},goog.inherits(goog.graphics.VmlImageElement,goog.graphics.ImageElement),goog.graphics.VmlImageElement.prototype.getElement=goog.graphics.vmlGetElement_,goog.graphics.VmlImageElement.prototype.setPosition=function(t,e){var o=this.getElement().style;o.left=goog.graphics.VmlGraphics.toPosPx(t),o.top=goog.graphics.VmlGraphics.toPosPx(e)},goog.graphics.VmlImageElement.prototype.setSize=function(t,e){var o=this.getElement().style;o.width=goog.graphics.VmlGraphics.toPosPx(t),o.height=goog.graphics.VmlGraphics.toPosPx(e)},goog.graphics.VmlImageElement.prototype.setSource=function(t){goog.graphics.VmlGraphics.setAttribute(this.getElement(),"src",t)},goog.graphics.VmlGraphics=function(t,e,o,i,n){goog.graphics.AbstractGraphics.call(this,t,e,o,i,n),this.handler_=new goog.events.EventHandler(this)},goog.inherits(goog.graphics.VmlGraphics,goog.graphics.AbstractGraphics),goog.graphics.VmlGraphics.VML_PREFIX_="g_vml_",goog.graphics.VmlGraphics.VML_NS_="urn:schemas-microsoft-com:vml",goog.graphics.VmlGraphics.VML_IMPORT_="#default#VML",goog.graphics.VmlGraphics.IE8_MODE_=document.documentMode&&8<=document.documentMode,goog.graphics.VmlGraphics.COORD_MULTIPLIER=100,goog.graphics.VmlGraphics.toCssSize=function(t){return goog.isString(t)&&goog.string.endsWith(t,"%")?t:parseFloat(t.toString())+"px"},goog.graphics.VmlGraphics.toPosCoord=function(t){return Math.round((parseFloat(t.toString())-.5)*goog.graphics.VmlGraphics.COORD_MULTIPLIER)},goog.graphics.VmlGraphics.toPosPx=function(t){return goog.graphics.VmlGraphics.toPosCoord(t)+"px"},goog.graphics.VmlGraphics.toSizeCoord=function(t){return Math.round(parseFloat(t.toString())*goog.graphics.VmlGraphics.COORD_MULTIPLIER)},goog.graphics.VmlGraphics.toSizePx=function(t){return goog.graphics.VmlGraphics.toSizeCoord(t)+"px"},goog.graphics.VmlGraphics.setAttribute=function(t,e,o){goog.graphics.VmlGraphics.IE8_MODE_?t[e]=o:t.setAttribute(e,o)},goog.graphics.VmlGraphics.prototype.createVmlElement=function(t){return t=this.dom_.createElement(goog.graphics.VmlGraphics.VML_PREFIX_+":"+t),t.id=goog.string.createUniqueString(),t},goog.graphics.VmlGraphics.prototype.getVmlElement=function(t){return this.dom_.getElement(t)},goog.graphics.VmlGraphics.prototype.updateGraphics_=function(){goog.graphics.VmlGraphics.IE8_MODE_&&this.isInDocument()&&(this.getElement().innerHTML=this.getElement().innerHTML)},goog.graphics.VmlGraphics.prototype.append_=function(t,e){(e||this.canvasElement).getElement().appendChild(t.getElement()),this.updateGraphics_()},goog.graphics.VmlGraphics.prototype.setElementFill=function(t,e){var o=t.getElement();if(this.removeFill(o),e instanceof goog.graphics.SolidFill)if("transparent"==e.getColor())o.filled=!1;else if(1!=e.getOpacity()){o.filled=!0;var i=this.createVmlElement("fill");i.opacity=Math.round(100*e.getOpacity())+"%",i.color=e.getColor(),o.appendChild(i)}else o.filled=!0,o.fillcolor=e.getColor();else if(e instanceof goog.graphics.LinearGradient){o.filled=!0,(i=this.createVmlElement("fill")).color=e.getColor1(),i.color2=e.getColor2(),goog.isNumber(e.getOpacity1())&&(i.opacity=e.getOpacity1()),goog.isNumber(e.getOpacity2())&&(i.opacity2=e.getOpacity2());var n=goog.math.angle(e.getX1(),e.getY1(),e.getX2(),e.getY2());n=Math.round(goog.math.standardAngle(270-n));i.angle=n,i.type="gradient",o.appendChild(i)}else o.filled=!1;this.updateGraphics_()},goog.graphics.VmlGraphics.prototype.setElementStroke=function(t,e){var o=t.getElement();if(e){o.stroked=!0;var i=e.getWidth(),n=(i=goog.isString(i)&&-1==i.indexOf("px")?parseFloat(i):i*this.getPixelScaleX(),o.getElementsByTagName("stroke")[0]);1>i?(n=n||this.createVmlElement("stroke"),n.opacity=i,n.weight="1px",n.color=e.getColor(),o.appendChild(n)):(n&&o.removeChild(n),o.strokecolor=e.getColor(),o.strokeweight=i+"px")}else o.stroked=!1;this.updateGraphics_()},goog.graphics.VmlGraphics.prototype.setElementTransform=function(t,e,o,i,n,r){(t=t.getElement()).style.left=goog.graphics.VmlGraphics.toPosPx(e),t.style.top=goog.graphics.VmlGraphics.toPosPx(o),(i||t.rotation)&&(t.rotation=i,t.coordsize=goog.graphics.VmlGraphics.toSizeCoord(2*n)+" "+goog.graphics.VmlGraphics.toSizeCoord(2*r))},goog.graphics.VmlGraphics.prototype.removeFill=function(t){t.fillcolor="";for(var e=0;e<t.childNodes.length;e++){var o=t.childNodes[e];"fill"==o.tagName&&t.removeChild(o)}},goog.graphics.VmlGraphics.setPositionAndSize=function(t,e,o,i,n){var r=t.style;r.position="absolute",r.left=goog.graphics.VmlGraphics.toPosPx(e),r.top=goog.graphics.VmlGraphics.toPosPx(o),r.width=goog.graphics.VmlGraphics.toSizePx(i),r.height=goog.graphics.VmlGraphics.toSizePx(n),"shape"==t.tagName&&(t.coordsize=goog.graphics.VmlGraphics.toSizeCoord(i)+" "+goog.graphics.VmlGraphics.toSizeCoord(n))},goog.graphics.VmlGraphics.prototype.createFullSizeElement_=function(t){t=this.createVmlElement(t);var e=this.getCoordSize();return goog.graphics.VmlGraphics.setPositionAndSize(t,0,0,e.width,e.height),t};try{eval("document.namespaces")}catch(ex$$11){}goog.graphics.VmlGraphics.prototype.createDom=function(){(t=this.dom_.getDocument()).namespaces[goog.graphics.VmlGraphics.VML_PREFIX_]||(goog.graphics.VmlGraphics.IE8_MODE_?t.namespaces.add(goog.graphics.VmlGraphics.VML_PREFIX_,goog.graphics.VmlGraphics.VML_NS_,goog.graphics.VmlGraphics.VML_IMPORT_):t.namespaces.add(goog.graphics.VmlGraphics.VML_PREFIX_,goog.graphics.VmlGraphics.VML_NS_),t.createStyleSheet().cssText=goog.graphics.VmlGraphics.VML_PREFIX_+"\\:*{behavior:url(#default#VML)}");var t=this.width,e=this.height,o=this.dom_.createDom("div",{
style:"overflow:hidden;position:relative;width:"+goog.graphics.VmlGraphics.toCssSize(t)+";height:"+goog.graphics.VmlGraphics.toCssSize(e)});this.setElementInternal(o);var i=this.createVmlElement("group"),n=i.style;n.position="absolute",n.left=n.top=0,n.width=this.width,n.height=this.height,i.coordsize=this.coordWidth?goog.graphics.VmlGraphics.toSizeCoord(this.coordWidth)+" "+goog.graphics.VmlGraphics.toSizeCoord(this.coordHeight):goog.graphics.VmlGraphics.toSizeCoord(t)+" "+goog.graphics.VmlGraphics.toSizeCoord(e),goog.isDef(this.coordLeft)?i.coordorigin=goog.graphics.VmlGraphics.toSizeCoord(this.coordLeft)+" "+goog.graphics.VmlGraphics.toSizeCoord(this.coordTop):i.coordorigin="0 0",o.appendChild(i),this.canvasElement=new goog.graphics.VmlGroupElement(i,this),goog.events.listen(o,goog.events.EventType.RESIZE,goog.bind(this.handleContainerResize_,this))},goog.graphics.VmlGraphics.prototype.handleContainerResize_=function(){var t=goog.style.getSize(this.getElement()),e=this.canvasElement.getElement().style;if(t.width)e.width=t.width+"px",e.height=t.height+"px";else{for(t=this.getElement();t&&t.currentStyle&&"none"!=t.currentStyle.display;)t=t.parentNode;t&&t.currentStyle&&this.handler_.listen(t,"propertychange",this.handleContainerResize_)}this.dispatchEvent(goog.events.EventType.RESIZE)},goog.graphics.VmlGraphics.prototype.handlePropertyChange_=function(t){var e=t.getBrowserEvent().propertyName;"display"!=e&&"className"!=e||(this.handler_.unlisten(t.target,"propertychange",this.handlePropertyChange_),this.handleContainerResize_())},goog.graphics.VmlGraphics.prototype.setCoordOrigin=function(t,e){this.coordLeft=t,this.coordTop=e,this.canvasElement.getElement().coordorigin=goog.graphics.VmlGraphics.toSizeCoord(this.coordLeft)+" "+goog.graphics.VmlGraphics.toSizeCoord(this.coordTop)},goog.graphics.VmlGraphics.prototype.setCoordSize=function(t,e){goog.graphics.VmlGraphics.superClass_.setCoordSize.apply(this,arguments),this.canvasElement.getElement().coordsize=goog.graphics.VmlGraphics.toSizeCoord(t)+" "+goog.graphics.VmlGraphics.toSizeCoord(e)},goog.graphics.VmlGraphics.prototype.setSize=function(t,e){goog.style.setSize(this.getElement(),t,e)},goog.graphics.VmlGraphics.prototype.getPixelSize=function(){var t=this.getElement();return new goog.math.Size(t.style.pixelWidth||t.offsetWidth||1,t.style.pixelHeight||t.offsetHeight||1)},goog.graphics.VmlGraphics.prototype.clear=function(){this.canvasElement.clear()},goog.graphics.VmlGraphics.prototype.drawEllipse=function(t,e,o,i,n,r,g){var s=this.createVmlElement("oval");return goog.graphics.VmlGraphics.setPositionAndSize(s,t-o,e-i,2*o,2*i),t=new goog.graphics.VmlEllipseElement(s,this,t,e,o,i,n,r),this.append_(t,g),t},goog.graphics.VmlGraphics.prototype.drawRect=function(t,e,o,i,n,r,g){var s=this.createVmlElement("rect");return goog.graphics.VmlGraphics.setPositionAndSize(s,t,e,o,i),t=new goog.graphics.VmlRectElement(s,this,n,r),this.append_(t,g),t},goog.graphics.VmlGraphics.prototype.drawImage=function(t,e,o,i,n,r){var g=this.createVmlElement("image");return goog.graphics.VmlGraphics.setPositionAndSize(g,t,e,o,i),goog.graphics.VmlGraphics.setAttribute(g,"src",n),t=new goog.graphics.VmlImageElement(g,this),this.append_(t,r),t},goog.graphics.VmlGraphics.prototype.drawTextOnLine=function(t,e,o,i,n,r,g,s,a,l){var h=this.createFullSizeElement_("shape"),u=this.createVmlElement("path");return e="M"+goog.graphics.VmlGraphics.toPosCoord(e)+","+goog.graphics.VmlGraphics.toPosCoord(o)+"L"+goog.graphics.VmlGraphics.toPosCoord(i)+","+goog.graphics.VmlGraphics.toPosCoord(n)+"E",goog.graphics.VmlGraphics.setAttribute(u,"v",e),goog.graphics.VmlGraphics.setAttribute(u,"textpathok","true"),(e=this.createVmlElement("textpath")).setAttribute("on","true"),o=e.style,o.fontSize=g.size*this.getPixelScaleX(),o.fontFamily=g.family,null!=r&&(o["v-text-align"]=r),g.bold&&(o.fontWeight="bold"),g.italic&&(o.fontStyle="italic"),goog.graphics.VmlGraphics.setAttribute(e,"string",t),h.appendChild(u),h.appendChild(e),t=new goog.graphics.VmlTextElement(h,this,s,a),this.append_(t,l),t},goog.graphics.VmlGraphics.prototype.drawPath=function(t,e,o,i){var n=this.createFullSizeElement_("shape");return goog.graphics.VmlGraphics.setAttribute(n,"path",goog.graphics.VmlGraphics.getVmlPath(t)),t=new goog.graphics.VmlPathElement(n,this,e,o),this.append_(t,i),t},goog.graphics.VmlGraphics.getVmlPath=function(t){var e=[];return t.forEachSegment(function(t,o){switch(t){case goog.graphics.Path.Segment.MOVETO:e.push("m"),Array.prototype.push.apply(e,goog.array.map(o,goog.graphics.VmlGraphics.toSizeCoord));break;case goog.graphics.Path.Segment.LINETO:e.push("l"),Array.prototype.push.apply(e,goog.array.map(o,goog.graphics.VmlGraphics.toSizeCoord));break;case goog.graphics.Path.Segment.CURVETO:e.push("c"),Array.prototype.push.apply(e,goog.array.map(o,goog.graphics.VmlGraphics.toSizeCoord));break;case goog.graphics.Path.Segment.CLOSE:e.push("x");break;case goog.graphics.Path.Segment.ARCTO:var i=o[2]+o[3],n=goog.graphics.VmlGraphics.toSizeCoord(o[4]-goog.math.angleDx(i,o[0])),r=(i=goog.graphics.VmlGraphics.toSizeCoord(o[5]-goog.math.angleDy(i,o[1])),goog.graphics.VmlGraphics.toSizeCoord(o[0])),g=goog.graphics.VmlGraphics.toSizeCoord(o[1]),s=Math.round(-65536*o[2]),a=Math.round(-65536*o[3]);e.push("ae",n,i,r,g,s,a)}}),e.join(" ")},goog.graphics.VmlGraphics.prototype.createGroup=function(t){var e=this.createFullSizeElement_("group");return(t||this.canvasElement).getElement().appendChild(e),new goog.graphics.VmlGroupElement(e,this)},goog.graphics.VmlGraphics.prototype.getTextWidth=function(){return 0},goog.graphics.VmlGraphics.prototype.enterDocument=function(){goog.graphics.VmlGraphics.superClass_.enterDocument.call(this),this.handleContainerResize_(),this.updateGraphics_()},goog.graphics.VmlGraphics.prototype.disposeInternal=function(){this.canvasElement=null,goog.graphics.VmlGraphics.superClass_.disposeInternal.call(this)},goog.graphics.CanvasGroupElement=function(t){goog.graphics.GroupElement.call(this,null,t),this.children_=[]},goog.inherits(goog.graphics.CanvasGroupElement,goog.graphics.GroupElement),goog.graphics.CanvasGroupElement.prototype.clear=function(){this.children_.length&&(this.children_.length=0,this.getGraphics().redraw())},goog.graphics.CanvasGroupElement.prototype.setSize=function(){},goog.graphics.CanvasGroupElement.prototype.appendChild=function(t){this.children_.push(t)},goog.graphics.CanvasGroupElement.prototype.draw=function(t){t=0;for(var e=this.children_.length;t<e;t++)this.getGraphics().drawElement(this.children_[t])},goog.graphics.CanvasEllipseElement=function(t,e,o,i,n,r,g,s){goog.graphics.EllipseElement.call(this,t,e,g,s),this.cx_=o,this.cy_=i,this.rx_=n,this.ry_=r,this.path_=new goog.graphics.Path,this.setUpPath_(),this.pathElement_=new goog.graphics.CanvasPathElement(null,e,this.path_,g,s)},goog.inherits(goog.graphics.CanvasEllipseElement,goog.graphics.EllipseElement),goog.graphics.CanvasEllipseElement.prototype.setUpPath_=function(){this.path_.clear(),this.path_.moveTo(this.cx_+goog.math.angleDx(0,this.rx_),this.cy_+goog.math.angleDy(0,this.ry_)),this.path_.arcTo(this.rx_,this.ry_,0,360),this.path_.close()},goog.graphics.CanvasEllipseElement.prototype.setCenter=function(t,e){this.cx_=t,this.cy_=e,this.setUpPath_(),this.pathElement_.setPath(this.path_)},goog.graphics.CanvasEllipseElement.prototype.setRadius=function(t,e){this.rx_=t,this.ry_=e,this.setUpPath_(),this.pathElement_.setPath(this.path_)},goog.graphics.CanvasEllipseElement.prototype.draw=function(t){this.pathElement_.draw(t)},goog.graphics.CanvasRectElement=function(t,e,o,i,n,r,g,s){goog.graphics.RectElement.call(this,t,e,g,s),this.x_=o,this.y_=i,this.w_=n,this.h_=r},goog.inherits(goog.graphics.CanvasRectElement,goog.graphics.RectElement),goog.graphics.CanvasRectElement.prototype.setPosition=function(t,e){this.x_=t,this.y_=e,this.drawn_&&this.getGraphics().redraw()},goog.graphics.CanvasRectElement.prototype.drawn_=!1,goog.graphics.CanvasRectElement.prototype.setSize=function(t,e){this.w_=t,this.h_=e,this.drawn_&&this.getGraphics().redraw()},goog.graphics.CanvasRectElement.prototype.draw=function(t){this.drawn_=!0,t.beginPath(),t.moveTo(this.x_,this.y_),t.lineTo(this.x_,this.y_+this.h_),t.lineTo(this.x_+this.w_,this.y_+this.h_),t.lineTo(this.x_+this.w_,this.y_),t.closePath()},goog.graphics.CanvasPathElement=function(t,e,o,i,n){goog.graphics.PathElement.call(this,t,e,i,n),this.setPath(o)},goog.inherits(goog.graphics.CanvasPathElement,goog.graphics.PathElement),goog.graphics.CanvasPathElement.prototype.drawn_=!1,goog.graphics.CanvasPathElement.prototype.setPath=function(t){this.path_=t.isSimple()?t:goog.graphics.Path.createSimplifiedPath(t),this.drawn_&&this.getGraphics().redraw()},goog.graphics.CanvasPathElement.prototype.draw=function(t){this.drawn_=!0,t.beginPath(),this.path_.forEachSegment(function(e,o){switch(e){case goog.graphics.Path.Segment.MOVETO:t.moveTo(o[0],o[1]);break;case goog.graphics.Path.Segment.LINETO:for(var i=0;i<o.length;i+=2)t.lineTo(o[i],o[i+1]);break;case goog.graphics.Path.Segment.CURVETO:for(i=0;i<o.length;i+=6)t.bezierCurveTo(o[i],o[i+1],o[i+2],o[i+3],o[i+4],o[i+5]);break;case goog.graphics.Path.Segment.ARCTO:throw Error("Canvas paths cannot contain arcs");case goog.graphics.Path.Segment.CLOSE:t.closePath()}})},goog.graphics.CanvasTextElement=function(t,e,o,i,n,r,g,s,a,l){var h=goog.dom.createDom(goog.dom.TagName.DIV,{style:"display:table;position:absolute;padding:0;margin:0;border:0"});goog.graphics.TextElement.call(this,h,t,a,l),this.text_=e,this.x1_=o,this.y1_=i,this.x2_=n,this.y2_=r,this.align_=g||"left",this.font_=s,this.innerElement_=goog.dom.createDom("DIV",{style:"display:table-cell;padding: 0;margin: 0;border: 0"}),this.updateStyle_(),this.updateText_(),t.getElement().appendChild(h),h.appendChild(this.innerElement_)},goog.inherits(goog.graphics.CanvasTextElement,goog.graphics.TextElement),goog.graphics.CanvasTextElement.prototype.setText=function(t){this.text_=t,this.updateText_()},goog.graphics.CanvasTextElement.prototype.setFill=function(t){this.fill=t;var e=this.getElement();e&&(e.style.color=t.getColor()||t.getColor1())},goog.graphics.CanvasTextElement.prototype.setStroke=function(){},goog.graphics.CanvasTextElement.prototype.draw=function(){},goog.graphics.CanvasTextElement.prototype.updateStyle_=function(){var t=this.x1_,e=this.x2_,o=this.y1_,i=this.y2_,n=this.align_,r=this.font_,g=this.getElement().style,s=this.getGraphics().getPixelScaleX(),a=this.getGraphics().getPixelScaleY();t==e?(g.lineHeight="90%",this.innerElement_.style.verticalAlign="center"==n?"middle":"left"==n?o<i?"top":"bottom":o<i?"bottom":"top",g.textAlign="center",e=r.size*s,g.top=Math.round(Math.min(o,i)*a)+"px",g.left=Math.round((t-e/2)*s)+"px",g.width=Math.round(e)+"px",g.height=Math.abs(o-i)*a+"px",g.fontSize=.6*r.size*a+"pt"):(g.lineHeight="100%",this.innerElement_.style.verticalAlign="top",g.textAlign=n,g.top=Math.round(((o+i)/2-2*r.size/3)*a)+"px",g.left=Math.round(t*s)+"px",g.width=Math.round(Math.abs(e-t)*s)+"px",g.height="auto",g.fontSize=r.size*a+"pt"),g.fontWeight=r.bold?"bold":"normal",g.fontStyle=r.italic?"italic":"normal",g.fontFamily=r.family,t=this.getFill(),g.color=t.getColor()||t.getColor1()},goog.graphics.CanvasTextElement.prototype.updateText_=function(){this.innerElement_.innerHTML=this.x1_==this.x2_?goog.array.map(this.text_.split(""),function(t){return goog.string.htmlEscape(t)}).join("<br>"):goog.string.htmlEscape(this.text_)},goog.graphics.CanvasImageElement=function(t,e,o,i,n,r,g){goog.graphics.ImageElement.call(this,t,e),this.x_=o,this.y_=i,this.w_=n,this.h_=r,this.src_=g},goog.inherits(goog.graphics.CanvasImageElement,goog.graphics.ImageElement),goog.graphics.CanvasImageElement.prototype.drawn_=!1,goog.graphics.CanvasImageElement.prototype.setPosition=function(t,e){this.x_=t,this.y_=e,this.drawn_&&this.getGraphics().redraw()},goog.graphics.CanvasImageElement.prototype.setSize=function(t,e){this.w_=t,this.h_=e,this.drawn_&&this.getGraphics().redraw()},goog.graphics.CanvasImageElement.prototype.setSource=function(t){this.src_=t,this.drawn_&&this.getGraphics().redraw()},goog.graphics.CanvasImageElement.prototype.draw=function(t){this.img_?(this.w_&&this.h_&&t.drawImage(this.img_,this.x_,this.y_,this.w_,this.h_),this.drawn_=!0):(t=new Image,t.onload=goog.bind(this.handleImageLoad_,this,t),t.src=this.src_)},goog.graphics.CanvasImageElement.prototype.handleImageLoad_=function(t){this.img_=t,this.getGraphics().redraw()},goog.graphics.CanvasGraphics=function(t,e,o,i,n){goog.graphics.AbstractGraphics.call(this,t,e,o,i,n)},goog.inherits(goog.graphics.CanvasGraphics,goog.graphics.AbstractGraphics),goog.graphics.CanvasGraphics.prototype.setElementFill=function(){this.redraw()},goog.graphics.CanvasGraphics.prototype.setElementStroke=function(){this.redraw()},goog.graphics.CanvasGraphics.prototype.setElementTransform=function(){this.redraw()},goog.graphics.CanvasGraphics.prototype.pushElementTransform=function(t){var e=this.getContext();e.save();var o=(t=t.getTransform()).getTranslateX(),i=t.getTranslateY();(o||i)&&e.translate(o,i),(t=t.getShearY())&&e.rotate(Math.asin(t))},goog.graphics.CanvasGraphics.prototype.popElementTransform=function(){this.getContext().restore()},goog.graphics.CanvasGraphics.prototype.createDom=function(){var t=this.dom_.createDom("div",{style:"position:relative;overflow:hidden"});this.setElementInternal(t),this.canvas_=this.dom_.createDom("canvas"),t.appendChild(this.canvas_),this.lastGroup_=this.canvasElement=new goog.graphics.CanvasGroupElement(this),this.redrawTimeout_=0,this.updateSize()},goog.graphics.CanvasGraphics.prototype.clearContext_=function(){this.context_=null},goog.graphics.CanvasGraphics.prototype.getContext=function(){return this.getElement()||this.createDom(),this.context_||(this.context_=this.canvas_.getContext("2d"),this.context_.save()),this.context_},goog.graphics.CanvasGraphics.prototype.setCoordOrigin=function(t,e){this.coordLeft=t,this.coordTop=e,this.redraw()},goog.graphics.CanvasGraphics.prototype.setCoordSize=function(){goog.graphics.CanvasGraphics.superClass_.setCoordSize.apply(this,arguments),this.redraw()},goog.graphics.CanvasGraphics.prototype.setSize=function(t,e){this.width=t,this.height=e,this.updateSize(),this.redraw()},goog.graphics.CanvasGraphics.prototype.getPixelSize=function(){var t=this.width,e=this.height,o=goog.isString(t)&&-1!=t.indexOf("%"),i=goog.isString(e)&&-1!=e.indexOf("%");if(!this.isInDocument()&&(o||i))return null;var n,r;return o&&(n=this.getElement().parentNode,r=goog.style.getSize(n),t=parseFloat(t)*r.width/100),i&&(n=n||this.getElement().parentNode,r=r||goog.style.getSize(n),e=parseFloat(e)*r.height/100),new goog.math.Size(t,e)},goog.graphics.CanvasGraphics.prototype.updateSize=function(){goog.style.setSize(this.getElement(),this.width,this.height);var t=this.getPixelSize();t&&(goog.style.setSize(this.canvas_,t.width,t.height),this.canvas_.width=t.width,this.canvas_.height=t.height,this.clearContext_())},goog.graphics.CanvasGraphics.prototype.reset=function(){var t=this.getContext();t.restore();var e=this.getPixelSize();e.width&&e.height&&t.clearRect(0,0,e.width,e.height),t.save()},goog.graphics.CanvasGraphics.prototype.clear=function(){this.reset(),this.canvasElement.clear();for(var t=this.getElement();1<t.childNodes.length;)t.removeChild(t.lastChild)},goog.graphics.CanvasGraphics.prototype.redraw=function(){if(this.preventRedraw_)this.needsRedraw_=!0;else if(this.isInDocument()){if(this.reset(),this.coordWidth){var t=this.getPixelSize();this.getContext().scale(t.width/this.coordWidth,t.height/this.coordHeight)}(this.coordLeft||this.coordTop)&&this.getContext().translate(-this.coordLeft,-this.coordTop),this.pushElementTransform(this.canvasElement),this.canvasElement.draw(this.context_),this.popElementTransform()}},goog.graphics.CanvasGraphics.prototype.drawElement=function(t){if(!(t instanceof goog.graphics.CanvasTextElement)){var e=this.getContext();if(this.pushElementTransform(t),t.getFill&&t.getStroke){var o=t.getFill();if(o)if(o instanceof goog.graphics.SolidFill)0!=o.getOpacity()&&(e.globalAlpha=o.getOpacity(),e.fillStyle=o.getColor(),t.draw(e),e.fill(),e.globalAlpha=1);else{var i=e.createLinearGradient(o.getX1(),o.getY1(),o.getX2(),o.getY2());i.addColorStop(0,o.getColor1()),i.addColorStop(1,o.getColor2()),e.fillStyle=i,t.draw(e),e.fill()}(o=t.getStroke())&&(t.draw(e),e.strokeStyle=o.getColor(),t=o.getWidth(),goog.isString(t)&&-1!=t.indexOf("px")&&(t=parseFloat(t)/this.getPixelScaleX()),e.lineWidth=t,e.stroke())}else t.draw(e);this.popElementTransform()}},goog.graphics.CanvasGraphics.prototype.append_=function(t,e){this.append(t,e)},goog.graphics.CanvasGraphics.prototype.append=function(t,e){(e=e||this.canvasElement).appendChild(t),this.isDrawable(e)&&this.drawElement(t)},goog.graphics.CanvasGraphics.prototype.drawEllipse=function(t,e,o,i,n,r,g){return t=new goog.graphics.CanvasEllipseElement(null,this,t,e,o,i,n,r),this.append(t,g),t},goog.graphics.CanvasGraphics.prototype.drawRect=function(t,e,o,i,n,r,g){return t=new goog.graphics.CanvasRectElement(null,this,t,e,o,i,n,r),this.append(t,g),t},goog.graphics.CanvasGraphics.prototype.drawImage=function(t,e,o,i,n,r){return t=new goog.graphics.CanvasImageElement(null,this,t,e,o,i,n),this.append(t,r),t},goog.graphics.CanvasGraphics.prototype.drawTextOnLine=function(t,e,o,i,n,r,g,s,a,l){return t=new goog.graphics.CanvasTextElement(this,t,e,o,i,n,r,g,s,a),this.append(t,l),t},goog.graphics.CanvasGraphics.prototype.drawPath=function(t,e,o,i){return t=new goog.graphics.CanvasPathElement(null,this,t,e,o),this.append(t,i),t},goog.graphics.CanvasGraphics.prototype.isDrawable=function(t){return this.isInDocument()&&!this.redrawTimeout_&&!this.isRedrawRequired(t)},goog.graphics.CanvasGraphics.prototype.isRedrawRequired=function(t){return t!=this.canvasElement&&t!=this.lastGroup_},goog.graphics.CanvasGraphics.prototype.createGroup=function(t){var e=new goog.graphics.CanvasGroupElement(this);return(t=t||this.canvasElement)!=this.canvasElement&&t!=this.lastGroup_||(this.lastGroup_=e),this.append(e,t),e},goog.graphics.CanvasGraphics.prototype.disposeInternal=function(){this.context_=null,goog.graphics.CanvasGraphics.superClass_.disposeInternal.call(this)},goog.graphics.CanvasGraphics.prototype.enterDocument=function(){var t=this.getPixelSize();goog.graphics.CanvasGraphics.superClass_.enterDocument.call(this),t||(this.updateSize(),this.dispatchEvent(goog.events.EventType.RESIZE)),this.redraw()},goog.graphics.CanvasGraphics.prototype.suspend=function(){this.preventRedraw_=!0},goog.graphics.CanvasGraphics.prototype.resume=function(){this.preventRedraw_=!1,this.needsRedraw_&&(this.redraw(),this.needsRedraw_=!1)},goog.graphics.createGraphics=function(t,e,o,i,n){return(t=goog.userAgent.IE&&!goog.userAgent.isVersion("9")?new goog.graphics.VmlGraphics(t,e,o,i,n):!goog.userAgent.WEBKIT||goog.userAgent.isVersion("420")&&!goog.userAgent.MOBILE?new goog.graphics.SvgGraphics(t,e,o,i,n):new goog.graphics.CanvasGraphics(t,e,o,i,n)).createDom(),t},goog.graphics.createSimpleGraphics=function(t,e,o,i,n){return goog.userAgent.MAC&&goog.userAgent.GECKO&&!goog.userAgent.isVersion("1.9a")?((t=new goog.graphics.CanvasGraphics(t,e,o,i,n)).createDom(),t):goog.graphics.createGraphics(t,e,o,i,n)},goog.graphics.isBrowserSupported=function(){return goog.userAgent.IE?goog.userAgent.isVersion("5.5"):goog.userAgent.GECKO?goog.userAgent.isVersion("1.8"):goog.userAgent.OPERA?goog.userAgent.isVersion("9.0"):!!goog.userAgent.WEBKIT&&goog.userAgent.isVersion("412")},goog.ui.TextareaRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.TextareaRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.TextareaRenderer),goog.ui.TextareaRenderer.CSS_CLASS="goog-textarea",goog.ui.TextareaRenderer.prototype.getAriaRole=function(){},goog.ui.TextareaRenderer.prototype.decorate=function(t,e){return this.setUpTextarea_(t),goog.ui.TextareaRenderer.superClass_.decorate.call(this,t,e),t.setContent(e.value),e},goog.ui.TextareaRenderer.prototype.createDom=function(t){return this.setUpTextarea_(t),t.getDomHelper().createDom("textarea",{"class":this.getClassNames(t).join(" "),disabled:!t.isEnabled()},t.getContent()||"")},goog.ui.TextareaRenderer.prototype.canDecorate=function(t){return t.tagName==goog.dom.TagName.TEXTAREA},goog.ui.TextareaRenderer.prototype.setRightToLeft=goog.nullFunction,goog.ui.TextareaRenderer.prototype.isFocusable=function(t){return t.isEnabled()},goog.ui.TextareaRenderer.prototype.setFocusable=goog.nullFunction,goog.ui.TextareaRenderer.prototype.setState=function(t,e,o){goog.ui.TextareaRenderer.superClass_.setState.call(this,t,e,o),(t=t.getElement())&&e==goog.ui.Component.State.DISABLED&&(t.disabled=o)},goog.ui.TextareaRenderer.prototype.updateAriaState=goog.nullFunction,goog.ui.TextareaRenderer.prototype.setUpTextarea_=function(t){t.setHandleMouseEvents(!1),t.setAutoStates(goog.ui.Component.State.ALL,!1),t.setSupportedState(goog.ui.Component.State.FOCUSED,!1)},goog.ui.TextareaRenderer.prototype.setContent=function(t,e){t&&(t.value=e)},goog.ui.TextareaRenderer.prototype.getCssClass=function(){return goog.ui.TextareaRenderer.CSS_CLASS},goog.ui.Textarea=function(t,e,o){goog.ui.Control.call(this,t,e||goog.ui.TextareaRenderer.getInstance(),o),this.setHandleMouseEvents(!1),this.setAllowTextSelection(!0),t||this.setContentInternal("")},goog.inherits(goog.ui.Textarea,goog.ui.Control),goog.ui.Textarea.NEEDS_HELP_SHRINKING_=goog.userAgent.GECKO||goog.userAgent.WEBKIT,goog.ui.Textarea.prototype.isResizing_=!1,goog.ui.Textarea.prototype.height_=0,goog.ui.Textarea.prototype.maxHeight_=0,goog.ui.Textarea.prototype.minHeight_=0,goog.ui.Textarea.prototype.hasDiscoveredTextareaCharacteristics_=!1,goog.ui.Textarea.prototype.needsPaddingBorderFix_=!1,goog.ui.Textarea.prototype.scrollHeightIncludesPadding_=!1,goog.ui.Textarea.prototype.scrollHeightIncludesBorder_=!1,goog.ui.Textarea.EventType={RESIZE:"resize"},goog.ui.Textarea.prototype.getPaddingBorderBoxHeight_=function(){return this.paddingBox_.top+this.paddingBox_.bottom+this.borderBox_.top+this.borderBox_.bottom},goog.ui.Textarea.prototype.getMinHeight=function(){return this.minHeight_},goog.ui.Textarea.prototype.getMinHeight_=function(){var t=this.minHeight_,e=this.getElement();return t&&e&&this.needsPaddingBorderFix_&&(t-=this.getPaddingBorderBoxHeight_()),t},goog.ui.Textarea.prototype.setMinHeight=function(t){this.minHeight_=t,this.resize()},goog.ui.Textarea.prototype.getMaxHeight=function(){return this.maxHeight_},goog.ui.Textarea.prototype.getMaxHeight_=function(){var t=this.maxHeight_,e=this.getElement();return t&&e&&this.needsPaddingBorderFix_&&(t-=this.getPaddingBorderBoxHeight_()),t},goog.ui.Textarea.prototype.setMaxHeight=function(t){this.maxHeight_=t,this.resize()},goog.ui.Textarea.prototype.setValue=function(t){this.setContent(String(t))},goog.ui.Textarea.prototype.getValue=function(){return this.getElement().value},goog.ui.Textarea.prototype.setContent=function(t){goog.ui.Textarea.superClass_.setContent.call(this,t),this.resize()},goog.ui.Textarea.prototype.setEnabled=function(t){goog.ui.Textarea.superClass_.setEnabled.call(this,t),this.getElement().disabled=!t},goog.ui.Textarea.prototype.resize=function(){this.getElement()&&this.grow_()},goog.ui.Textarea.prototype.enterDocument=function(){goog.ui.Textarea.superClass_.enterDocument.call(this);var t=this.getElement();goog.style.setStyle(t,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}),this.paddingBox_=goog.style.getPaddingBox(t),this.borderBox_=goog.style.getBorderBox(t),this.getHandler().listen(t,goog.events.EventType.SCROLL,this.grow_).listen(t,goog.events.EventType.FOCUS,this.grow_).listen(t,goog.events.EventType.KEYUP,this.grow_).listen(t,goog.events.EventType.MOUSEUP,this.mouseUpListener_),this.resize()},goog.ui.Textarea.prototype.getHeight_=function(){this.discoverTextareaCharacteristics_();var t=this.getElement(),e=this.getElement().scrollHeight+this.getHorizontalScrollBarHeight_();if(this.needsPaddingBorderFix_)e-=this.getPaddingBorderBoxHeight_();else{if(!this.scrollHeightIncludesPadding_){var o=this.paddingBox_;e=e+(o.top+o.bottom)}this.scrollHeightIncludesBorder_||(t=goog.style.getBorderBox(t),e+=t.top+t.bottom)}return e},goog.ui.Textarea.prototype.setHeight_=function(t){this.height_!=t&&(this.height_=t,this.getElement().style.height=t+"px")},goog.ui.Textarea.prototype.setHeightToEstimate_=function(){var t=this.getElement();t.style.height="auto";var e=t.value.match(/\n/g)||[];t.rows=e.length+1},goog.ui.Textarea.prototype.getHorizontalScrollBarHeight_=function(){var t=this.getElement(),e=t.offsetHeight-t.clientHeight;if(!this.scrollHeightIncludesPadding_){var o=this.paddingBox_;e=e-(o.top+o.bottom)}return this.scrollHeightIncludesBorder_||(t=goog.style.getBorderBox(t),e-=t.top+t.bottom),0<e?e:0},goog.ui.Textarea.prototype.discoverTextareaCharacteristics_=function(){if(!this.hasDiscoveredTextareaCharacteristics_){var t=this.getElement().cloneNode(!1);goog.style.setStyle(t,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"}),goog.dom.appendChild(this.getDomHelper().getDocument().body,t);var e=t.scrollHeight;t.style.padding="10px";var o=t.scrollHeight;this.scrollHeightIncludesPadding_=o>e,t.style.borderWidth="10px",this.scrollHeightIncludesBorder_=t.scrollHeight>o,t.style.height="100px",100!=t.offsetHeight&&(this.needsPaddingBorderFix_=!0),goog.dom.removeNode(t),this.hasDiscoveredTextareaCharacteristics_=!0}},goog.ui.Textarea.prototype.grow_=function(t){if(!this.isResizing_){t=!1,this.isResizing_=!0;var e=this.getElement(),o=this.height_;if(e.scrollHeight){var i=!1,n=!1,r=this.getHeight_(),g=e.offsetHeight,s=this.getMinHeight_(),a=this.getMaxHeight_();s&&r<s?(this.setHeight_(s),i=!0):a&&r>a?(this.setHeight_(a),e.style.overflowY="",n=!0):g!=r?this.setHeight_(r):this.height_||(this.height_=r),!i&&!n&&goog.ui.Textarea.NEEDS_HELP_SHRINKING_&&(t=!0)}else this.setHeightToEstimate_();this.isResizing_=!1,t&&this.shrink_(),o!=this.height_&&this.dispatchEvent(goog.ui.Textarea.EventType.RESIZE)}},goog.ui.Textarea.prototype.shrink_=function(){var t=this.getElement();if(!this.isResizing_){this.isResizing_=!0;var e=t.scrollHeight;if(e){var o=this.getHeight_(),i=this.getMinHeight_(),n=this.getMaxHeight_();!(i&&o<=i)&&!(n&&o>=n)&&(n=this.paddingBox_,t.style.paddingBottom=n.bottom+1+"px",this.getHeight_()==o&&(t.style.paddingBottom=n.bottom+e+"px",t.scrollTop=0,(e=this.getHeight_()-e)>=i?this.setHeight_(e):this.setHeight_(i)),t.style.paddingBottom=n.bottom+"px")}else this.setHeightToEstimate_();this.isResizing_=!1}},goog.ui.Textarea.prototype.mouseUpListener_=function(t){var e=this.getElement();t=e.offsetHeight,e.filters&&e.filters.length&&(e=e.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(t-=e.offX),t!=this.height_&&(this.height_=this.minHeight_=t)},bay.whiteboard.Create=function(){return new bay.whiteboard.Whiteboard},bay.whiteboard.Whiteboard=function(){this.properties=goog.object.clone(bay.whiteboard.Whiteboard.properties),goog.userAgent.MOBILE&&(this.properties.hover.dist*=5),this.initCollections(),this.area={},this.elements={},this.tool={},this.tool.groups=[];for(var t=0;t<bay.whiteboard.Whiteboard.toolGroups.length;t++){var e={id:bay.whiteboard.Whiteboard.toolGroups[t].id,order:bay.whiteboard.Whiteboard.toolGroups[t].order,desc:bay.whiteboard.Whiteboard.toolGroups[t].desc,hidden:!1};e.toggleOn=function(t){return function(e){e.showToolBox(t)}}(e),e.toggleOff=function(t){return function(e){e.hideToolBox(t)}}(e),this.tool.groups.push(e)}for(this.tool.tools=[],t=0;t<bay.whiteboard.Whiteboard.tools.length;t++)toolProto=bay.whiteboard.Whiteboard.tools[t],tool={id:toolProto.id,order:toolProto.order,desc:toolProto.desc,hidden:!1},tool.action=toolProto.action,tool.toggleOn=toolProto.toggleOn,tool.toggleOff=toolProto.toggleOff,tool.onClick=toolProto.onClick,tool.onMove=toolProto.onMove,tool.group=toolProto.group,this.tool.tools.push(tool)},bay.whiteboard.Whiteboard.prototype.setToolProperties=function(t,e,o,i){for(var n=0;n<this.tool.groups.length;n++)this.tool.groups[n].id==t&&(this.tool.groups[n].hidden=!e,this.tool.groups[n].order=o);for(n=0;n<this.tool.tools.length;n++)this.tool.tools[n].id==t&&(this.tool.tools[n].hidden=!e,this.tool.tools[n].order=o,this.tool.tools[n].group=i)},bay.whiteboard.Whiteboard.prototype.getMainCollection=function(){return this.collections.main},bay.whiteboard.Whiteboard.prototype.getDrawArea=function(){return whiteboard.elements.drawElement},bay.whiteboard.Whiteboard.toolGroups=[],bay.whiteboard.Whiteboard.tools=[],bay.whiteboard.Whiteboard.addGroup=function(t,e,o){for(var i=0;i<bay.whiteboard.Whiteboard.toolGroups.length;i++)if(bay.whiteboard.Whiteboard.toolGroups[i].id==t)return bay.whiteboard.Whiteboard.toolGroups[i];return t={id:t,order:e,desc:o},bay.whiteboard.Whiteboard.toolGroups.push(t),t},bay.whiteboard.Whiteboard.addTool=function(t,e,o,i,n){e&&bay.whiteboard.Whiteboard.addGroup(e);for(var r=0;r<bay.whiteboard.Whiteboard.tools.length;r++)if(bay.whiteboard.Whiteboard.tools[r].id==t)return bay.whiteboard.Whiteboard.tools[r];return t={id:t,order:i,desc:n,group:e,action:o.action,toggleOn:o.toggleOn,toggleOff:o.toggleOff,onClick:o.onClick,onMove:o.onMove},bay.whiteboard.Whiteboard.tools.push(t),t},bay.whiteboard.Whiteboard.removeTool=function(t){for(var e=0;e<bay.whiteboard.Whiteboard.tools.length;e++)bay.whiteboard.Whiteboard.tools[e].id==t&&bay.whiteboard.Whiteboard.tools.splice(e,1)},bay.whiteboard.Whiteboard.properties={events:{onclick:!0,onwheel:!0,ondrag:!0,hover:!0,onrightclick:!0},point:{size:2,color:"black",width:1,font:"Times",fontsize:14},hover:{width:4,color:"blue",dist:10},current:{width:1,color:"red"},axes:{width:.5,color:"skyblue",font:"Times",fontsize:11},ws:{bufferSize:1e4,bufferTimeout:100}},bay.whiteboard.Whiteboard.prototype.render=function(t){this.container="string"==typeof t?goog.dom.getElement(t):t,this.elements.toolbarElement=goog.dom.createDom("td","bwb_toolbar"," "),this.elements.drawElement=goog.dom.createDom("td","bwb_drawarea"," "),layout=goog.dom.createDom("table","bwb_layout",goog.dom.createDom("tr","bwb_layout",this.elements.toolbarElement,this.elements.drawElement)),goog.dom.appendChild(this.container,layout),this.addButtons(),this.getGraphics(),this.addMouseMoveListener(),this.addWheelListener(),this.addClickListener(),this.addDragListener(),this.addRightClickListener(),this.addKeyboardListener()},bay.whiteboard.Whiteboard.prototype.redrawAll=function(){var t=this;if(drawCollection=function(e){e=e.getElements();for(var o=0;o<e.length;o++)e[o]&&e[o].draw&&!e[o].hidden&&e[o].draw(t)},this.graphics.clear(),this.area.showCoordinates&&this.drawCoordinates(),drawCollection(this.collections.tracer),drawCollection(this.collections.main),drawCollection(this.collections.current),this.dragger&&this.dragger.point&&(point=this.dragger.point,point.exists)){var e=new goog.graphics.Stroke(this.properties.axes.width,this.properties.axes.color),o=new goog.graphics.Font(this.properties.axes.fontsize,this.properties.axes.font),i=new goog.graphics.SolidFill(this.properties.axes.color),n=this.transform([point.x,point.y]);this.graphics.drawText("["+Math.round(100*point.x)/100+", "+Math.round(100*point.y)/100+"]",n[0],n[1]-this.properties.axes.fontsize,null,null,"left",null,o,e,i)}},bay.whiteboard.Whiteboard.prototype.getViewport=function(){return{left:this.area.minX,right:this.area.maxX,top:this.area.maxY,bottom:this.area.minY}},bay.whiteboard.Whiteboard.prototype.setBoundaries=function(t,e,o,i){this.area.left=t,null!=this.area.left&&this.area.left>this.area.minX&&(this.area.left=this.area.minX),this.area.right=e,null!=this.area.right&&this.area.right<this.area.maxX&&(this.area.right=this.area.maxX),this.area.top=o,null!=this.area.top&&this.area.top<this.area.maxY&&(this.area.top=this.area.maxY),this.area.bottom=i,null!=this.area.bottom&&this.area.bottom>this.area.minY&&(this.area.bottom=this.area.minY)},bay.whiteboard.Whiteboard.prototype.scale=function(t,e){var o=this.reverseTransform(t),i=this.area.transformation.clone();return this.area.transformation=this.area.transformation.translate(o.x,o.y).scale(e,e).translate(-o.x,-o.y),this.onSetTransformation(i)},bay.whiteboard.Whiteboard.prototype.shift=function(t){var e=this.area.transformation.clone();return this.area.transformation=this.area.transformation.preTranslate(this.graphics.getCoordSize().width*t.x,-this.graphics.getCoordSize().height*t.y),this.onSetTransformation(e)},bay.whiteboard.Whiteboard.prototype.markHoverElements=function(t){for(var e=this.collections.main.getElements(),o=0;o<e.length;o++)e[o]&&(e[o].hover=!1);for(t=this.reverseTransform(t),
e=this.collections.main.getNeighbourList(t,this.getHoverDist()),o=0;o<e.length;o++)e[o].element.hover=!0},bay.whiteboard.Whiteboard.prototype.zoomIn=function(){this.scale(new bay.whiteboard.Vector(this.graphics.getCoordSize().width/2,this.graphics.getCoordSize().height/2),2),this.drawBackground(),this.redrawAll()},bay.whiteboard.Whiteboard.prototype.zoomOut=function(){this.scale(new bay.whiteboard.Vector(this.graphics.getCoordSize().width/2,this.graphics.getCoordSize().height/2),.5),this.drawBackground(),this.redrawAll()},bay.whiteboard.Whiteboard.prototype.linkWebSocket=function(t,e,o){e&&(this.properties.ws.bufferSize=e),o&&(this.properties.ws.bufferTimeout=o),this.ws_=new goog.net.WebSocket,this.wsBuffer="",this.wsTimeout=null,this.ws_.addEventListener(goog.net.WebSocket.EventType.OPENED,function(){},!1,this),this.ws_.addEventListener(goog.net.WebSocket.EventType.MESSAGE,function(t){this.acceptBackground(t.message),this.collections.main.acceptJsonStr(t.message),this.redrawAll()},!1,this),this.ws_.addEventListener(goog.net.WebSocket.EventType.CLOSED,function(){this.ws_.dispose()},!1,this),this.ws_.addEventListener(goog.net.WebSocket.EventType.ERROR,function(){this.ws_.close()},!1,this),this.ws_.open(t);var i=this,n=function(){i.ws_.isOpen()&&(i.ws_.send("["+i.wsBuffer+"]"),i.wsBuffer=""),i.wsTimeout&&(clearTimeout(i.wsTimeout),i.wsTimeout=null)};this.collections.main.onChange=function(t){i.wsBuffer&&(i.wsBuffer+=","),i.wsBuffer+=this.getJson(t,!0),i.wsBuffer.length>i.properties.ws.bufferSize?n():i.wsTimeout||(i.wsTimeout=setTimeout(n,i.properties.ws.bufferTimeout))},this.onBackground=function(){i.ws_.isOpen()&&i.ws_.send(i.backgroundJson())}},bay.whiteboard.Whiteboard.prototype.getGraphics=function(){if(!this.graphics){goog.graphics.isBrowserSupported()||alert(goog.getMsg("This browser doesn''t support graphics. Please use another web browser."));var t=goog.style.getSize(this.elements.drawElement),e=goog.graphics.createSimpleGraphics(t.width-12,t.height-12),o=this.elements.drawElement;goog.events.listen(new goog.dom.ViewportSizeMonitor,goog.events.EventType.RESIZE,function(t){t=goog.style.getSize(o),e.setSize(t.width-12,t.height-12)}),e.render(this.elements.drawElement),this.graphics=e,this.area.transformation=goog.graphics.AffineTransform.getTranslateInstance(e.getCoordSize().width/2,e.getCoordSize().height/2).scale(1,-1),this.onSetTransformation()}return this.graphics},bay.whiteboard.Whiteboard.prototype.getHoverDist=function(){return this.properties.hover.dist/this.area.transformation.getScaleX()},bay.whiteboard.Whiteboard.prototype.initCollections=function(){this.collections={},this.collections.main=new bay.whiteboard.Collection,this.collections.main.joinBoard(this),this.collections.current=new bay.whiteboard.Collection,this.collections.current.joinBoard(this),this.collections.tracer=new bay.whiteboard.Collection,this.collections.tracer.joinBoard(this)},bay.whiteboard.Whiteboard.prototype.transform=function(t){var e=[];return t instanceof bay.whiteboard.Vector?(this.area.transformation.transform([t.x,t.y],0,e,0,1),new bay.whiteboard.Vector(e[0],e[1])):(this.area.transformation.transform(t,0,e,0,t.length/2),e)},bay.whiteboard.Whiteboard.prototype.reverseTransform=function(t){var e=[];return t instanceof bay.whiteboard.Vector?(this.area.reverseTransformation.transform([t.x,t.y],0,e,0,1),new bay.whiteboard.Vector(e[0],e[1])):(this.area.reverseTransformation.transform(t,0,e,0,t.length/2),e)},bay.whiteboard.Whiteboard.prototype.onSetTransformation=function(t){this.area.reverseTransformation=this.area.transformation.createInverse();var e=this.reverseTransform([0,0,this.graphics.getCoordSize().width,this.graphics.getCoordSize().height]);return null!=this.area.left&&e[0]<this.area.left||null!=this.area.right&&e[2]>this.area.right||null!=this.area.bottom&&e[3]<this.area.bottom||null!=this.area.top&&e[1]>this.area.top?(this.area.transformation=t,this.area.reverseTransformation=this.area.transformation.createInverse(),!1):(this.area.minX=e[0],this.area.minY=e[3],this.area.maxX=e[2],this.area.maxY=e[1],!0)},bay.whiteboard.Whiteboard.prototype.showCodePanel=function(){var t=new goog.ui.Dialog;t.setTitle(goog.getMsg("JSON code for drawing")),t.setButtonSet(goog.ui.Dialog.ButtonSet.OK_CANCEL);var e=new goog.ui.Textarea(this.collections.main.jsonCode());e.setMinHeight(this.graphics.getCoordSize().height/2),e.setMaxHeight(this.graphics.getCoordSize().height),t.addChild(e,!0),goog.style.setSize(e.getElement(),this.graphics.getCoordSize().width/2,this.graphics.getCoordSize().height/2),goog.dom.classes.add(e.getElement(),"codeArea"),goog.events.listen(t,goog.ui.Dialog.EventType.SELECT,function(o){"ok"==o.key&&(this.collections.main.parseJson(e.getValue()),this.redrawAll()),t.dispose()},null,this),t.setVisible(!0)},bay.whiteboard.Whiteboard.prototype.findPoint=function(t){for(var e=0;e<t.length;e++)if(t[e].element instanceof bay.whiteboard.Point)return t[e].element;return null},bay.whiteboard.Whiteboard.prototype.pointAtEventPosition=function(t){t=this.getConvertEventPos(t);var e=this.getHoverDist(),o=this.collections.main.getNeighbourList(t,e,!0,!0),i=this.findPoint(o);if(!i){for(var n=0;n<o.length&&!(o[n].distance>=e);n++)for(var r=n+1;r<o.length;r++){var g=bay.whiteboard.getIntersection(o[n].element,o[r].element,t);if(g&&g.isExists()){var s=g.distance(t);s<=e&&(i=g,e=s)}}i&&this.collections.main.add(i)}return i||(i=0<o.length&&o[0].element.closestPoint?o[0].element.closestPoint(t):new bay.whiteboard.PointFree(t),this.collections.main.add(i)),i},bay.whiteboard.Whiteboard.prototype.getEventPos=function(t){var e=goog.style.getClientPosition(this.elements.drawElement);return new bay.whiteboard.Vector(t.clientX-e.x,t.clientY-e.y)},bay.whiteboard.Whiteboard.prototype.getConvertEventPos=function(t){return this.reverseTransform(this.getEventPos(t))},bay.whiteboard.Whiteboard.prototype.addMouseMoveListener=function(){this.properties.events.hover&&goog.events.listen(this.elements.drawElement,goog.events.EventType.MOUSEMOVE,function(t){this.markHoverElements(this.getEventPos(t)),this.tool.current&&this.tool.current.onMove&&this.tool.current.onMove(this,t),this.redrawAll()},null,this)},bay.whiteboard.Whiteboard.prototype.addWheelListener=function(){this.properties.events.onwheel&&goog.events.listen(new goog.events.MouseWheelHandler(this.elements.drawElement),goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,function(t){t.altKey?this.scale(this.getEventPos(t),Math.pow(2,-t.detail/20)):t.shiftKey?this.shift(new bay.whiteboard.Vector(-t.detail/40,0)):!t.ctrlKey&&!t.metaKey&&this.shift(new bay.whiteboard.Vector(0,-t.detail/40)),this.drawBackground(),this.redrawAll(),t.preventDefault()},null,this)},bay.whiteboard.Whiteboard.prototype.addClickListener=function(){this.properties.events.onclick&&goog.events.listen(this.elements.drawElement,goog.events.EventType.CLICK,function(t){this.tool.current&&this.tool.current.onClick&&this.tool.current.onClick(this,t),t.preventDefault()},null,this)},bay.whiteboard.Whiteboard.prototype.addDragListener=function(){if(this.properties.events.ondrag){var t=function(t){this.dragger.point&&this.dragger.point.moveTo&&(this.dragger.point.moveTo(this.getConvertEventPos(t)),this.TraceAll())};goog.events.listen(this.elements.drawElement,goog.events.EventType.MOUSEDOWN,function(e){var o=this.getHoverDist();o=this.collections.main.getNeighbourList(this.getConvertEventPos(e),o,!0,!0),o=this.findPoint(o);this.dragger=new goog.fx.Dragger(this.elements.drawElement),o&&(this.dragger.point=o),goog.events.listen(this.dragger,goog.fx.Dragger.EventType.DRAG,t,null,this),goog.events.listen(this.dragger,goog.fx.Dragger.EventType.END,function(){this.dragger&&(this.dragger.dispose(),this.dragger=null)},null,this),this.dragger.startDrag(e)},null,this)}},bay.whiteboard.Whiteboard.prototype.addRightClickListener=function(){this.properties.events.onrightclick&&goog.events.listen(this.elements.drawElement,goog.events.EventType.CONTEXTMENU,function(t){this.tool.current&&this.tool.current.toggleOff&&this.tool.current.toggleOff(this),this.showInfoDialog(t)},null,this)},bay.whiteboard.Whiteboard.prototype.addKeyboardListener=function(){var t=new goog.ui.KeyboardShortcutHandler(document);t.registerShortcut("CTRL_J",goog.events.KeyCodes.J,goog.ui.KeyboardShortcutHandler.Modifiers.CTRL),goog.events.listen(t,goog.ui.KeyboardShortcutHandler.EventType.SHORTCUT_TRIGGERED,function(t){"CTRL_J"==t.identifier&&this.showCodePanel()},null,this)},bay.whiteboard.Whiteboard.prototype.TraceAll=function(){for(var t=this.collections.main.getElements(),e=0;e<t.length;e++)if(t[e]&&t[e].trace&&t[e].exists&&t[e].getTrace){var o=t[e].getTrace();o.exists=!0,this.collections.tracer.add(o)}},bay.whiteboard.Whiteboard.prototype.addButtons=function(){var t=this,e=function(e,o,i){var n=goog.style.getSize(t.elements.toolbarElement),r=new goog.ui.Button;return i?r.render(i):r.render(t.elements.toolbarElement),goog.style.setSize(r.getElement(),n.width-4,n.width-4),goog.dom.classes.add(r.getElement(),"bwb_toolbarButton "+e),o&&(goog.events.listen(r,goog.ui.Component.EventType.ACTION,function(t){this.buttonAction(o,t)},null,t),o.desc&&new goog.ui.Tooltip(r.getElement(),o.desc)),r},o=function(t,e){var o=t.order;o||(o=0);var i=e.order;return i||(i=0),o-i};t.tool.groups.sort(o);for(var i=0;i<t.tool.groups.length;i++){var n=t.tool.groups[i];n.hidden||(n.button=e(n.id,n),n.toolBox=goog.dom.createDom("div","bwb_toolbox"," "),goog.dom.appendChild(this.container,n.toolBox),goog.style.showElement(n.toolBox,!1))}for(t.tool.tools.sort(o),i=0;i<t.tool.tools.length;i++)if(tool=t.tool.tools[i],!tool.hidden)if(null==tool.group)e(tool.id,tool);else for(o=0;o<t.tool.groups.length;o++)t.tool.groups[o].id==tool.group&&!t.tool.groups[o].hidden&&e(tool.id,tool,t.tool.groups[o].toolBox)},bay.whiteboard.Whiteboard.prototype.buttonAction=function(t,e){if(t.action)this.tool.current&&this.tool.current.toggleOff&&(this.tool.current.toggleOff(this),this.tool.current=null),t.action(this,e);else{var o=this.tool.current!=t;this.tool.current&&this.tool.current.toggleOff&&this.tool.current.toggleOff(this),o?(this.tool.current=t,t.toggleOn&&t.toggleOn(this)):this.tool.current=null}},bay.whiteboard.Whiteboard.prototype.clearCurrentTool=function(t,e){goog.dom.classes.remove(this.elements.drawElement,t),this.tool.current[e]={},this.tool.current=null,this.collections.current.clear(),this.redrawAll()},bay.whiteboard.Whiteboard.prototype.hideToolBox=function(t){this.tool.current==t&&(this.tool.current=null),goog.style.showElement(t.toolBox,!1)},bay.whiteboard.Whiteboard.prototype.showToolBox=function(t){var e=goog.style.getPageOffset(t.button.getElement()),o=goog.style.getSize(t.button.getElement());e.x+=o.width,goog.style.setPosition(t.toolBox,e),goog.style.showElement(t.toolBox,!0)},bay.whiteboard.Whiteboard.prototype.toggleCoordinate=function(t){this.area.showCoordinates=void 0!==t?t:!this.area.showCoordinates,this.redrawAll()},bay.whiteboard.Whiteboard.prototype.showInfoDialog=function(t){var e=this.getHoverDist();0<(e=this.collections.main.getNeighbourList(this.getConvertEventPos(t),e,!0,!0)).length?this.showInfo(t.clientX,t.clientY,e,0):this.elements.infoDialog&&(this.elements.infoDialog.dispose(),this.elements.infoDialog=null),t.preventDefault()},bay.whiteboard.Whiteboard.prototype.showInfo=function(t,e,o,i){this.elements.infoDialog&&(this.elements.infoDialog.dispose(),this.elements.infoDialog=null);var n=new goog.ui.Component;if(n.render(document.body),goog.dom.classes.add(n.getElement(),"bwb_infoDialog"),this.elements.infoDialog=n,goog.style.setPosition(n.getElement(),t,e),1<o.length){var r=new goog.ui.Button("<");n.addChild(r,!0),r.setTooltip(goog.getMsg("Click to select other element")),goog.events.listen(r,goog.ui.Component.EventType.ACTION,function(){this.showInfo(t,e,o,i-1)},null,this),goog.dom.classes.add(r.getElement(),"bwb_navigate bwb_left"),(r=new goog.ui.Button(">")).setTooltip(goog.getMsg("Click to select other element")),n.addChild(r,!0),goog.events.listen(r,goog.ui.Component.EventType.ACTION,function(){this.showInfo(t,e,o,i+1)},null,this),goog.dom.classes.add(r.getElement(),"bwb_navigate bwb_right")}if(0>i&&(i=o.length-1),i>=o.length&&(i=0),element=o[i].element,r=new goog.ui.Control(element.toString()),n.addChild(r,!0),goog.dom.classes.add(r.getElement(),"bwb_objDesc"),!element.noLabel){var g=new goog.ui.BidiInput;n.addChild(g,!0),g.setValue(element.label),goog.events.listen(g.getElement(),goog.ui.Component.EventType.BLUR,function(){element.setLabel(g.getValue())},null,this),goog.dom.classes.add(g.getElement(),"bwb_labelInput")}(r=new goog.ui.Button(goog.getMsg("Hide"))).setTooltip(goog.getMsg("Click to hide element")),n.addChild(r,!0),goog.dom.classes.add(r.getElement(),"bwb_hideButton"),goog.events.listen(r,goog.ui.Component.EventType.ACTION,function(){element.hide(),this.redrawAll(),this.elements.infoDialog.dispose(),this.elements.infoDialog=null},null,this);var s=new goog.ui.Checkbox(element.trace);n.addChild(s,!0),r=new goog.ui.Control(goog.getMsg("Trace")),n.addChild(r,!0),goog.dom.classes.add(r.getElement(),"bwb_traceCheck"),goog.dom.classes.add(s.getElement(),"bwb_traceCheck"),goog.events.listen(s,goog.ui.Component.EventType.CHANGE,function(){element.setTrace(s.isChecked()),this.redrawAll()},null,this);var a=new goog.ui.ColorMenuButton(goog.getMsg("Color"));a.setTooltip(goog.getMsg("Click to select color")),element.color?a.setSelectedColor(element.color):a.setSelectedColor("#000000"),n.addChild(a,!0),goog.dom.classes.add(a.getElement(),"bwb_colorButton"),goog.events.listen(a,goog.ui.Component.EventType.ACTION,function(){element.setColor(a.getSelectedColor()),this.redrawAll()},null,this),goog.style.showElement(n.getElement(),!0)},bay.whiteboard.Whiteboard.prototype.drawCoordinates=function(){var t=new goog.graphics.Stroke(this.properties.axes.width,this.properties.axes.color),e=new goog.graphics.Font(this.properties.axes.fontsize,this.properties.axes.font),o=new goog.graphics.SolidFill(this.properties.axes.color),i=this.transform([this.area.minX,0,this.area.maxX,0,0,this.area.minY,0,this.area.maxY]);if((n=new goog.graphics.Path).moveTo(i[0],i[1]),n.lineTo(i[2],i[3]),this.graphics.drawPath(n,t,null),(n=new goog.graphics.Path).moveTo(i[4],i[5]),n.lineTo(i[6],i[7]),this.graphics.drawPath(n,t,null),n=100/this.area.transformation.getScaleX(),i=1,1>n)for(;1>n*i;)i*=10;else for(;10<n*i;)i/=10;var n=Math.round(n*i)/i,r=this.area.minX;for(r=Math.floor(r/n)*n;r<this.area.maxX;){i=this.transform([r,-n/10,r,n/10,r,0]);var g=new goog.graphics.Path;g.moveTo(i[0],i[1]),g.lineTo(i[2],i[3]),this.graphics.drawPath(g,t,null),this.graphics.drawText(Math.round(1e4*r)/1e4,i[4],i[5],null,null,"left",null,e,t,o),r+=n}for(r=this.area.minY,r=Math.floor(r/n)*n;r<this.area.maxY;)i=this.transform([-n/10,r,n/10,r,0,r]),(g=new goog.graphics.Path).moveTo(i[0],i[1]),g.lineTo(i[2],i[3]),this.graphics.drawPath(g,t,null),this.graphics.drawText(Math.round(1e4*r)/1e4,i[4],i[5],null,null,"left",null,e,t,o),r+=n},bay.whiteboard.Whiteboard.prototype.setBackground=function(t){var e=this;if(this.background||(this.background={}),this.background.url=t){var o=new Image;o.onload=function(){var t=this.width,o=this.height,i=e.area.maxX-e.area.minX,n=e.area.maxY-e.area.minY,r=i/t,g=n/o;e.background.imageWidth=t*Math.min(r,g),e.background.imageHeight=o*Math.min(r,g),e.background.imageLeft=e.area.minX+(i-e.background.imageWidth)/2,e.background.imageTop=e.area.maxY-(n-e.background.imageHeight)/2,e.onBackground&&e.onBackground(),e.drawBackground()},o.src=t}else this.background={},e.onBackground&&e.onBackground(),e.drawBackground()},bay.whiteboard.Whiteboard.prototype.drawBackground=function(){if(this.background&&this.background.url){var t=Math.round(this.background.imageWidth*this.area.transformation.getScaleX()),e=Math.round(-this.background.imageHeight*this.area.transformation.getScaleY()),o=this.transform([this.background.imageLeft,this.background.imageTop]),i=Math.round(o[0]);o=Math.round(o[1]);goog.style.setStyle(this.elements.drawElement,{"background-image":"url("+this.background.url+")","background-repeat":"no-repeat","background-position":i+"px "+o+"px","background-size":t+"px "+e+"px"})}else goog.style.setStyle(this.elements.drawElement,{"background-image":""})},bay.whiteboard.Whiteboard.prototype.backgroundJson=function(){return this.background?'{"type": "Background", "url": "'+this.background.url+'", "width": '+this.background.imageWidth+', "height": '+this.background.imageHeight+', "left": '+this.background.imageLeft+', "top": '+this.background.imageTop+"}":""},bay.whiteboard.Whiteboard.prototype.acceptBackground=function(a){"Background"==(a=eval("("+a+")")).type&&(this.background||(this.background={}),this.background.url=a.url,this.background.imageWidth=a.width,this.background.imageHeight=a.height,this.background.imageLeft=a.left,this.background.imageTop=a.top,this.drawBackground())},bay.whiteboard.Whiteboard.addGroup("tools",99,goog.getMsg("Common tools")),bay.whiteboard.Whiteboard.addTool("zoom-in","tools",{action:function(t){t.zoomIn()}},1,goog.getMsg("Zoom in")),bay.whiteboard.Whiteboard.addTool("zoom-out","tools",{action:function(t){t.zoomOut()}},2,goog.getMsg("Zoom out")),bay.whiteboard.Whiteboard.addTool("coordinates","tools",{action:function(t){t.toggleCoordinate()}},3,goog.getMsg("Show coordinates")),bay.whiteboard.Whiteboard.addTool("eraseAll","tools",{action:function(t){t.collections.main.clear(),t.collections.tracer.clear(),t.redrawAll()}},4,goog.getMsg("Clear all")),bay.whiteboard.Whiteboard.addTool("eraseTrace","tools",{action:function(t){t.collections.tracer.clear(),t.redrawAll()}},5,goog.getMsg("Clear traces")),bay.whiteboard.Whiteboard.addTool("info",null,{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_infoCursor")},toggleOff:function(t){goog.dom.classes.remove(t.elements.drawElement,"bwb_infoCursor"),t.elements.infoDialog&&(t.elements.infoDialog.dispose(),t.elements.infoDialog=null)},onClick:function(t,e){t.showInfoDialog(e)}},10,goog.getMsg("Show information about selected element")),bay.whiteboard.geometry={},bay.whiteboard.Whiteboard.addGroup("geometry",10,goog.getMsg("Ruler-and-compass constructions")),bay.whiteboard.geometry.PointAtLine=function(t,e){bay.whiteboard.Point.call(this),this.obj=t,t.dependant.push(this),this.param=e,this.recalc()},goog.inherits(bay.whiteboard.geometry.PointAtLine,bay.whiteboard.Point),bay.whiteboard.geometry.PointAtLine.prototype.deleteElement=function(){this.obj.deleteDependant(this)},bay.whiteboard.geometry.PointAtLine.prototype.moveTo=function(t,e){this.obj&&(this.param=this.obj.closestPoint(t,e).param),this.recalc(),this.onChange()},bay.whiteboard.geometry.PointAtLine.prototype.acceptData=function(t){bay.whiteboard.geometry.PointAtLine.superClass_.acceptData.call(this,t),this.obj&&(this.param=t.t),this.recalc()},bay.whiteboard.geometry.PointAtLine.prototype.recalc=function(){this.obj&&this.obj.exists&&null!=this.param?(this.exists=!0,this.x=this.obj.startPoint.x+this.obj.direction.x*this.param,this.y=this.obj.startPoint.y+this.obj.direction.y*this.param):this.exists=!1,this.recalcDependant()},bay.whiteboard.geometry.PointAtLine.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PointAtLine", "obj": '+t.indexOf(this.obj)+', "t": '+this.param+"}"},bay.whiteboard.geometry.PointAtLine.fromJson=function(t,e){var o=new bay.whiteboard.geometry.PointAtLine(e[t.obj],t.t);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("PointAtLine",bay.whiteboard.geometry.PointAtLine.fromJson),bay.whiteboard.geometry.PointAtCircle=function(t,e){bay.whiteboard.Point.call(this),this.obj=t,t.dependant.push(this),this.direction=e,this.recalc()},goog.inherits(bay.whiteboard.geometry.PointAtCircle,bay.whiteboard.Point),bay.whiteboard.geometry.PointAtLine.prototype.deleteElement=function(){this.obj.deleteDependant(this)},bay.whiteboard.geometry.PointAtCircle.prototype.moveTo=function(t,e){this.obj&&(this.direction=this.obj.closestPoint(t,e).direction),this.recalc(),this.onChange()},bay.whiteboard.geometry.PointAtCircle.prototype.acceptData=function(t){bay.whiteboard.geometry.PointAtCircle.superClass_.acceptData.call(this,t),this.obj&&(this.direction=new bay.whiteboard.Vector(t.x,t.y)),this.recalc()},bay.whiteboard.geometry.PointAtCircle.prototype.recalc=function(){this.obj&&this.obj.exists&&this.direction?(d=Math.sqrt(this.direction.x*this.direction.x+this.direction.y*this.direction.y),0!=d?(this.exists=!0,this.x=this.obj.centerPoint.x+this.obj.radius*this.direction.x/d,this.y=this.obj.centerPoint.y+this.obj.radius*this.direction.y/d):this.exists=!1):this.exists=!1,this.recalcDependant()},bay.whiteboard.geometry.PointAtCircle.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PointAtCircle", "obj": '+t.indexOf(this.obj)+', "x": '+this.direction.x+', "y": '+this.direction.y+"}"},bay.whiteboard.geometry.PointAtCircle.fromJson=function(t,e){var o=new bay.whiteboard.geometry.PointAtCircle(e[t.obj],new bay.whiteboard.Vector(t.x,t.y));return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("PointAtCircle",bay.whiteboard.geometry.PointAtCircle.fromJson),bay.whiteboard.geometry.Point_2l=function(t,e){bay.whiteboard.Point.call(this),this.obj1=t,this.obj2=e,t.dependant.push(this),e.dependant.push(this),this.recalc()},goog.inherits(bay.whiteboard.geometry.Point_2l,bay.whiteboard.Point),bay.whiteboard.geometry.Point_2l.prototype.deleteElement=function(){this.obj1.deleteDependant(this),this.obj2.deleteDependant(this)},bay.whiteboard.geometry.Point_2l.prototype.recalc=function(){if(this.obj1&&this.obj2&&this.obj1.exists&&this.obj2.exists){var t=this.obj1.direction.x,e=this.obj1.direction.y,o=this.obj2.direction.x,i=this.obj2.direction.y,n=o*e-i*t;0==n?this.exists=!1:(this.exists=!0,t=(e*(this.obj1.startPoint.x-this.obj2.startPoint.x)-t*(this.obj1.startPoint.y-this.obj2.startPoint.y))/n,this.x=this.obj2.startPoint.x+o*t,this.y=this.obj2.startPoint.y+i*t)}else this.exists=!1;this.recalcDependant()},bay.whiteboard.geometry.Point_2l.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "Point_2l", "obj1": '+t.indexOf(this.obj1)+', "obj2": '+t.indexOf(this.obj2)+"}"},bay.whiteboard.geometry.Point_2l.fromJson=function(t,e){var o=new bay.whiteboard.geometry.Point_2l(e[t.obj1],e[t.obj2]);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("Point_2l",bay.whiteboard.geometry.Point_2l.fromJson),bay.whiteboard.geometry.Point_2c=function(t,e,o){bay.whiteboard.Point.call(this),this.obj1=t,this.obj2=e,t.dependant.push(this),e.dependant.push(this),this.intersectNum=o,this.recalc()},goog.inherits(bay.whiteboard.geometry.Point_2c,bay.whiteboard.Point),bay.whiteboard.geometry.Point_2c.prototype.deleteElement=function(){this.obj1.deleteDependant(this),this.obj2.deleteDependant(this)},bay.whiteboard.geometry.Point_2c.prototype.recalc=function(){if(this.obj1&&this.obj2&&this.obj1.exists&&this.obj2.exists){var t=this.obj1.radius,e=this.obj2.radius,o=this.obj2.centerPoint.x-this.obj1.centerPoint.x,i=this.obj2.centerPoint.y-this.obj1.centerPoint.y,n=o*o+i*i;(o=Math.sqrt(o*o+i*i))>t+e||o<e-t||o<t-e||0==o?this.exists=!1:(e=(t*t-e*e+n)/(2*o),t=Math.sqrt(t*t-e*e),n=this.obj1.centerPoint.x+e*(this.obj2.centerPoint.x-this.obj1.centerPoint.x)/o,e=this.obj1.centerPoint.y+e*(this.obj2.centerPoint.y-this.obj1.centerPoint.y)/o,this.exists=!0,1==this.intersectNum?(this.x=n+t*(this.obj2.centerPoint.y-this.obj1.centerPoint.y)/o,this.y=e-t*(this.obj2.centerPoint.x-this.obj1.centerPoint.x)/o):(this.x=n-t*(this.obj2.centerPoint.y-this.obj1.centerPoint.y)/o,this.y=e+t*(this.obj2.centerPoint.x-this.obj1.centerPoint.x)/o))}else this.exists=!1;this.recalcDependant()},bay.whiteboard.geometry.Point_2c.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "Point_2c", "obj1": '+t.indexOf(this.obj1)+', "obj2": '+t.indexOf(this.obj2)+', "num": '+this.intersectNum+"}"},bay.whiteboard.geometry.Point_2c.fromJson=function(t,e){var o=new bay.whiteboard.geometry.Point_2c(e[t.obj1],e[t.obj2],t.num);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("Point_2c",bay.whiteboard.geometry.Point_2c.fromJson),bay.whiteboard.geometry.Point_lc=function(t,e,o){bay.whiteboard.Point.call(this),this.obj1=t,this.obj2=e,t.dependant.push(this),e.dependant.push(this),this.intersectNum=o,this.recalc()},goog.inherits(bay.whiteboard.geometry.Point_lc,bay.whiteboard.Point),bay.whiteboard.geometry.Point_lc.prototype.deleteElement=function(){this.obj1.deleteDependant(this),this.obj2.deleteDependant(this)},bay.whiteboard.geometry.Point_lc.prototype.recalc=function(){if(this.obj1&&this.obj2&&this.obj1.exists&&this.obj2.exists)if(this.obj1.distanceTo(this.obj2.centerPoint)>this.obj2.radius)this.exists=!1;else{var t=this.obj1.direction.x*this.obj1.direction.x+this.obj1.direction.y*this.obj1.direction.y,e=2*this.obj1.direction.x*(this.obj1.startPoint.x-this.obj2.centerPoint.x)+2*this.obj1.direction.y*(this.obj1.startPoint.y-this.obj2.centerPoint.y),o=Math.sqrt(e*e-4*t*((this.obj1.startPoint.x-this.obj2.centerPoint.x)*(this.obj1.startPoint.x-this.obj2.centerPoint.x)+(this.obj1.startPoint.y-this.obj2.centerPoint.y)*(this.obj1.startPoint.y-this.obj2.centerPoint.y)-this.obj2.radius*this.obj2.radius));this.exists=!0,t=1==this.intersectNum?(-e+o)/(2*t):(-e-o)/(2*t),this.x=this.obj1.startPoint.x+t*this.obj1.direction.x,this.y=this.obj1.startPoint.y+t*this.obj1.direction.y}else this.exists=!1;this.recalcDependant()},bay.whiteboard.geometry.Point_lc.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "Point_lc", "obj1": '+t.indexOf(this.obj1)+', "obj2": '+t.indexOf(this.obj2)+', "num": '+this.intersectNum+"}"},bay.whiteboard.geometry.Point_lc.fromJson=function(t,e){var o=new bay.whiteboard.geometry.Point_lc(e[t.obj1],e[t.obj2],t.num);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("Point_lc",bay.whiteboard.geometry.Point_lc.fromJson),bay.whiteboard.Whiteboard.addTool("point","geometry",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_pointCursor"),t.tool.current.point={}},toggleOff:function(t){t.clearCurrentTool("bwb_pointCursor","point")},onClick:function(t,e){t.pointAtEventPosition(e),t.tool.current.toggleOff(t),t.redrawAll()}},1,goog.getMsg("Single point")),bay.whiteboard.geometry.Line=function(){bay.whiteboard.Element.call(this),this.direction=this.startPoint=null,this.noLabel=!0},goog.inherits(bay.whiteboard.geometry.Line,bay.whiteboard.Element),bay.whiteboard.geometry.Line.prototype.toString=function(){return this.exists?goog.getMsg("Line [{$fromx},{$fromy}] - [{$tox},{$toy}]",{fromx:this.startPoint.x.toFixed(2),fromy:this.startPoint.y.toFixed(2),tox:(this.startPoint.x+this.direction.x).toFixed(2),toy:(this.startPoint.y+this.direction.y).toFixed(2)}):goog.getMsg("Line does not exist")},bay.whiteboard.geometry.Line.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e);return Math.abs(this.direction.x*(o.y-this.startPoint.y)-this.direction.y*(o.x-this.startPoint.x))/Math.sqrt(this.direction.x*this.direction.x+this.direction.y*this.direction.y)},bay.whiteboard.geometry.Line.prototype.closestPoint=function(t,e){var o=new bay.whiteboard.Vector(t,e);return new bay.whiteboard.geometry.PointAtLine(this,(this.direction.x*(o.x-this.startPoint.x)+this.direction.y*(o.y-this.startPoint.y))/(this.direction.x*this.direction.x+this.direction.y*this.direction.y))},bay.whiteboard.geometry.Line.prototype.getMinAndMaxParamValue=function(t){var e=-Number.MAX_VALUE,o=Number.MAX_VALUE;if(0!=this.direction.x&&(e=(t.minX-this.startPoint.x)/this.direction.x,o=(t.maxX-this.startPoint.x)/this.direction.x,e>o)){var i=o;o=e,e=i}var n=-Number.MAX_VALUE,r=Number.MAX_VALUE;return 0!=this.direction.y&&(n=(t.minY-this.startPoint.y)/this.direction.y,r=(t.maxY-this.startPoint.y)/this.direction.y,n>r&&(i=r,r=n,n=i)),e<r&&o>n?(t=n,e>n&&(t=e),e=r,o<r&&(e=o),{min:t,max:e}):null},bay.whiteboard.geometry.Line.prototype.draw=function(t){if(this.exists){if(e=this.getMinAndMaxParamValue(t.area)){var e,o=t.transform([this.startPoint.x+e.min*this.direction.x,this.startPoint.y+e.min*this.direction.y,this.startPoint.x+e.max*this.direction.x,this.startPoint.y+e.max*this.direction.y]);(e=new goog.graphics.Path).moveTo(o[0],o[1]),e.lineTo(o[2],o[3]),this.current?o=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color):(this.hover&&(o=new goog.graphics.Stroke(t.properties.hover.width,t.properties.hover.color),t.graphics.drawPath(e,o,null)),o=t.properties.line.color,this.color&&(o=this.color),o=new goog.graphics.Stroke(t.properties.line.width,o)),t.graphics.drawPath(e,o,null)}}},bay.whiteboard.geometry.Line.prototype.getTrace=function(){var t=new bay.whiteboard.geometry.Line;return t.startPoint=new bay.whiteboard.PointFree(this.startPoint),t.direction=new bay.whiteboard.Vector(this.direction),t},bay.whiteboard.Whiteboard.properties.line={width:1,color:"Black"},bay.whiteboard.geometry.LineGeneral=function(t,e,o){bay.whiteboard.geometry.Line.call(this),this.a=t,this.b=e,this.c=o,this.recalc()},goog.inherits(bay.whiteboard.geometry.LineGeneral,bay.whiteboard.geometry.Line),bay.whiteboard.geometry.LineGeneral.prototype.recalc=function(){null!=this.a&&null!=this.b&&null!=this.c?0==this.a&&0==this.b?this.exists=!1:(this.exists=!0,0==this.a?(this.startPoint=new bay.whiteboard.PointFree(0,this.c/this.b),this.direction=new bay.whiteboard.Vector(1,0)):0==this.b?(this.startPoint=new bay.whiteboard.PointFree(this.c/this.a,0),this.direction=new bay.whiteboard.Vector(0,1)):(this.startPoint=new bay.whiteboard.PointFree(0,this.c/this.b),this.direction=new bay.whiteboard.Vector(1/this.a,-1/this.b))):this.exists=!1,this.recalcDependant()},bay.whiteboard.geometry.LineGeneral.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "LineGeneral", "a": '+this.a+', "b": '+this.b+', "c": '+this.c+"}"},bay.whiteboard.geometry.LineGeneral.fromJson=function(t){var e=new bay.whiteboard.geometry.LineGeneral(t.a,t.b,t.c);return e.restoreFromJson(t),e},bay.whiteboard.Collection.setFromJsonFunc("LineGeneral",bay.whiteboard.geometry.LineGeneral.fromJson),bay.whiteboard.geometry.Line_2p=function(t,e){bay.whiteboard.geometry.Line.call(this),this.startPoint=t,this.endPoint=e,t.dependant.push(this),e.dependant.push(this),this.recalc()},goog.inherits(bay.whiteboard.geometry.Line_2p,bay.whiteboard.geometry.Line),bay.whiteboard.geometry.Line_2p.prototype.deleteElement=function(){this.startPoint.deleteDependant(this),this.endPoint.deleteDependant(this)},bay.whiteboard.geometry.Line_2p.prototype.recalc=function(){this.startPoint&&this.endPoint&&this.startPoint.exists&&this.endPoint.exists?(this.exists=!0,this.direction=new bay.whiteboard.Vector(this.endPoint.x-this.startPoint.x,this.endPoint.y-this.startPoint.y)):this.exists=!1,this.recalcDependant()},bay.whiteboard.Whiteboard.addTool("ruler","geometry",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_rulerCursor"),t.tool.current.ruler={}},toggleOff:function(t){t.clearCurrentTool("bwb_rulerCursor","ruler")},onMove:function(t,e){t.tool.current.ruler.endTmp&&t.tool.current.ruler.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.ruler.start?(t.collections.main.add(new bay.whiteboard.geometry.Line_2p(t.tool.current.ruler.start,o)),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.collections.current.clear(),t.tool.current.ruler.start=o,t.collections.current.add(t.tool.current.ruler.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.ruler.endTmp.hide(),o=new bay.whiteboard.geometry.Line_2p(t.tool.current.ruler.start,t.tool.current.ruler.endTmp),o.current=!0,t.collections.current.add(o)),t.redrawAll()}},2,goog.getMsg("Line through two points")),bay.whiteboard.geometry.Line_2p.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "Line_2p", "p1": '+t.indexOf(this.startPoint)+', "p2": '+t.indexOf(this.endPoint)+"}"},bay.whiteboard.geometry.Line_2p.fromJson=function(t,e){var o=new bay.whiteboard.geometry.Line_2p(e[t.p1],e[t.p2]);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("Line_2p",bay.whiteboard.geometry.Line_2p.fromJson),bay.whiteboard.geometry.Segment=function(t,e){bay.whiteboard.geometry.Line_2p.call(this,t,e)},goog.inherits(bay.whiteboard.geometry.Segment,bay.whiteboard.geometry.Line_2p),bay.whiteboard.geometry.Segment.prototype.length=function(){return Math.sqrt(this.direction.x*this.direction.x+this.direction.y*this.direction.y)},bay.whiteboard.geometry.Segment.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e),i=this.startPoint.y-o.y,n=this.endPoint.y-o.y
;return 0!=this.direction.x&&(i=this.startPoint.x-o.x+this.direction.y*(this.startPoint.y-o.y)/this.direction.x,n=this.endPoint.x-o.x+this.direction.y*(this.endPoint.y-o.y)/this.direction.x),0>=i*n?Math.abs(this.direction.x*(o.y-this.startPoint.y)-this.direction.y*(o.x-this.startPoint.x))/Math.sqrt(this.direction.x*this.direction.x+this.direction.y*this.direction.y):(i=this.startPoint.distance(o.x,o.y),n=this.endPoint.distance(o.x,o.y),i<n?i:n)},bay.whiteboard.geometry.Segment.prototype.draw=function(t){if(this.exists){if((e=this.getMinAndMaxParamValue(t.area))&&0<e.max&&1>e.min){0>e.min&&(e.min=0),1<e.max&&(e.max=1);var e,o=t.transform([this.startPoint.x+e.min*this.direction.x,this.startPoint.y+e.min*this.direction.y,this.startPoint.x+e.max*this.direction.x,this.startPoint.y+e.max*this.direction.y]);(e=new goog.graphics.Path).moveTo(o[0],o[1]),e.lineTo(o[2],o[3]),this.current?o=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color):(this.hover&&(o=new goog.graphics.Stroke(t.properties.hover.width,t.properties.hover.color),t.graphics.drawPath(e,o,null)),o=t.properties.line.color,this.color&&(o=this.color),o=new goog.graphics.Stroke(t.properties.line.width,o)),t.graphics.drawPath(e,o,null)}}},bay.whiteboard.geometry.Segment.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "Segment", "p1": '+t.indexOf(this.startPoint)+', "p2": '+t.indexOf(this.endPoint)+"}"},bay.whiteboard.geometry.Segment.fromJson=function(t,e){var o=new bay.whiteboard.geometry.Segment(e[t.p1],e[t.p2]);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("Segment",bay.whiteboard.geometry.Segment.fromJson),bay.whiteboard.geometry.Segment.prototype.getTrace=function(){return new bay.whiteboard.geometry.Segment(new bay.whiteboard.PointFree(this.startPoint),new bay.whiteboard.PointFree(this.endPoint))},bay.whiteboard.Whiteboard.addTool("segment","geometry",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_rulerCursor"),t.tool.current.ruler={}},toggleOff:function(t){t.clearCurrentTool("bwb_rulerCursor","ruler")},onMove:function(t,e){t.tool.current.ruler.endTmp&&t.tool.current.ruler.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.ruler.start?(t.collections.main.add(new bay.whiteboard.geometry.Segment(t.tool.current.ruler.start,o)),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.collections.current.clear(),t.tool.current.ruler.start=o,t.collections.current.add(t.tool.current.ruler.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.ruler.endTmp.hide(),o=new bay.whiteboard.geometry.Segment(t.tool.current.ruler.start,t.tool.current.ruler.endTmp),o.current=!0,t.collections.current.add(o)),t.redrawAll()}},3,goog.getMsg("Line segment connecting two points")),bay.whiteboard.geometry.Circle=function(){bay.whiteboard.Element.call(this),this.radius=this.centerPoint=null,this.noLabel=!0},goog.inherits(bay.whiteboard.geometry.Circle,bay.whiteboard.Element),bay.whiteboard.geometry.Circle.prototype.toString=function(){return this.exists?goog.getMsg("Circle [{$x},{$y}] -> {$r}",{x:this.centerPoint.x.toFixed(2),y:this.centerPoint.y.toFixed(2),r:this.radius.toFixed(2)}):goog.getMsg("Circle does not exist")},bay.whiteboard.geometry.Circle.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e);return Math.abs(this.centerPoint.distance(o.x,o.y)-this.radius)},bay.whiteboard.geometry.Circle.prototype.closestPoint=function(t,e){var o=new bay.whiteboard.Vector(t,e);o=new bay.whiteboard.Vector(o.x-this.centerPoint.x,o.y-this.centerPoint.y);return new bay.whiteboard.geometry.PointAtCircle(this,o)},bay.whiteboard.geometry.Circle.prototype.draw=function(t){if(this.exists&&this.centerPoint.x>=t.area.minX-this.radius&&this.centerPoint.x<=t.area.maxX+this.radius&&this.centerPoint.y>=t.area.minY-this.radius&&this.centerPoint.y<=t.area.maxY+this.radius){var e=t.transform([this.centerPoint.x,this.centerPoint.y]);if(this.current)var o=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color);else this.hover&&(o=new goog.graphics.Stroke(t.properties.hover.width,t.properties.hover.color),t.graphics.drawCircle(e[0],e[1],this.radius*t.area.transformation.getScaleX(),o,null)),o=t.properties.circle.color,this.color&&(o=this.color),o=new goog.graphics.Stroke(t.properties.circle.width,o);t.graphics.drawCircle(e[0],e[1],this.radius*t.area.transformation.getScaleX(),o,null)}},bay.whiteboard.geometry.Circle.prototype.getTrace=function(){var t=new bay.whiteboard.geometry.Circle;return t.centerPoint=new bay.whiteboard.PointFree(this.centerPoint),t.radius=this.radius,t},bay.whiteboard.Whiteboard.properties.circle={width:1,color:"Black"},bay.whiteboard.geometry.CircleGeneral=function(t,e,o){bay.whiteboard.geometry.Circle.call(this),this.a=t,this.b=e,this.c=o,this.recalc()},goog.inherits(bay.whiteboard.geometry.CircleGeneral,bay.whiteboard.geometry.Circle),bay.whiteboard.geometry.CircleGeneral.prototype.recalc=function(){null!=this.a&&null!=this.b&&null!=this.c?(this.exists=!0,this.centerPoint=new bay.whiteboard.PointFree(this.a,this.b),this.radius=Math.abs(this.c)):this.exists=!1,this.recalcDependant()},bay.whiteboard.geometry.CircleGeneral.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "CircleGeneral", "a": '+this.a+', "b": '+this.b+', "c": '+this.c+"}"},bay.whiteboard.geometry.CircleGeneral.fromJson=function(t){var e=new bay.whiteboard.geometry.CircleGeneral(t.a,t.b,t.c);return e.restoreFromJson(t),e},bay.whiteboard.Collection.setFromJsonFunc("CircleGeneral",bay.whiteboard.geometry.CircleGeneral.fromJson),bay.whiteboard.geometry.Circle_3p=function(t,e,o){bay.whiteboard.geometry.Circle.call(this),this.centerPoint=t,this.startPoint=e,this.endPoint=o,t.dependant.push(this),e.dependant.push(this),o.dependant.push(this),this.recalc()},goog.inherits(bay.whiteboard.geometry.Circle_3p,bay.whiteboard.geometry.Circle),bay.whiteboard.geometry.Circle_3p.prototype.deleteElement=function(){this.centerPoint.deleteDependant(this),this.startPoint.deleteDependant(this),this.endPoint.deleteDependant(this)},bay.whiteboard.geometry.Circle_3p.prototype.recalc=function(){this.centerPoint&&this.startPoint&&this.endPoint&&this.centerPoint.exists&&this.startPoint.exists&&this.endPoint.exists?(this.exists=!0,this.radius=this.startPoint.distanceTo(this.endPoint)):this.exists=!1,this.recalcDependant()},bay.whiteboard.geometry.Circle_3p.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "Circle_3p", "p1": '+t.indexOf(this.centerPoint)+', "p2": '+t.indexOf(this.startPoint)+', "p3": '+t.indexOf(this.endPoint)+"}"},bay.whiteboard.geometry.Circle_3p.fromJson=function(t,e){var o=new bay.whiteboard.geometry.Circle_3p(e[t.p1],e[t.p2],e[t.p3]);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("Circle_3p",bay.whiteboard.geometry.Circle_3p.fromJson),bay.whiteboard.Whiteboard.addTool("compass","geometry",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_compassCursor"),t.tool.current.compass={}},toggleOff:function(t){t.clearCurrentTool("bwb_compassCursor","compass")},onMove:function(t,e){t.tool.current.compass.centerTmp?t.tool.current.compass.centerTmp.moveTo(t.getConvertEventPos(e)):t.tool.current.compass.endTmp&&t.tool.current.compass.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.compass.end?(t.collections.main.add(new bay.whiteboard.geometry.Circle_3p(o,t.tool.current.compass.start,t.tool.current.compass.end)),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.tool.current.compass.start?(t.collections.current.clear(),t.tool.current.compass.end=o,t.collections.current.add(t.tool.current.compass.centerTmp=new bay.whiteboard.PointFree(o)),t.tool.current.compass.centerTmp.hide(),o=new bay.whiteboard.geometry.Circle_3p(t.tool.current.compass.centerTmp,t.tool.current.compass.start,t.tool.current.compass.end)):(t.collections.current.clear(),t.tool.current.compass.start=o,t.collections.current.add(t.tool.current.compass.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.compass.endTmp.hide(),o=new bay.whiteboard.geometry.Segment(t.tool.current.compass.start,t.tool.current.compass.endTmp)),o.current=!0,t.collections.current.add(o)),t.redrawAll()}},4,goog.getMsg("Circle with radius equals to the given segment")),bay.whiteboard.Whiteboard.addTool("circle","geometry",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_compassCursor"),t.tool.current.compass={}},toggleOff:function(t){t.clearCurrentTool("bwb_compassCursor","compass")},onMove:function(t,e){t.tool.current.compass.endTmp&&t.tool.current.compass.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.compass.start?(t.collections.main.add(new bay.whiteboard.geometry.Circle_3p(t.tool.current.compass.start,t.tool.current.compass.start,o)),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.collections.current.clear(),t.tool.current.compass.start=o,t.collections.current.add(t.tool.current.compass.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.compass.endTmp.hide(),o=new bay.whiteboard.geometry.Circle_3p(t.tool.current.compass.start,t.tool.current.compass.start,t.tool.current.compass.endTmp),o.current=!0,t.collections.current.add(o)),t.redrawAll()}},5,goog.getMsg("Circle with given center")),bay.whiteboard.geometry.getIntersection=function(t,e,o,i){if(t instanceof bay.whiteboard.geometry.Line&&e instanceof bay.whiteboard.geometry.Line)return new bay.whiteboard.geometry.Point_2l(t,e);if(t instanceof bay.whiteboard.geometry.Circle&&e instanceof bay.whiteboard.geometry.Circle){var n=new bay.whiteboard.geometry.Point_2c(t,e,0);return t=new bay.whiteboard.geometry.Point_2c(t,e,1),n.distance(o,i)<t.distance(o,i)?n:t}return t instanceof bay.whiteboard.geometry.Circle&&e instanceof bay.whiteboard.geometry.Line?(n=new bay.whiteboard.geometry.Point_lc(e,t,0),t=new bay.whiteboard.geometry.Point_lc(e,t,1),n.distance(o,i)<t.distance(o,i)?n:t):t instanceof bay.whiteboard.geometry.Line&&e instanceof bay.whiteboard.geometry.Circle?(n=new bay.whiteboard.geometry.Point_lc(t,e,0),t=new bay.whiteboard.geometry.Point_lc(t,e,1),n.distance(o,i)<t.distance(o,i)?n:t):void 0},bay.whiteboard.pencil={},bay.whiteboard.Whiteboard.addGroup("pencil",5,goog.getMsg("Free hand drawing")),bay.whiteboard.pencil.Curve=function(t){bay.whiteboard.Element.call(this),this.startPoint=t,t.dependant.push(this),this.points=[],this.lastSavedPoint=0,this.pos={left:t.x,right:t.x,top:t.y,bottom:t.y},this.exists=!0},goog.inherits(bay.whiteboard.pencil.Curve,bay.whiteboard.Element),bay.whiteboard.pencil.Curve.prototype.deleteElement=function(){this.startPoint.deleteDependant(this)},bay.whiteboard.pencil.Curve.prototype.addPoint=function(t){this.points.push(new bay.whiteboard.Vector(t.x-this.startPoint.x,t.y-this.startPoint.y)),t.x<this.pos.left&&(this.pos.left=t.x),t.x>this.pos.right&&(this.pos.right=t.x),t.y>this.pos.top&&(this.pos.top=t.y),t.y<this.pos.bottom&&(this.pos.bottom=t.y),this.onChange()},bay.whiteboard.pencil.Curve.prototype.toString=function(){return this.exists?goog.getMsg("Curve"):goog.getMsg("Curve does not exists")},bay.whiteboard.pencil.Curve.prototype.distance=function(t,e){for(var o=new bay.whiteboard.Vector(t,e),i=this.startPoint.distance(o),n=(o=new bay.whiteboard.Vector(o.x-this.startPoint.x,o.y-this.startPoint.y),0);n<this.points.length;n++){var r=this.points[n].distance(o);r<i&&(i=r)}return i},bay.whiteboard.pencil.Curve.prototype.recalc=function(){if(null!=this.startPoint&&this.startPoint.exists){this.exists=!0,this.pos={left:this.startPoint.x,right:this.startPoint.x,top:this.startPoint.y,bottom:this.startPoint.y};for(var t=0;t<this.points.length;t++){var e=this.points[t];e.x<this.pos.left&&(this.pos.left=e.x),e.x>this.pos.right&&(this.pos.right=e.x),e.y>this.pos.top&&(this.pos.top=e.y),e.y<this.pos.bottom&&(this.pos.bottom=e.y)}}else this.exists=!1;this.recalcDependant()},bay.whiteboard.pencil.Curve.prototype.draw=function(t){if(this.exists){var e=t.transform([this.startPoint.x,this.startPoint.y]),o=new goog.graphics.Path;o.moveTo(e[0],e[1]);for(var i=0;i<this.points.length;i++)e=t.transform([this.startPoint.x+this.points[i].x,this.startPoint.y+this.points[i].y]),o.lineTo(e[0],e[1]);this.current?e=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color):(this.hover&&(e=new goog.graphics.Stroke(t.properties.hover.width,t.properties.hover.color),t.graphics.drawPath(o,e,null)),e=t.properties.curve.color,this.color&&(e=this.color),e=new goog.graphics.Stroke(t.properties.curve.width,e)),t.graphics.drawPath(o,e,null)}},bay.whiteboard.Whiteboard.properties.curve={width:3,color:"Gray"},bay.whiteboard.pencil.Curve.prototype.toJson=function(t,e){for(str="{"+this.jsonHeader(e)+', "type": "PencilCurve", "p0": '+t.indexOf(this.startPoint)+', "i": '+this.lastSavedPoint,t=this.lastSavedPoint;t<this.points.length;t++)e=this.points[t],str+=', "x'+t+'": '+e.x+', "y'+t+'": '+e.y,this.lastSavedPoint=t;return str+"}"},bay.whiteboard.pencil.Curve.fromJson=function(t,e){for(var o=new bay.whiteboard.pencil.Curve(e[t.p0]),i=0;"undefined"!=typeof t["x"+i];)o.points.push(new bay.whiteboard.Vector(t["x"+i],t["y"+i])),i++;return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("PencilCurve",bay.whiteboard.pencil.Curve.fromJson),bay.whiteboard.pencil.Curve.prototype.acceptData=function(t){bay.whiteboard.pencil.Curve.superClass_.acceptData.call(this,t);var e=0;for(t.i&&(e=t.i);"undefined"!=typeof t["x"+e];)this.points[e]=new bay.whiteboard.Vector(t["x"+e],t["y"+e]),e++;this.recalc()},bay.whiteboard.Whiteboard.addTool("curve","pencil",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_curveCursor"),t.tool.current.curve={}},toggleOff:function(t){t.clearCurrentTool("bwb_curveCursor","curve")},onMove:function(t,e){if(t.tool.current.curve.start){var o=t.getConvertEventPos(e);t.tool.current.curve.start.addPoint(o)}},onClick:function(t,e){if(t.tool.current.curve.start)t.tool.current.toggleOff(t);else{var o=t.pointAtEventPosition(e);o=new bay.whiteboard.pencil.Curve(o);t.collections.main.add(o),t.tool.current.curve.start=o}t.redrawAll()}},1,goog.getMsg("Curve")),bay.whiteboard.pencil.FreeLine=function(t,e){bay.whiteboard.geometry.Segment.call(this,t,e)},goog.inherits(bay.whiteboard.pencil.FreeLine,bay.whiteboard.geometry.Segment),bay.whiteboard.pencil.FreeLine.prototype.draw=function(t){if(this.exists){if((e=this.getMinAndMaxParamValue(t.area))&&0<e.max&&1>e.min){0>e.min&&(e.min=0),1<e.max&&(e.max=1);var e,o=t.transform([this.startPoint.x+e.min*this.direction.x,this.startPoint.y+e.min*this.direction.y,this.startPoint.x+e.max*this.direction.x,this.startPoint.y+e.max*this.direction.y]);(e=new goog.graphics.Path).moveTo(o[0],o[1]),e.lineTo(o[2],o[3]),this.current?o=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color):(this.hover&&(o=new goog.graphics.Stroke(t.properties.hover.width,t.properties.hover.color),t.graphics.drawPath(e,o,null)),o=t.properties.freeline.color,this.color&&(o=this.color),o=new goog.graphics.Stroke(t.properties.freeline.width,o)),t.graphics.drawPath(e,o,null)}}},bay.whiteboard.Whiteboard.properties.freeline={width:3,color:"Gray"},bay.whiteboard.pencil.FreeLine.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PencilFreeLine", "p1": '+t.indexOf(this.startPoint)+', "p2": '+t.indexOf(this.endPoint)+"}"},bay.whiteboard.pencil.FreeLine.fromJson=function(t,e){var o=new bay.whiteboard.pencil.FreeLine(e[t.p1],e[t.p2]);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("PencilFreeLine",bay.whiteboard.pencil.FreeLine.fromJson),bay.whiteboard.pencil.FreeLine.prototype.getTrace=function(){return new bay.whiteboard.pencil.FreeLine(new bay.whiteboard.PointFree(this.startPoint),new bay.whiteboard.PointFree(this.endPoint))},bay.whiteboard.Whiteboard.addTool("freeline","pencil",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_pencilLineCursor"),t.tool.current.ruler={}},toggleOff:function(t){t.clearCurrentTool("bwb_pencilLineCursor","ruler")},onMove:function(t,e){t.tool.current.ruler.endTmp&&t.tool.current.ruler.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.ruler.start&&t.collections.main.add(new bay.whiteboard.pencil.FreeLine(t.tool.current.ruler.start,o)),t.collections.current.clear(),t.tool.current.ruler.start=o,t.collections.current.add(t.tool.current.ruler.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.ruler.endTmp.hide(),(o=new bay.whiteboard.pencil.FreeLine(t.tool.current.ruler.start,t.tool.current.ruler.endTmp)).current=!0,t.collections.current.add(o),t.redrawAll()}},2,goog.getMsg("Polyline")),bay.whiteboard.pencil.Rectangle=function(t,e){bay.whiteboard.Element.call(this),this.pointOne=t,this.pointTwo=e,t.dependant.push(this),e.dependant.push(this),this.pos={left:null,right:null,top:null,bottom:null},this.noLabel=!0,this.recalc()},goog.inherits(bay.whiteboard.pencil.Rectangle,bay.whiteboard.Element),bay.whiteboard.pencil.Rectangle.prototype.deleteElement=function(){this.pointOne.deleteDependant(this),this.pointTwo.deleteDependant(this)},bay.whiteboard.pencil.Rectangle.prototype.toString=function(){return this.exists?goog.getMsg("Rectangle"):goog.getMsg("Rectangle does not exist")},bay.whiteboard.pencil.Rectangle.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e),i=null;return o.x<=this.pos.left?i=o.y<this.pos.bottom?Math.sqrt((o.x-this.pos.left)*(o.x-this.pos.left)+(o.y-this.pos.bottom)*(o.y-this.pos.bottom)):o.y>=this.pos.top?Math.sqrt((o.x-this.pos.left)*(o.x-this.pos.left)+(o.y-this.pos.top)*(o.y-this.pos.top)):this.pos.left-o.x:o.x>=this.pos.right?i=o.y<=this.pos.bottom?Math.sqrt((o.x-this.pos.right)*(o.x-this.pos.right)+(o.y-this.pos.bottom)*(o.y-this.pos.bottom)):o.y>=this.pos.top?Math.sqrt((o.x-this.pos.right)*(o.x-this.pos.right)+(o.y-this.pos.top)*(o.y-this.pos.top)):o.x-this.pos.right:o.y<=this.pos.bottom?i=this.pos.bottom-o.y:o.y>=this.pos.top?i=o.y-this.pos.top:(i=this.pos.top-o.y,o.y-this.pos.bottom<i&&(i=o.y-this.pos.bottom),o.x-this.pos.left<i&&(i=o.x-this.pos.left),this.pos.right-o.x<i&&(i=this.pos.right-o.x)),i},bay.whiteboard.pencil.Rectangle.prototype.closestPoint=function(t,e){var o=new bay.whiteboard.Vector(t,e),i=null,n=null;if(o.x<=this.pos.left)i="left",n=o.y<this.pos.bottom?0:o.y>=this.pos.top?1:(o.y-this.pos.bottom)/(this.pos.top-this.pos.bottom);else if(o.x>=this.pos.right)i="right",n=o.y<this.pos.bottom?0:o.y>=this.pos.top?1:(o.y-this.pos.bottom)/(this.pos.top-this.pos.bottom);else if(o.y<=this.pos.bottom)i="bottom",n=(o.x-this.pos.left)/(this.pos.right-this.pos.left);else if(o.y>=this.pos.top)i="top",n=(o.x-this.pos.left)/(this.pos.right-this.pos.left);else{var r=this.pos.top-o.y;i="top",n=(o.x-this.pos.left)/(this.pos.right-this.pos.left);o.y-this.pos.bottom<r&&(r=o.y-this.pos.bottom,i="bottom",n=(o.x-this.pos.left)/(this.pos.right-this.pos.left)),o.x-this.pos.left<r&&(r=o.x-this.pos.left,i="left",n=(o.y-this.pos.bottom)/(this.pos.top-this.pos.bottom)),this.pos.right-o.x<r&&(i="right",n=(o.y-this.pos.bottom)/(this.pos.top-this.pos.bottom))}return new bay.whiteboard.pencil.PointAtRect(this,i,n)},bay.whiteboard.pencil.Rectangle.prototype.recalc=function(){null!=this.pointOne&&null!=this.pointTwo&&this.pointOne.exists&&this.pointTwo.exists?(this.exists=!0,this.pointOne.x<this.pointTwo.x?(this.pos.left=this.pointOne.x,this.pos.right=this.pointTwo.x):(this.pos.left=this.pointTwo.x,this.pos.right=this.pointOne.x),this.pointOne.y<this.pointTwo.y?(this.pos.top=this.pointTwo.y,this.pos.bottom=this.pointOne.y):(this.pos.top=this.pointOne.y,this.pos.bottom=this.pointTwo.y)):this.exists=!1,this.recalcDependant()},bay.whiteboard.pencil.Rectangle.prototype.draw=function(t){if(this.exists){var e=t.transform([this.pos.left,this.pos.bottom,this.pos.right,this.pos.top]),o=new goog.graphics.Path;o.moveTo(e[0],e[1]),o.lineTo(e[0],e[3]),o.lineTo(e[2],e[3]),o.lineTo(e[2],e[1]),o.lineTo(e[0],e[1]),this.current?e=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color):(this.hover&&(e=new goog.graphics.Stroke(t.properties.hover.width,t.properties.hover.color),t.graphics.drawPath(o,e,null)),e=t.properties.rectangle.color,this.color&&(e=this.color),e=new goog.graphics.Stroke(t.properties.rectangle.width,e)),t.graphics.drawPath(o,e,null)}},bay.whiteboard.Whiteboard.properties.rectangle={width:3,color:"Grey"},bay.whiteboard.pencil.Rectangle.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PencilRect", "p1": '+t.indexOf(this.pointOne)+', "p2": '+t.indexOf(this.pointTwo)+"}"},bay.whiteboard.pencil.Rectangle.fromJson=function(t,e){var o=new bay.whiteboard.pencil.Rectangle(e[t.p1],e[t.p2]);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("PencilRect",bay.whiteboard.pencil.Rectangle.fromJson),bay.whiteboard.Whiteboard.addTool("rectangle","pencil",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_rectCursor"),t.tool.current.text={}},toggleOff:function(t){t.clearCurrentTool("bwb_rectCursor","text")},onMove:function(t,e){t.tool.current.text.endTmp&&t.tool.current.text.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.text.start?(t.collections.main.add(new bay.whiteboard.pencil.Rectangle(t.tool.current.text.start,o)),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.collections.current.clear(),t.tool.current.text.start=o,t.collections.current.add(t.tool.current.text.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.text.endTmp.hide(),o=new bay.whiteboard.pencil.Rectangle(t.tool.current.text.start,t.tool.current.text.endTmp),o.current=!0,t.collections.current.add(o)),t.redrawAll()}},3,goog.getMsg("Rectangle")),bay.whiteboard.pencil.PointAtRect=function(t,e,o){bay.whiteboard.Point.call(this),this.obj=t,t.dependant.push(this),this.side=e,this.param=o,this.recalc()},goog.inherits(bay.whiteboard.pencil.PointAtRect,bay.whiteboard.Point),bay.whiteboard.pencil.PointAtRect.prototype.deleteElement=function(){this.obj.deleteDependant(this)},bay.whiteboard.pencil.PointAtRect.prototype.moveTo=function(t,e){if(this.obj){var o=this.obj.closestPoint(t,e);this.side=o.side,this.param=o.param}this.recalc(),this.onChange()},bay.whiteboard.pencil.PointAtRect.prototype.acceptData=function(t){bay.whiteboard.pencil.PointAtRect.superClass_.acceptData.call(this,t),this.obj&&(this.side=t.s,this.param=t.t),this.recalc()},bay.whiteboard.pencil.PointAtRect.prototype.recalc=function(){this.obj&&this.obj.exists&&null!=this.param&&null!=this.side?(this.exists=!0,"left"==this.side?(this.x=this.obj.pos.left,this.y=this.obj.pos.bottom+(this.obj.pos.top-this.obj.pos.bottom)*this.param):"right"==this.side?(this.x=this.obj.pos.right,this.y=this.obj.pos.bottom+(this.obj.pos.top-this.obj.pos.bottom)*this.param):"top"==this.side?(this.x=this.obj.pos.left+(this.obj.pos.right-this.obj.pos.left)*this.param,this.y=this.obj.pos.top):"bottom"==this.side&&(this.x=this.obj.pos.left+(this.obj.pos.right-this.obj.pos.left)*this.param,this.y=this.obj.pos.bottom)):this.exists=!1,this.recalcDependant()},bay.whiteboard.pencil.PointAtRect.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PencilPointAtRect", "obj": '+t.indexOf(this.obj)+', "s": "'+this.side+'", "t": "'+this.param+'"}'},bay.whiteboard.pencil.PointAtRect.fromJson=function(t,e){var o=new bay.whiteboard.pencil.PointAtRect(e[t.obj],t.s,t.t);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("PencilPointAtRect",bay.whiteboard.pencil.PointAtRect.fromJson),bay.whiteboard.pencil.Circle=function(t,e){bay.whiteboard.geometry.Circle.call(this),this.centerPoint=t,this.endPoint=e,t.dependant.push(this),e.dependant.push(this),this.recalc()},goog.inherits(bay.whiteboard.pencil.Circle,bay.whiteboard.geometry.Circle),bay.whiteboard.pencil.Circle.prototype.deleteElement=function(){this.centerPoint.deleteDependant(this),this.endPoint.deleteDependant(this)},bay.whiteboard.pencil.Circle.prototype.recalc=function(){this.centerPoint&&this.endPoint&&this.centerPoint.exists&&this.endPoint.exists?(this.exists=!0,this.radius=this.centerPoint.distanceTo(this.endPoint)):this.exists=!1,this.recalcDependant()},bay.whiteboard.pencil.Circle.prototype.draw=function(t){if(this.exists&&this.centerPoint.x>=t.area.minX-this.radius&&this.centerPoint.x<=t.area.maxX+this.radius&&this.centerPoint.y>=t.area.minY-this.radius&&this.centerPoint.y<=t.area.maxY+this.radius){var e=t.transform([this.centerPoint.x,this.centerPoint.y]);if(this.current)var o=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color);else this.hover&&(o=new goog.graphics.Stroke(t.properties.hover.width,t.properties.hover.color),t.graphics.drawCircle(e[0],e[1],this.radius*t.area.transformation.getScaleX(),o,null)),o=t.properties.pencilcircle.color,this.color&&(o=this.color),o=new goog.graphics.Stroke(t.properties.pencilcircle.width,o);t.graphics.drawCircle(e[0],e[1],this.radius*t.area.transformation.getScaleX(),o,null)}},bay.whiteboard.Whiteboard.properties.pencilcircle={width:3,color:"Grey"},bay.whiteboard.pencil.Circle.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PencilCircle", "p1": '+t.indexOf(this.centerPoint)+', "p2": '+t.indexOf(this.endPoint)+"}"},bay.whiteboard.pencil.Circle.fromJson=function(t,e){var o=new bay.whiteboard.pencil.Circle(e[t.p1],e[t.p2]);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("PencilCircle",bay.whiteboard.pencil.Circle.fromJson),bay.whiteboard.Whiteboard.addTool("pencilcircle","pencil",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_circleCursor"),t.tool.current.compass={}},toggleOff:function(t){t.clearCurrentTool("bwb_circleCursor","compass")},onMove:function(t,e){t.tool.current.compass.endTmp&&t.tool.current.compass.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.compass.start?(t.collections.main.add(new bay.whiteboard.pencil.Circle(t.tool.current.compass.start,o)),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.collections.current.clear(),t.tool.current.compass.start=o,t.collections.current.add(t.tool.current.compass.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.compass.endTmp.hide(),o=new bay.whiteboard.pencil.Circle(t.tool.current.compass.start,t.tool.current.compass.endTmp),o.current=!0,t.collections.current.add(o)),t.redrawAll()}},4,goog.getMsg("Circle")),bay.whiteboard.pencil.Text=function(t,e){bay.whiteboard.Element.call(this),this.rectangle=t,t.dependant.push(this),this.label=e,this.recalc()},goog.inherits(bay.whiteboard.pencil.Text,bay.whiteboard.Element),bay.whiteboard.pencil.Text.prototype.deleteElement=function(){this.rectangle.deleteDependant(this)},bay.whiteboard.pencil.Text.prototype.toString=function(){return this.exists?goog.getMsg("Text [{$label}]",{label:this.label}):goog.getMsg("Text does not exist")},bay.whiteboard.pencil.Text.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e);return this.rectangle.pos.left<=o.x&&o.x<=this.rectangle.pos.right&&this.rectangle.pos.top>=o.y&&o.y>=this.rectangle.pos.bottom?0:this.rectangle.distance(t,e)},bay.whiteboard.pencil.Text.prototype.recalc=function(){this.exists=!!this.rectangle.exists,this.recalcDependant()},bay.whiteboard.pencil.Text.prototype.width=function(t,e){var o=goog.dom.createDom("div",{style:"position: absolute; float: left; white-space: nowrap; display: hidden; font: "+e+"px "+t+";"},this.label);return goog.dom.appendChild(document.body,o),w=goog.style.getSize(o).width,goog.dom.removeNode(o),w},bay.whiteboard.pencil.Text.prototype.draw=function(t){if(this.exists){var e=t.transform([this.rectangle.pos.left,this.rectangle.pos.top]),o=(this.rectangle.pos.right-this.rectangle.pos.left)*t.area.transformation.getScaleX(),i=(this.rectangle.pos.bottom-this.rectangle.pos.top)*t.area.transformation.getScaleY(),n=new goog.graphics.Font(i,t.properties.text.font),r=i;if((n=this.width(t.properties.text.font,i))>o&&(r=i*o/n),n=new goog.graphics.Font(r,t.properties.text.font),this.current){r=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color);var g=new goog.graphics.SolidFill(t.properties.current.color)}else this.hover&&(g=t.transform([this.rectangle.pos.left,this.rectangle.pos.bottom,this.rectangle.pos.right,this.rectangle.pos.top]),(r=new goog.graphics.Path).moveTo(g[0],g[1]),r.lineTo(g[0],g[3]),r.lineTo(g[2],g[3]),r.lineTo(g[2],g[1]),r.lineTo(g[0],g[1]),g=new goog.graphics.SolidFill(t.properties.hover.color,.2),t.graphics.drawPath(r,null,g)),g=t.properties.text.color,this.color&&(g=this.color),r=new goog.graphics.Stroke(t.properties.text.width,g),g=new goog.graphics.SolidFill(g);t.graphics.drawText(this.label,e[0],e[1],o,i,"center","center",n,r,g)}},bay.whiteboard.Whiteboard.properties.text={width:1,color:"DarkBlue",font:"Times"},bay.whiteboard.pencil.Text.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "Text", "r": '+t.indexOf(this.rectangle)+"}"},bay.whiteboard.pencil.Text.fromJson=function(t,e){var o=new bay.whiteboard.pencil.Text(e[t.r],t.label);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("Text",bay.whiteboard.pencil.Text.fromJson),bay.whiteboard.Whiteboard.addTool("text","pencil",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_textCursor"),t.tool.current.text={}},toggleOff:function(t){t.clearCurrentTool("bwb_textCursor","text")},onMove:function(t,e){t.tool.current.text.endTmp&&t.tool.current.text.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.text.start?(o=new bay.whiteboard.pencil.Rectangle(t.tool.current.text.start,o),t.collections.main.add(o),t.collections.main.add(new bay.whiteboard.pencil.Text(o,"Some text")),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.collections.current.clear(),t.tool.current.text.start=o,t.collections.current.add(t.tool.current.text.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.text.endTmp.hide(),o=new bay.whiteboard.pencil.Rectangle(t.tool.current.text.start,t.tool.current.text.endTmp),o.current=!0,t.collections.current.add(o)),t.redrawAll()}},5,goog.getMsg("Text box")),bay.whiteboard.pencil.Underline=function(t,e,o){bay.whiteboard.Element.call(this),this.startPoint=t,this.endPoint=e,t.dependant.push(this),e.dependant.push(this),this.thickness=o||15,this.recalc()},goog.inherits(bay.whiteboard.pencil.Underline,bay.whiteboard.Element),bay.whiteboard.pencil.Underline.prototype.deleteElement=function(){this.startPoint.deleteDependant(this),this.endPoint.deleteDependant(this)},bay.whiteboard.pencil.Underline.prototype.toString=function(){return this.exists?goog.getMsg("Underline"):goog.getMsg("Underline does not exists")},bay.whiteboard.pencil.Underline.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e),i=this.startPoint.y-o.y,n=this.endPoint.y-o.y;return 0!=this.direction.x&&(i=this.startPoint.x-o.x+this.direction.y*(this.startPoint.y-o.y)/this.direction.x,n=this.endPoint.x-o.x+this.direction.y*(this.endPoint.y-o.y)/this.direction.x),0>=i*n?(o=Math.abs(this.direction.x*(o.y-this.startPoint.y)-this.direction.y*(o.x-this.startPoint.x))/Math.sqrt(this.direction.x*this.direction.x+this.direction.y*this.direction.y))<this.thickness?0:o-this.thickness:(i=this.startPoint.distance(o.x,o.y),n=this.endPoint.distance(o.x,o.y),i<n?i:n)},bay.whiteboard.pencil.Underline.prototype.recalc=function(){this.startPoint&&this.endPoint&&this.startPoint.exists&&this.endPoint.exists?(this.exists=!0,this.direction=new bay.whiteboard.Vector(this.endPoint.x-this.startPoint.x,this.endPoint.y-this.startPoint.y)):this.exists=!1,this.recalcDependant()},bay.whiteboard.pencil.Underline.prototype.draw=function(t){if(this.exists){var e=bay.whiteboard.geometry.Line.prototype.getMinAndMaxParamValue.call(this,t.area);if(e&&0<e.max&&1>e.min&&0!=(e=Math.sqrt(this.direction.x*this.direction.x+this.direction.y*this.direction.y))){var o=[];o[0]=this.startPoint.x+this.thickness*this.direction.y/e,o[1]=this.startPoint.y-this.thickness*this.direction.x/e,o[2]=this.startPoint.x-this.thickness*this.direction.y/e,o[3]=this.startPoint.y+this.thickness*this.direction.x/e,o[4]=this.endPoint.x+this.thickness*this.direction.y/e,o[5]=this.endPoint.y-this.thickness*this.direction.x/e,o[6]=this.endPoint.x-this.thickness*this.direction.y/e,o[7]=this.endPoint.y+this.thickness*this.direction.x/e,o=t.transform(o),(e=new goog.graphics.Path).moveTo(o[0],o[1]),e.lineTo(o[2],o[3]),
e.lineTo(o[6],o[7]),e.lineTo(o[4],o[5]),e.lineTo(o[0],o[1]),this.current?o=new goog.graphics.SolidFill(t.properties.current.color,t.properties.underline.opacity):(this.hover&&(o=new goog.graphics.SolidFill(t.properties.hover.color,t.properties.underline.opacity),t.graphics.drawPath(e,null,o)),o=t.properties.underline.color,this.color&&(o=this.color),o=new goog.graphics.SolidFill(o,t.properties.underline.opacity)),t.graphics.drawPath(e,null,o)}}},bay.whiteboard.Whiteboard.properties.underline={thickness:15,color:"Magenta",opacity:.3},bay.whiteboard.pencil.Underline.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PencilUnderline", "p1": '+t.indexOf(this.startPoint)+', "p2": '+t.indexOf(this.endPoint)+', "thick": '+this.thickness+"}"},bay.whiteboard.pencil.Underline.fromJson=function(t,e){var o=new bay.whiteboard.pencil.Underline(e[t.p1],e[t.p2]);return o.thickness=t.thick,o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("PencilUnderline",bay.whiteboard.pencil.Underline.fromJson),bay.whiteboard.Whiteboard.addTool("underline","pencil",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_underlineCursor"),t.tool.current.underline={}},toggleOff:function(t){t.clearCurrentTool("bwb_underlineCursor","underline")},onMove:function(t,e){t.tool.current.underline.endTmp&&t.tool.current.underline.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.underline.start?(t.collections.main.add(new bay.whiteboard.pencil.Underline(t.tool.current.underline.start,o,t.properties.underline.thickness)),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.collections.current.clear(),t.tool.current.underline.start=o,t.collections.current.add(t.tool.current.underline.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.underline.endTmp.hide(),o=new bay.whiteboard.pencil.Underline(t.tool.current.underline.start,t.tool.current.underline.endTmp,t.properties.underline.thickness),o.current=!0,t.collections.current.add(o)),t.redrawAll()}},7,goog.getMsg("Highlight board area")),bay.whiteboard.pencil.Arrow=function(t,e,o){bay.whiteboard.Element.call(this),this.startPoint=t,this.endPoint=e,t.dependant.push(this),e.dependant.push(this),this.thickness=o||15,this.recalc()},goog.inherits(bay.whiteboard.pencil.Arrow,bay.whiteboard.Element),bay.whiteboard.pencil.Arrow.prototype.deleteElement=function(){this.startPoint.deleteDependant(this),this.endPoint.deleteDependant(this)},bay.whiteboard.pencil.Arrow.prototype.toString=function(){return this.exists?goog.getMsg("Arrow"):goog.getMsg("Arrow does not exists")},bay.whiteboard.pencil.Arrow.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e),i=this.startPoint.y-o.y,n=this.endPoint.y-o.y;return 0!=this.direction.x&&(i=this.startPoint.x-o.x+this.direction.y*(this.startPoint.y-o.y)/this.direction.x,n=this.endPoint.x-o.x+this.direction.y*(this.endPoint.y-o.y)/this.direction.x),0>=i*n?(o=Math.abs(this.direction.x*(o.y-this.startPoint.y)-this.direction.y*(o.x-this.startPoint.x))/Math.sqrt(this.direction.x*this.direction.x+this.direction.y*this.direction.y))<this.thickness?0:o-this.thickness:(i=this.startPoint.distance(o.x,o.y),n=this.endPoint.distance(o.x,o.y),i<n?i:n)},bay.whiteboard.pencil.Arrow.prototype.recalc=function(){this.startPoint&&this.endPoint&&this.startPoint.exists&&this.endPoint.exists?(this.exists=!0,this.direction=new bay.whiteboard.Vector(this.endPoint.x-this.startPoint.x,this.endPoint.y-this.startPoint.y)):this.exists=!1,this.recalcDependant()},bay.whiteboard.pencil.Arrow.prototype.draw=function(t){if(this.exists){var e=bay.whiteboard.geometry.Line.prototype.getMinAndMaxParamValue.call(this,t.area);if(e&&0<e.max&&1>e.min&&0!=(e=Math.sqrt(this.direction.x*this.direction.x+this.direction.y*this.direction.y))){var o=[];if(o[0]=this.startPoint.x+this.thickness*this.direction.y/e,o[1]=this.startPoint.y-this.thickness*this.direction.x/e,o[2]=this.startPoint.x-this.thickness*this.direction.y/e,o[3]=this.startPoint.y+this.thickness*this.direction.x/e,o[4]=this.endPoint.x-6*this.thickness*this.direction.x/e-this.thickness*this.direction.y/e,o[5]=this.endPoint.y-6*this.thickness*this.direction.y/e+this.thickness*this.direction.x/e,o[6]=this.endPoint.x-6*this.thickness*this.direction.x/e-3*this.thickness*this.direction.y/e,o[7]=this.endPoint.y-6*this.thickness*this.direction.y/e+3*this.thickness*this.direction.x/e,o[8]=this.endPoint.x,o[9]=this.endPoint.y,o[10]=this.endPoint.x-6*this.thickness*this.direction.x/e+3*this.thickness*this.direction.y/e,o[11]=this.endPoint.y-6*this.thickness*this.direction.y/e-3*this.thickness*this.direction.x/e,o[12]=this.endPoint.x-6*this.thickness*this.direction.x/e+this.thickness*this.direction.y/e,o[13]=this.endPoint.y-6*this.thickness*this.direction.y/e-this.thickness*this.direction.x/e,o=t.transform(o),(e=new goog.graphics.Path).moveTo(o[0],o[1]),e.lineTo(o[2],o[3]),e.lineTo(o[4],o[5]),e.lineTo(o[6],o[7]),e.lineTo(o[8],o[9]),e.lineTo(o[10],o[11]),e.lineTo(o[12],o[13]),e.lineTo(o[0],o[1]),this.current)o=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color),t.graphics.drawPath(e,o,null);else{if(this.hover){var i=new goog.graphics.SolidFill(t.properties.hover.color,t.properties.arrow.opacity);t.graphics.drawPath(e,null,i)}i=t.properties.arrow.color,this.color&&(i=this.color),o=new goog.graphics.Stroke(t.properties.arrow.width,i),i=new goog.graphics.SolidFill(i,t.properties.arrow.opacity),t.graphics.drawPath(e,o,i)}}}},bay.whiteboard.Whiteboard.properties.arrow={width:1,thickness:3,color:"Gray",opacity:.3},bay.whiteboard.pencil.Arrow.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PencilArrow", "p1": '+t.indexOf(this.startPoint)+', "p2": '+t.indexOf(this.endPoint)+', "thick": '+this.thickness+"}"},bay.whiteboard.pencil.Arrow.fromJson=function(t,e){var o=new bay.whiteboard.pencil.Arrow(e[t.p1],e[t.p2]);return o.thickness=t.thick,o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("PencilArrow",bay.whiteboard.pencil.Arrow.fromJson),bay.whiteboard.Whiteboard.addTool("arrow","pencil",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_arrowCursor"),t.tool.current.arrow={}},toggleOff:function(t){t.clearCurrentTool("bwb_arrowCursor","arrow")},onMove:function(t,e){t.tool.current.arrow.endTmp&&t.tool.current.arrow.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.tool.current.arrow.start?(t.collections.main.add(new bay.whiteboard.pencil.Arrow(t.tool.current.arrow.start,o,t.properties.arrow.thickness)),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.collections.current.clear(),t.tool.current.arrow.start=o,t.collections.current.add(t.tool.current.arrow.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.arrow.endTmp.hide(),o=new bay.whiteboard.pencil.Arrow(t.tool.current.arrow.start,t.tool.current.arrow.endTmp,t.properties.arrow.thickness),o.current=!0,t.collections.current.add(o)),t.redrawAll()}},6,goog.getMsg("Draw an arrow")),bay.whiteboard.pencil.Pointer=function(t){if(bay.whiteboard.Element.call(this),this.point=t){t.dependant.push(this);var e=this;this.interval=setInterval(function(){e.decreaseAge(100)},100)}this.recalc()},goog.inherits(bay.whiteboard.pencil.Pointer,bay.whiteboard.Element),bay.whiteboard.pencil.Pointer.prototype.deleteElement=function(){this.point&&this.point.deleteDependant(this)},bay.whiteboard.pencil.Pointer.prototype.toString=function(){return this.exists?goog.getMsg("Pointer [{$x},{$y}]",{x:this.point.x.toFixed(2),y:this.point.y.toFixed(2)}):goog.getMsg("Pointer does not exists")},bay.whiteboard.pencil.Pointer.prototype.decreaseAge=function(t){this.collection&&this.collection.getBoard()&&(this.board=this.collection.getBoard()),this.board&&(void 0==this.age&&(this.age=this.board.properties.pointer.age,this.recalc()),this.age-=t,0>=this.age&&(clearInterval(this.interval),this.point&&(this.point.deleteDependant(this),this.point=null),this.recalc()),this.board.redrawAll())},bay.whiteboard.pencil.Pointer.prototype.distance=function(t,e){if(this.exists)return this.point.distance(t,e)},bay.whiteboard.pencil.Pointer.prototype.recalc=function(){this.exists=!!(null!=this.point&&this.point.exists&&0<this.age),this.recalcDependant()},bay.whiteboard.pencil.Pointer.prototype.draw=function(t){if(this.exists&&this.point.x>=t.area.minX&&this.point.x<=t.area.maxX&&this.point.y>=t.area.minY&&this.point.y<=t.area.maxY){var e=t.properties.pointer.radius*(this.age%500/500)*t.area.transformation.getScaleX();(o=[])[0]=this.point.x,o[1]=this.point.y,o[2]=this.point.x-t.properties.pointer.radius,o[3]=this.point.y,o[4]=this.point.x+t.properties.pointer.radius,o[5]=this.point.y,o[6]=this.point.x,o[7]=this.point.y-t.properties.pointer.radius,o[8]=this.point.x,o[9]=this.point.y+t.properties.pointer.radius;var o=t.transform(o),i=new goog.graphics.Path;i.moveTo(o[2],o[3]),i.lineTo(o[4],o[5]);var n=new goog.graphics.Path;if(n.moveTo(o[6],o[7]),n.lineTo(o[8],o[9]),this.current){var r=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color);t.graphics.drawCircle(o[0],o[1],e,r,null)}else this.hover&&(r=new goog.graphics.Stroke(t.properties.hover.width,t.properties.hover.color),t.graphics.drawPath(i,r,null),t.graphics.drawPath(n,r,null)),r=t.properties.pointer.color,this.color&&(r=this.color),r=new goog.graphics.Stroke(t.properties.pointer.width,r),t.graphics.drawCircle(o[0],o[1],e,r,null),t.graphics.drawPath(i,r,null),t.graphics.drawPath(n,r,null)}},bay.whiteboard.Whiteboard.properties.pointer={width:1,radius:30,color:"Magenta",age:1e4},bay.whiteboard.pencil.Pointer.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "PencilPointer", "p": '+t.indexOf(this.point)+', "age" :'+this.age+"}"},bay.whiteboard.pencil.Pointer.fromJson=function(t,e){var o=new bay.whiteboard.pencil.Pointer(e[t.p]);return o.age=t.age,o.restoreFromJson(t),o.recalc(),o},bay.whiteboard.Collection.setFromJsonFunc("PencilPointer",bay.whiteboard.pencil.Pointer.fromJson),bay.whiteboard.Whiteboard.addTool("pointer","pencil",{toggleOn:function(t){goog.dom.classes.add(t.elements.drawElement,"bwb_pointerCursor"),t.tool.current.pointer={}},toggleOff:function(t){t.clearCurrentTool("bwb_pointerCursor","pointer")},onClick:function(t,e){var o=t.pointAtEventPosition(e);t.collections.main.add(new bay.whiteboard.pencil.Pointer(o)),t.tool.current.toggleOff(t),t.redrawAll()}},8,goog.getMsg("Highlight a point at whiteboard")),bay.whiteboard.art={},bay.whiteboard.art.ClipArt=function(t,e){bay.whiteboard.Element.call(this),this.rectangle=t,t.dependant.push(this),this.label=e,this.recalc()},goog.inherits(bay.whiteboard.art.ClipArt,bay.whiteboard.Element),bay.whiteboard.art.ClipArt.prototype.deleteElement=function(){this.rectangle.deleteDependant(this)},bay.whiteboard.art.ClipArt.prototype.toString=function(){return this.exists?goog.getMsg("ClipArt from [{$label}]",{label:this.label}):goog.getMsg("ClipArt does not exist")},bay.whiteboard.art.ClipArt.prototype.distance=function(t,e){var o=new bay.whiteboard.Vector(t,e);return this.rectangle.pos.left<=o.x&&o.x<=this.rectangle.pos.right&&this.rectangle.pos.top>=o.y&&o.y>=this.rectangle.pos.bottom?0:this.rectangle.distance(t,e)},bay.whiteboard.art.ClipArt.prototype.recalc=function(){this.exists=!!this.rectangle.exists,this.recalcDependant()},bay.whiteboard.art.ClipArt.prototype.draw=function(t){if(this.exists){this.color&&(color=this.color);var e=(this.rectangle.pos.right-this.rectangle.pos.left)*t.area.transformation.getScaleX(),o=(this.rectangle.pos.bottom-this.rectangle.pos.top)*t.area.transformation.getScaleY(),i=t.transform([this.rectangle.pos.left,this.rectangle.pos.top,this.rectangle.pos.right,this.rectangle.pos.bottom]),n=new goog.graphics.Path;if(n.moveTo(i[0],i[1]),n.lineTo(i[0],i[3]),n.lineTo(i[2],i[3]),n.lineTo(i[2],i[1]),n.lineTo(i[0],i[1]),this.current)e=new goog.graphics.Stroke(t.properties.current.width,t.properties.current.color),t.graphics.drawPath(n,e,null);else{if(this.hover){var r=new goog.graphics.SolidFill(t.properties.hover.color,.2);t.graphics.drawPath(n,null,r)}t.graphics.drawImage(i[0],i[1],e,o,this.label)}}},bay.whiteboard.art.ClipArt.prototype.toJson=function(t,e){return"{"+this.jsonHeader(e)+', "type": "ClipArt", "r": '+t.indexOf(this.rectangle)+"}"},bay.whiteboard.art.ClipArt.fromJson=function(t,e){var o=new bay.whiteboard.art.ClipArt(e[t.r],t.label);return o.restoreFromJson(t),o},bay.whiteboard.Collection.setFromJsonFunc("ClipArt",bay.whiteboard.art.ClipArt.fromJson),bay.whiteboard.Whiteboard.addTool("clipart","pencil",{toggleOn:function(t){t.tool.current.clipart={},t.tool.current.clipart.dialog=bay.whiteboard.art.chooseClipArt(t,function(e){t.tool.current.clipart.label=e,t.tool.current.clipart.dialog.dispose(),goog.dom.classes.add(t.elements.drawElement,"bwb_clipartCursor")},function(){t.tool.current.clipart.dialog.dispose(),t.tool.current.toggleOff(t)})},toggleOff:function(t){t.tool.current.clipart.dialog&&t.tool.current.clipart.dialog.dispose(),t.clearCurrentTool("bwb_clipartCursor","clipart")},onMove:function(t,e){t.tool.current.clipart&&t.tool.current.clipart.endTmp&&t.tool.current.clipart.endTmp.moveTo(t.getConvertEventPos(e))},onClick:function(t,e){if(t.tool.current.clipart&&t.tool.current.clipart.label){var o=t.pointAtEventPosition(e);t.tool.current.clipart.start?(o=new bay.whiteboard.pencil.Rectangle(t.tool.current.clipart.start,o),t.collections.main.add(o),t.collections.main.add(new bay.whiteboard.art.ClipArt(o,t.tool.current.clipart.label)),t.collections.current.clear(),t.tool.current.toggleOff(t)):(t.collections.current.clear(),t.tool.current.clipart.start=o,t.collections.current.add(t.tool.current.clipart.endTmp=new bay.whiteboard.PointFree(o)),t.tool.current.clipart.endTmp.hide(),o=new bay.whiteboard.pencil.Rectangle(t.tool.current.clipart.start,t.tool.current.clipart.endTmp),o.current=!0,t.collections.current.add(o)),t.redrawAll()}}},20,goog.getMsg("Insert picture")),bay.whiteboard.art.chooseClipArt=function(t,e,o){return bay.whiteboard.art.chooseUrlDialog(t,e,o,"http://icons.iconarchive.com/icons/femfoyou/angry-birds/128/angry-bird-icon.png")},bay.whiteboard.Whiteboard.addTool("background","tools",{action:function(t){var e=bay.whiteboard.art.chooseBackground(t,function(o){e.dispose(),t.setBackground(o)},function(){e.dispose()})}},20,goog.getMsg("Change whiteboard background")),bay.whiteboard.art.chooseBackground=function(t,e,o){return bay.whiteboard.art.chooseUrlDialog(t,e,o,"http://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/World_map_pol_2005_v02.svg/2000px-World_map_pol_2005_v02.svg.png")},bay.whiteboard.art.chooseUrlDialog=function(t,e,o,i){var n=new goog.ui.Component;n.render(document.body),t=goog.style.getPosition(t.elements.drawElement),goog.dom.classes.add(n.getElement(),"bwb_pictureUrlDialog"),goog.style.setPosition(n.getElement(),t.x+40,t.y+10);var r=new goog.ui.BidiInput;return n.addChild(r,!0),r.setValue(i),goog.dom.classes.add(r.getElement(),"bwb_pictureUrlInput"),i=new goog.ui.Button("Ok"),n.addChild(i,!0),goog.events.listen(i,goog.ui.Component.EventType.ACTION,function(){e(r.getValue())}),goog.dom.classes.add(i.getElement(),"bwb_pictureUrlOkButton"),i=new goog.ui.Button("Cancel"),n.addChild(i,!0),goog.events.listen(i,goog.ui.Component.EventType.ACTION,function(){o()}),goog.dom.classes.add(i.getElement(),"bwb_pictureUrlCancelButton"),goog.style.showElement(n.getElement(),!0),n};